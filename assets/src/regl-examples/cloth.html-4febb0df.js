var lt=Object.defineProperty;var ht=(n,t,e)=>t in n?lt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var ln=(n,t,e)=>(ht(n,typeof t!="symbol"?t+"":t,e),e);import"../../modulepreload-polyfill-3cfb730f.js";import{W as ft,g as En}from"../../WebGL-b4686ab5.js";import{l as at,p as dt}from"../../gl-mat4-3d6487f1.js";function Mt(n){if(n===window||n===document.body)return[window.innerWidth,window.innerHeight];let t=!1;n.parentNode||(t=!0,document.body.appendChild(n));const e=n.getBoundingClientRect(),s=getComputedStyle(n),c=(e.height|0)+hn(s.getPropertyValue("margin-top"))+hn(s.getPropertyValue("margin-bottom")),r=(e.width|0)+hn(s.getPropertyValue("margin-left"))+hn(s.getPropertyValue("margin-right"));return t&&document.body.removeChild(n),[r,c]}function hn(n){return parseFloat(n)||0}const Sn=new Float32Array(2);function pt(n,t,e){const s=n.nodeName.toUpperCase()==="SVG";return n.style.position=n.style.position||"absolute",n.style.top=0,n.style.left=0,c.scale=parseFloat(e||1),c.parent=t,c();function c(){const r=c.parent||n.parentNode;let o,i;if(typeof r=="function"){const l=r(Sn)||Sn;o=l[0],i=l[1]}else if(r&&r!==document.body){const l=Mt(r);o=l[0]|0,i=l[1]|0}else o=window.innerWidth,i=window.innerHeight;return s?(n.setAttribute("width",`${o*c.scale}px`),n.setAttribute("height",`${i*c.scale}px`)):(n.width=o*c.scale,n.height=i*c.scale),n.style.width=`${o}px`,n.style.height=`${i}px`,c}}const L=1e-6;let D=typeof Float32Array<"u"?Float32Array:Array;const nn=Math.random;function Dn(){const n=new D(9);return D!==Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1,n}function mt(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[4],n[4]=t[5],n[5]=t[6],n[6]=t[8],n[7]=t[9],n[8]=t[10],n}function wt(n){const t=new D(9);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t}function yt(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n}function xt(n,t,e,s,c,r,o,i,l){const h=new D(9);return h[0]=n,h[1]=t,h[2]=e,h[3]=s,h[4]=c,h[5]=r,h[6]=o,h[7]=i,h[8]=l,h}function vt(n,t,e,s,c,r,o,i,l,h){return n[0]=t,n[1]=e,n[2]=s,n[3]=c,n[4]=r,n[5]=o,n[6]=i,n[7]=l,n[8]=h,n}function gt(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n}function $t(n,t){if(n===t){const e=t[1],s=t[2],c=t[5];n[1]=t[3],n[2]=t[6],n[3]=e,n[5]=t[7],n[6]=s,n[7]=c}else n[0]=t[0],n[1]=t[3],n[2]=t[6],n[3]=t[1],n[4]=t[4],n[5]=t[7],n[6]=t[2],n[7]=t[5],n[8]=t[8];return n}function zt(n,t){const e=t[0],s=t[1],c=t[2],r=t[3],o=t[4],i=t[5],l=t[6],h=t[7],f=t[8],a=f*o-i*h,M=-f*r+i*l,d=h*r-o*l;let w=e*a+s*M+c*d;return w?(w=1/w,n[0]=a*w,n[1]=(-f*s+c*h)*w,n[2]=(i*s-c*o)*w,n[3]=M*w,n[4]=(f*e-c*l)*w,n[5]=(-i*e+c*r)*w,n[6]=d*w,n[7]=(-h*e+s*l)*w,n[8]=(o*e-s*r)*w,n):null}function _t(n,t){const e=t[0],s=t[1],c=t[2],r=t[3],o=t[4],i=t[5],l=t[6],h=t[7],f=t[8];return n[0]=o*f-i*h,n[1]=c*h-s*f,n[2]=s*i-c*o,n[3]=i*l-r*f,n[4]=e*f-c*l,n[5]=c*r-e*i,n[6]=r*h-o*l,n[7]=s*l-e*h,n[8]=e*o-s*r,n}function Lt(n){const t=n[0],e=n[1],s=n[2],c=n[3],r=n[4],o=n[5],i=n[6],l=n[7],h=n[8];return t*(h*r-o*l)+e*(-h*c+o*i)+s*(l*c-r*i)}function jn(n,t,e){const s=t[0],c=t[1],r=t[2],o=t[3],i=t[4],l=t[5],h=t[6],f=t[7],a=t[8],M=e[0],d=e[1],w=e[2],m=e[3],p=e[4],x=e[5],y=e[6],v=e[7],g=e[8];return n[0]=M*s+d*o+w*h,n[1]=M*c+d*i+w*f,n[2]=M*r+d*l+w*a,n[3]=m*s+p*o+x*h,n[4]=m*c+p*i+x*f,n[5]=m*r+p*l+x*a,n[6]=y*s+v*o+g*h,n[7]=y*c+v*i+g*f,n[8]=y*r+v*l+g*a,n}function bt(n,t,e){const s=t[0],c=t[1],r=t[2],o=t[3],i=t[4],l=t[5],h=t[6],f=t[7],a=t[8],M=e[0],d=e[1];return n[0]=s,n[1]=c,n[2]=r,n[3]=o,n[4]=i,n[5]=l,n[6]=M*s+d*o+h,n[7]=M*c+d*i+f,n[8]=M*r+d*l+a,n}function At(n,t,e){const s=t[0],c=t[1],r=t[2],o=t[3],i=t[4],l=t[5],h=t[6],f=t[7],a=t[8],M=Math.sin(e),d=Math.cos(e);return n[0]=d*s+M*o,n[1]=d*c+M*i,n[2]=d*r+M*l,n[3]=d*o-M*s,n[4]=d*i-M*c,n[5]=d*l-M*r,n[6]=h,n[7]=f,n[8]=a,n}function qt(n,t,e){const s=e[0],c=e[1];return n[0]=s*t[0],n[1]=s*t[1],n[2]=s*t[2],n[3]=c*t[3],n[4]=c*t[4],n[5]=c*t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n}function Et(n,t){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=t[0],n[7]=t[1],n[8]=1,n}function St(n,t){const e=Math.sin(t),s=Math.cos(t);return n[0]=s,n[1]=e,n[2]=0,n[3]=-e,n[4]=s,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n}function Ft(n,t){return n[0]=t[0],n[1]=0,n[2]=0,n[3]=0,n[4]=t[1],n[5]=0,n[6]=0,n[7]=0,n[8]=1,n}function kt(n,t){return n[0]=t[0],n[1]=t[1],n[2]=0,n[3]=t[2],n[4]=t[3],n[5]=0,n[6]=t[4],n[7]=t[5],n[8]=1,n}function Pt(n,t){const e=t[0],s=t[1],c=t[2],r=t[3],o=e+e,i=s+s,l=c+c,h=e*o,f=s*o,a=s*i,M=c*o,d=c*i,w=c*l,m=r*o,p=r*i,x=r*l;return n[0]=1-a-w,n[3]=f-x,n[6]=M+p,n[1]=f+x,n[4]=1-h-w,n[7]=d-m,n[2]=M-p,n[5]=d+m,n[8]=1-h-a,n}function Tt(n,t){const e=t[0],s=t[1],c=t[2],r=t[3],o=t[4],i=t[5],l=t[6],h=t[7],f=t[8],a=t[9],M=t[10],d=t[11],w=t[12],m=t[13],p=t[14],x=t[15],y=e*i-s*o,v=e*l-c*o,g=e*h-r*o,$=s*l-c*i,z=s*h-r*i,F=c*h-r*l,E=f*m-a*w,S=f*p-M*w,b=f*x-d*w,A=a*p-M*m,q=a*x-d*m,k=M*x-d*p;let _=y*k-v*q+g*A+$*b-z*S+F*E;return _?(_=1/_,n[0]=(i*k-l*q+h*A)*_,n[1]=(l*b-o*k-h*S)*_,n[2]=(o*q-i*b+h*E)*_,n[3]=(c*q-s*k-r*A)*_,n[4]=(e*k-c*b+r*S)*_,n[5]=(s*b-e*q-r*E)*_,n[6]=(m*F-p*z+x*$)*_,n[7]=(p*g-w*F-x*v)*_,n[8]=(w*z-m*g+x*y)*_,n):null}function Dt(n,t,e){return n[0]=2/t,n[1]=0,n[2]=0,n[3]=0,n[4]=-2/e,n[5]=0,n[6]=-1,n[7]=1,n[8]=1,n}function jt(n){return`mat3(${n[0]}, ${n[1]}, ${n[2]}, ${n[3]}, ${n[4]}, ${n[5]}, ${n[6]}, ${n[7]}, ${n[8]})`}function Ot(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)+Math.pow(n[3],2)+Math.pow(n[4],2)+Math.pow(n[5],2)+Math.pow(n[6],2)+Math.pow(n[7],2)+Math.pow(n[8],2))}function Rt(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3],n[4]=t[4]+e[4],n[5]=t[5]+e[5],n[6]=t[6]+e[6],n[7]=t[7]+e[7],n[8]=t[8]+e[8],n}function On(n,t,e){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n[3]=t[3]-e[3],n[4]=t[4]-e[4],n[5]=t[5]-e[5],n[6]=t[6]-e[6],n[7]=t[7]-e[7],n[8]=t[8]-e[8],n}function Ct(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n[4]=t[4]*e,n[5]=t[5]*e,n[6]=t[6]*e,n[7]=t[7]*e,n[8]=t[8]*e,n}function Vt(n,t,e,s){return n[0]=t[0]+e[0]*s,n[1]=t[1]+e[1]*s,n[2]=t[2]+e[2]*s,n[3]=t[3]+e[3]*s,n[4]=t[4]+e[4]*s,n[5]=t[5]+e[5]*s,n[6]=t[6]+e[6]*s,n[7]=t[7]+e[7]*s,n[8]=t[8]+e[8]*s,n}function It(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]&&n[4]===t[4]&&n[5]===t[5]&&n[6]===t[6]&&n[7]===t[7]&&n[8]===t[8]}function Nt(n,t){const e=n[0],s=n[1],c=n[2],r=n[3],o=n[4],i=n[5],l=n[6],h=n[7],f=n[8],a=t[0],M=t[1],d=t[2],w=t[3],m=t[4],p=t[5],x=t[6],y=t[7],v=t[8];return Math.abs(e-a)<=L*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(s-M)<=L*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(c-d)<=L*Math.max(1,Math.abs(c),Math.abs(d))&&Math.abs(r-w)<=L*Math.max(1,Math.abs(r),Math.abs(w))&&Math.abs(o-m)<=L*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(i-p)<=L*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(l-x)<=L*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(h-y)<=L*Math.max(1,Math.abs(h),Math.abs(y))&&Math.abs(f-v)<=L*Math.max(1,Math.abs(f),Math.abs(v))}const Ut=jn,Xt=On,Yt=Object.freeze(Object.defineProperty({__proto__:null,add:Rt,adjoint:_t,clone:wt,copy:yt,create:Dn,determinant:Lt,equals:Nt,exactEquals:It,frob:Ot,fromMat2d:kt,fromMat4:mt,fromQuat:Pt,fromRotation:St,fromScaling:Ft,fromTranslation:Et,fromValues:xt,identity:gt,invert:zt,mul:Ut,multiply:jn,multiplyScalar:Ct,multiplyScalarAndAdd:Vt,normalFromMat4:Tt,projection:Dt,rotate:At,scale:qt,set:vt,str:jt,sub:Xt,subtract:On,translate:bt,transpose:$t},Symbol.toStringTag,{value:"Module"}));function Wt(){const n=new D(16);return D!==Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n}function Zt(n){const t=new D(16);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function Qt(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function Gt(n,t,e,s,c,r,o,i,l,h,f,a,M,d,w,m){const p=new D(16);return p[0]=n,p[1]=t,p[2]=e,p[3]=s,p[4]=c,p[5]=r,p[6]=o,p[7]=i,p[8]=l,p[9]=h,p[10]=f,p[11]=a,p[12]=M,p[13]=d,p[14]=w,p[15]=m,p}function Ht(n,t,e,s,c,r,o,i,l,h,f,a,M,d,w,m,p){return n[0]=t,n[1]=e,n[2]=s,n[3]=c,n[4]=r,n[5]=o,n[6]=i,n[7]=l,n[8]=h,n[9]=f,n[10]=a,n[11]=M,n[12]=d,n[13]=w,n[14]=m,n[15]=p,n}function Rn(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Bt(n,t){if(n===t){const e=t[1],s=t[2],c=t[3],r=t[6],o=t[7],i=t[11];n[1]=t[4],n[2]=t[8],n[3]=t[12],n[4]=e,n[6]=t[9],n[7]=t[13],n[8]=s,n[9]=r,n[11]=t[14],n[12]=c,n[13]=o,n[14]=i}else n[0]=t[0],n[1]=t[4],n[2]=t[8],n[3]=t[12],n[4]=t[1],n[5]=t[5],n[6]=t[9],n[7]=t[13],n[8]=t[2],n[9]=t[6],n[10]=t[10],n[11]=t[14],n[12]=t[3],n[13]=t[7],n[14]=t[11],n[15]=t[15];return n}function Kt(n,t){const e=t[0],s=t[1],c=t[2],r=t[3],o=t[4],i=t[5],l=t[6],h=t[7],f=t[8],a=t[9],M=t[10],d=t[11],w=t[12],m=t[13],p=t[14],x=t[15],y=e*i-s*o,v=e*l-c*o,g=e*h-r*o,$=s*l-c*i,z=s*h-r*i,F=c*h-r*l,E=f*m-a*w,S=f*p-M*w,b=f*x-d*w,A=a*p-M*m,q=a*x-d*m,k=M*x-d*p;let _=y*k-v*q+g*A+$*b-z*S+F*E;return _?(_=1/_,n[0]=(i*k-l*q+h*A)*_,n[1]=(c*q-s*k-r*A)*_,n[2]=(m*F-p*z+x*$)*_,n[3]=(M*z-a*F-d*$)*_,n[4]=(l*b-o*k-h*S)*_,n[5]=(e*k-c*b+r*S)*_,n[6]=(p*g-w*F-x*v)*_,n[7]=(f*F-M*g+d*v)*_,n[8]=(o*q-i*b+h*E)*_,n[9]=(s*b-e*q-r*E)*_,n[10]=(w*z-m*g+x*y)*_,n[11]=(a*g-f*z-d*y)*_,n[12]=(i*S-o*A-l*E)*_,n[13]=(e*A-s*S+c*E)*_,n[14]=(m*v-w*$-p*y)*_,n[15]=(f*$-a*v+M*y)*_,n):null}function Jt(n,t){const e=t[0],s=t[1],c=t[2],r=t[3],o=t[4],i=t[5],l=t[6],h=t[7],f=t[8],a=t[9],M=t[10],d=t[11],w=t[12],m=t[13],p=t[14],x=t[15];return n[0]=i*(M*x-d*p)-a*(l*x-h*p)+m*(l*d-h*M),n[1]=-(s*(M*x-d*p)-a*(c*x-r*p)+m*(c*d-r*M)),n[2]=s*(l*x-h*p)-i*(c*x-r*p)+m*(c*h-r*l),n[3]=-(s*(l*d-h*M)-i*(c*d-r*M)+a*(c*h-r*l)),n[4]=-(o*(M*x-d*p)-f*(l*x-h*p)+w*(l*d-h*M)),n[5]=e*(M*x-d*p)-f*(c*x-r*p)+w*(c*d-r*M),n[6]=-(e*(l*x-h*p)-o*(c*x-r*p)+w*(c*h-r*l)),n[7]=e*(l*d-h*M)-o*(c*d-r*M)+f*(c*h-r*l),n[8]=o*(a*x-d*m)-f*(i*x-h*m)+w*(i*d-h*a),n[9]=-(e*(a*x-d*m)-f*(s*x-r*m)+w*(s*d-r*a)),n[10]=e*(i*x-h*m)-o*(s*x-r*m)+w*(s*h-r*i),n[11]=-(e*(i*d-h*a)-o*(s*d-r*a)+f*(s*h-r*i)),n[12]=-(o*(a*p-M*m)-f*(i*p-l*m)+w*(i*M-l*a)),n[13]=e*(a*p-M*m)-f*(s*p-c*m)+w*(s*M-c*a),n[14]=-(e*(i*p-l*m)-o*(s*p-c*m)+w*(s*l-c*i)),n[15]=e*(i*M-l*a)-o*(s*M-c*a)+f*(s*l-c*i),n}function ut(n){const t=n[0],e=n[1],s=n[2],c=n[3],r=n[4],o=n[5],i=n[6],l=n[7],h=n[8],f=n[9],a=n[10],M=n[11],d=n[12],w=n[13],m=n[14],p=n[15],x=t*o-e*r,y=t*i-s*r,v=t*l-c*r,g=e*i-s*o,$=e*l-c*o,z=s*l-c*i,F=h*w-f*d,E=h*m-a*d,S=h*p-M*d,b=f*m-a*w,A=f*p-M*w,q=a*p-M*m;return x*q-y*A+v*b+g*S-$*E+z*F}function Cn(n,t,e){const s=t[0],c=t[1],r=t[2],o=t[3],i=t[4],l=t[5],h=t[6],f=t[7],a=t[8],M=t[9],d=t[10],w=t[11],m=t[12],p=t[13],x=t[14],y=t[15];let v=e[0],g=e[1],$=e[2],z=e[3];return n[0]=v*s+g*i+$*a+z*m,n[1]=v*c+g*l+$*M+z*p,n[2]=v*r+g*h+$*d+z*x,n[3]=v*o+g*f+$*w+z*y,v=e[4],g=e[5],$=e[6],z=e[7],n[4]=v*s+g*i+$*a+z*m,n[5]=v*c+g*l+$*M+z*p,n[6]=v*r+g*h+$*d+z*x,n[7]=v*o+g*f+$*w+z*y,v=e[8],g=e[9],$=e[10],z=e[11],n[8]=v*s+g*i+$*a+z*m,n[9]=v*c+g*l+$*M+z*p,n[10]=v*r+g*h+$*d+z*x,n[11]=v*o+g*f+$*w+z*y,v=e[12],g=e[13],$=e[14],z=e[15],n[12]=v*s+g*i+$*a+z*m,n[13]=v*c+g*l+$*M+z*p,n[14]=v*r+g*h+$*d+z*x,n[15]=v*o+g*f+$*w+z*y,n}function ne(n,t,e){const s=e[0],c=e[1],r=e[2];let o,i,l,h,f,a,M,d,w,m,p,x;return t===n?(n[12]=t[0]*s+t[4]*c+t[8]*r+t[12],n[13]=t[1]*s+t[5]*c+t[9]*r+t[13],n[14]=t[2]*s+t[6]*c+t[10]*r+t[14],n[15]=t[3]*s+t[7]*c+t[11]*r+t[15]):(o=t[0],i=t[1],l=t[2],h=t[3],f=t[4],a=t[5],M=t[6],d=t[7],w=t[8],m=t[9],p=t[10],x=t[11],n[0]=o,n[1]=i,n[2]=l,n[3]=h,n[4]=f,n[5]=a,n[6]=M,n[7]=d,n[8]=w,n[9]=m,n[10]=p,n[11]=x,n[12]=o*s+f*c+w*r+t[12],n[13]=i*s+a*c+m*r+t[13],n[14]=l*s+M*c+p*r+t[14],n[15]=h*s+d*c+x*r+t[15]),n}function te(n,t,e){const s=e[0],c=e[1],r=e[2];return n[0]=t[0]*s,n[1]=t[1]*s,n[2]=t[2]*s,n[3]=t[3]*s,n[4]=t[4]*c,n[5]=t[5]*c,n[6]=t[6]*c,n[7]=t[7]*c,n[8]=t[8]*r,n[9]=t[9]*r,n[10]=t[10]*r,n[11]=t[11]*r,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function ee(n,t,e,s){let c=s[0],r=s[1],o=s[2],i=Math.sqrt(c*c+r*r+o*o);if(i<L)return null;i=1/i,c*=i,r*=i,o*=i;const l=Math.sin(e),h=Math.cos(e),f=1-h,a=t[0],M=t[1],d=t[2],w=t[3],m=t[4],p=t[5],x=t[6],y=t[7],v=t[8],g=t[9],$=t[10],z=t[11],F=c*c*f+h,E=r*c*f+o*l,S=o*c*f-r*l,b=c*r*f-o*l,A=r*r*f+h,q=o*r*f+c*l,k=c*o*f+r*l,_=r*o*f-c*l,V=o*o*f+h;return n[0]=a*F+m*E+v*S,n[1]=M*F+p*E+g*S,n[2]=d*F+x*E+$*S,n[3]=w*F+y*E+z*S,n[4]=a*b+m*A+v*q,n[5]=M*b+p*A+g*q,n[6]=d*b+x*A+$*q,n[7]=w*b+y*A+z*q,n[8]=a*k+m*_+v*V,n[9]=M*k+p*_+g*V,n[10]=d*k+x*_+$*V,n[11]=w*k+y*_+z*V,t!==n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n}function se(n,t,e){const s=Math.sin(e),c=Math.cos(e),r=t[4],o=t[5],i=t[6],l=t[7],h=t[8],f=t[9],a=t[10],M=t[11];return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[4]=r*c+h*s,n[5]=o*c+f*s,n[6]=i*c+a*s,n[7]=l*c+M*s,n[8]=h*c-r*s,n[9]=f*c-o*s,n[10]=a*c-i*s,n[11]=M*c-l*s,n}function ce(n,t,e){const s=Math.sin(e),c=Math.cos(e),r=t[0],o=t[1],i=t[2],l=t[3],h=t[8],f=t[9],a=t[10],M=t[11];return t!==n&&(n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=r*c-h*s,n[1]=o*c-f*s,n[2]=i*c-a*s,n[3]=l*c-M*s,n[8]=r*s+h*c,n[9]=o*s+f*c,n[10]=i*s+a*c,n[11]=l*s+M*c,n}function re(n,t,e){const s=Math.sin(e),c=Math.cos(e),r=t[0],o=t[1],i=t[2],l=t[3],h=t[4],f=t[5],a=t[6],M=t[7];return t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=r*c+h*s,n[1]=o*c+f*s,n[2]=i*c+a*s,n[3]=l*c+M*s,n[4]=h*c-r*s,n[5]=f*c-o*s,n[6]=a*c-i*s,n[7]=M*c-l*s,n}function ie(n,t){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,n}function oe(n,t){return n[0]=t[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=t[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=t[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function le(n,t,e){let s=e[0],c=e[1],r=e[2],o=Math.sqrt(s*s+c*c+r*r);if(o<L)return null;o=1/o,s*=o,c*=o,r*=o;const i=Math.sin(t),l=Math.cos(t),h=1-l;return n[0]=s*s*h+l,n[1]=c*s*h+r*i,n[2]=r*s*h-c*i,n[3]=0,n[4]=s*c*h-r*i,n[5]=c*c*h+l,n[6]=r*c*h+s*i,n[7]=0,n[8]=s*r*h+c*i,n[9]=c*r*h-s*i,n[10]=r*r*h+l,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function he(n,t){const e=Math.sin(t),s=Math.cos(t);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=e,n[7]=0,n[8]=0,n[9]=-e,n[10]=s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function fe(n,t){const e=Math.sin(t),s=Math.cos(t);return n[0]=s,n[1]=0,n[2]=-e,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=e,n[9]=0,n[10]=s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function ae(n,t){const e=Math.sin(t),s=Math.cos(t);return n[0]=s,n[1]=e,n[2]=0,n[3]=0,n[4]=-e,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Vn(n,t,e){const s=t[0],c=t[1],r=t[2],o=t[3],i=s+s,l=c+c,h=r+r,f=s*i,a=s*l,M=s*h,d=c*l,w=c*h,m=r*h,p=o*i,x=o*l,y=o*h;return n[0]=1-(d+m),n[1]=a+y,n[2]=M-x,n[3]=0,n[4]=a-y,n[5]=1-(f+m),n[6]=w+p,n[7]=0,n[8]=M+x,n[9]=w-p,n[10]=1-(f+d),n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n}function de(n,t){const e=new D(3),s=-t[0],c=-t[1],r=-t[2],o=t[3],i=t[4],l=t[5],h=t[6],f=t[7],a=s*s+c*c+r*r+o*o;return a>0?(e[0]=(i*o+f*s+l*r-h*c)*2/a,e[1]=(l*o+f*c+h*s-i*r)*2/a,e[2]=(h*o+f*r+i*c-l*s)*2/a):(e[0]=(i*o+f*s+l*r-h*c)*2,e[1]=(l*o+f*c+h*s-i*r)*2,e[2]=(h*o+f*r+i*c-l*s)*2),Vn(n,t,e),n}function Me(n,t){return n[0]=t[12],n[1]=t[13],n[2]=t[14],n}function pe(n,t){const e=t[0],s=t[1],c=t[2],r=t[4],o=t[5],i=t[6],l=t[8],h=t[9],f=t[10];return n[0]=Math.sqrt(e*e+s*s+c*c),n[1]=Math.sqrt(r*r+o*o+i*i),n[2]=Math.sqrt(l*l+h*h+f*f),n}function me(n,t){const e=t[0]+t[5]+t[10];let s=0;return e>0?(s=Math.sqrt(e+1)*2,n[3]=.25*s,n[0]=(t[6]-t[9])/s,n[1]=(t[8]-t[2])/s,n[2]=(t[1]-t[4])/s):t[0]>t[5]&&t[0]>t[10]?(s=Math.sqrt(1+t[0]-t[5]-t[10])*2,n[3]=(t[6]-t[9])/s,n[0]=.25*s,n[1]=(t[1]+t[4])/s,n[2]=(t[8]+t[2])/s):t[5]>t[10]?(s=Math.sqrt(1+t[5]-t[0]-t[10])*2,n[3]=(t[8]-t[2])/s,n[0]=(t[1]+t[4])/s,n[1]=.25*s,n[2]=(t[6]+t[9])/s):(s=Math.sqrt(1+t[10]-t[0]-t[5])*2,n[3]=(t[1]-t[4])/s,n[0]=(t[8]+t[2])/s,n[1]=(t[6]+t[9])/s,n[2]=.25*s),n}function we(n,t,e,s){const c=t[0],r=t[1],o=t[2],i=t[3],l=c+c,h=r+r,f=o+o,a=c*l,M=c*h,d=c*f,w=r*h,m=r*f,p=o*f,x=i*l,y=i*h,v=i*f,g=s[0],$=s[1],z=s[2];return n[0]=(1-(w+p))*g,n[1]=(M+v)*g,n[2]=(d-y)*g,n[3]=0,n[4]=(M-v)*$,n[5]=(1-(a+p))*$,n[6]=(m+x)*$,n[7]=0,n[8]=(d+y)*z,n[9]=(m-x)*z,n[10]=(1-(a+w))*z,n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n}function ye(n,t,e,s,c){const r=t[0],o=t[1],i=t[2],l=t[3],h=r+r,f=o+o,a=i+i,M=r*h,d=r*f,w=r*a,m=o*f,p=o*a,x=i*a,y=l*h,v=l*f,g=l*a,$=s[0],z=s[1],F=s[2],E=c[0],S=c[1],b=c[2],A=(1-(m+x))*$,q=(d+g)*$,k=(w-v)*$,_=(d-g)*z,V=(1-(M+x))*z,Z=(p+y)*z,N=(w+v)*F,rn=(p-y)*F,O=(1-(M+m))*F;return n[0]=A,n[1]=q,n[2]=k,n[3]=0,n[4]=_,n[5]=V,n[6]=Z,n[7]=0,n[8]=N,n[9]=rn,n[10]=O,n[11]=0,n[12]=e[0]+E-(A*E+_*S+N*b),n[13]=e[1]+S-(q*E+V*S+rn*b),n[14]=e[2]+b-(k*E+Z*S+O*b),n[15]=1,n}function xe(n,t){const e=t[0],s=t[1],c=t[2],r=t[3],o=e+e,i=s+s,l=c+c,h=e*o,f=s*o,a=s*i,M=c*o,d=c*i,w=c*l,m=r*o,p=r*i,x=r*l;return n[0]=1-a-w,n[1]=f+x,n[2]=M-p,n[3]=0,n[4]=f-x,n[5]=1-h-w,n[6]=d+m,n[7]=0,n[8]=M+p,n[9]=d-m,n[10]=1-h-a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function ve(n,t,e,s,c,r,o){const i=1/(e-t),l=1/(c-s),h=1/(r-o);return n[0]=r*2*i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=r*2*l,n[6]=0,n[7]=0,n[8]=(e+t)*i,n[9]=(c+s)*l,n[10]=(o+r)*h,n[11]=-1,n[12]=0,n[13]=0,n[14]=o*r*2*h,n[15]=0,n}function ge(n,t,e,s,c){const r=1/Math.tan(t/2);let o;return n[0]=r/e,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=r,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,!c&&c!==1/0?(o=1/(s-c),n[10]=(c+s)*o,n[14]=2*c*s*o):(n[10]=-1,n[14]=-2*s),n}function $e(n,t,e,s){const c=Math.tan(t.upDegrees*Math.PI/180),r=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),i=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+i),h=2/(c+r);return n[0]=l,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=h,n[6]=0,n[7]=0,n[8]=-((o-i)*l*.5),n[9]=(c-r)*h*.5,n[10]=s/(e-s),n[11]=-1,n[12]=0,n[13]=0,n[14]=s*e/(e-s),n[15]=0,n}function ze(n,t,e,s,c,r,o){const i=1/(t-e),l=1/(s-c),h=1/(r-o);return n[0]=-2*i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*l,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*h,n[11]=0,n[12]=(t+e)*i,n[13]=(c+s)*l,n[14]=(o+r)*h,n[15]=1,n}function _e(n,t,e,s){let c,r,o,i,l,h,f,a,M,d;const w=t[0],m=t[1],p=t[2],x=s[0],y=s[1],v=s[2],g=e[0],$=e[1],z=e[2];return Math.abs(w-g)<L&&Math.abs(m-$)<L&&Math.abs(p-z)<L?Rn(n):(f=w-g,a=m-$,M=p-z,d=1/Math.sqrt(f*f+a*a+M*M),f*=d,a*=d,M*=d,c=y*M-v*a,r=v*f-x*M,o=x*a-y*f,d=Math.sqrt(c*c+r*r+o*o),d?(d=1/d,c*=d,r*=d,o*=d):(c=0,r=0,o=0),i=a*o-M*r,l=M*c-f*o,h=f*r-a*c,d=Math.sqrt(i*i+l*l+h*h),d?(d=1/d,i*=d,l*=d,h*=d):(i=0,l=0,h=0),n[0]=c,n[1]=i,n[2]=f,n[3]=0,n[4]=r,n[5]=l,n[6]=a,n[7]=0,n[8]=o,n[9]=h,n[10]=M,n[11]=0,n[12]=-(c*w+r*m+o*p),n[13]=-(i*w+l*m+h*p),n[14]=-(f*w+a*m+M*p),n[15]=1,n)}function Le(n,t,e,s){const c=t[0],r=t[1],o=t[2],i=s[0],l=s[1],h=s[2];let f=c-e[0],a=r-e[1],M=o-e[2],d=f*f+a*a+M*M;d>0&&(d=1/Math.sqrt(d),f*=d,a*=d,M*=d);let w=l*M-h*a,m=h*f-i*M,p=i*a-l*f;return d=w*w+m*m+p*p,d>0&&(d=1/Math.sqrt(d),w*=d,m*=d,p*=d),n[0]=w,n[1]=m,n[2]=p,n[3]=0,n[4]=a*p-M*m,n[5]=M*w-f*p,n[6]=f*m-a*w,n[7]=0,n[8]=f,n[9]=a,n[10]=M,n[11]=0,n[12]=c,n[13]=r,n[14]=o,n[15]=1,n}function be(n){return`mat4(${n[0]}, ${n[1]}, ${n[2]}, ${n[3]}, ${n[4]}, ${n[5]}, ${n[6]}, ${n[7]}, ${n[8]}, ${n[9]}, ${n[10]}, ${n[11]}, ${n[12]}, ${n[13]}, ${n[14]}, ${n[15]})`}function Ae(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)+Math.pow(n[3],2)+Math.pow(n[4],2)+Math.pow(n[5],2)+Math.pow(n[6],2)+Math.pow(n[7],2)+Math.pow(n[8],2)+Math.pow(n[9],2)+Math.pow(n[10],2)+Math.pow(n[11],2)+Math.pow(n[12],2)+Math.pow(n[13],2)+Math.pow(n[14],2)+Math.pow(n[15],2))}function qe(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3],n[4]=t[4]+e[4],n[5]=t[5]+e[5],n[6]=t[6]+e[6],n[7]=t[7]+e[7],n[8]=t[8]+e[8],n[9]=t[9]+e[9],n[10]=t[10]+e[10],n[11]=t[11]+e[11],n[12]=t[12]+e[12],n[13]=t[13]+e[13],n[14]=t[14]+e[14],n[15]=t[15]+e[15],n}function In(n,t,e){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n[3]=t[3]-e[3],n[4]=t[4]-e[4],n[5]=t[5]-e[5],n[6]=t[6]-e[6],n[7]=t[7]-e[7],n[8]=t[8]-e[8],n[9]=t[9]-e[9],n[10]=t[10]-e[10],n[11]=t[11]-e[11],n[12]=t[12]-e[12],n[13]=t[13]-e[13],n[14]=t[14]-e[14],n[15]=t[15]-e[15],n}function Ee(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n[4]=t[4]*e,n[5]=t[5]*e,n[6]=t[6]*e,n[7]=t[7]*e,n[8]=t[8]*e,n[9]=t[9]*e,n[10]=t[10]*e,n[11]=t[11]*e,n[12]=t[12]*e,n[13]=t[13]*e,n[14]=t[14]*e,n[15]=t[15]*e,n}function Se(n,t,e,s){return n[0]=t[0]+e[0]*s,n[1]=t[1]+e[1]*s,n[2]=t[2]+e[2]*s,n[3]=t[3]+e[3]*s,n[4]=t[4]+e[4]*s,n[5]=t[5]+e[5]*s,n[6]=t[6]+e[6]*s,n[7]=t[7]+e[7]*s,n[8]=t[8]+e[8]*s,n[9]=t[9]+e[9]*s,n[10]=t[10]+e[10]*s,n[11]=t[11]+e[11]*s,n[12]=t[12]+e[12]*s,n[13]=t[13]+e[13]*s,n[14]=t[14]+e[14]*s,n[15]=t[15]+e[15]*s,n}function Fe(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]&&n[4]===t[4]&&n[5]===t[5]&&n[6]===t[6]&&n[7]===t[7]&&n[8]===t[8]&&n[9]===t[9]&&n[10]===t[10]&&n[11]===t[11]&&n[12]===t[12]&&n[13]===t[13]&&n[14]===t[14]&&n[15]===t[15]}function ke(n,t){const e=n[0],s=n[1],c=n[2],r=n[3],o=n[4],i=n[5],l=n[6],h=n[7],f=n[8],a=n[9],M=n[10],d=n[11],w=n[12],m=n[13],p=n[14],x=n[15],y=t[0],v=t[1],g=t[2],$=t[3],z=t[4],F=t[5],E=t[6],S=t[7],b=t[8],A=t[9],q=t[10],k=t[11],_=t[12],V=t[13],Z=t[14],N=t[15];return Math.abs(e-y)<=L*Math.max(1,Math.abs(e),Math.abs(y))&&Math.abs(s-v)<=L*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(c-g)<=L*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(r-$)<=L*Math.max(1,Math.abs(r),Math.abs($))&&Math.abs(o-z)<=L*Math.max(1,Math.abs(o),Math.abs(z))&&Math.abs(i-F)<=L*Math.max(1,Math.abs(i),Math.abs(F))&&Math.abs(l-E)<=L*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(h-S)<=L*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(f-b)<=L*Math.max(1,Math.abs(f),Math.abs(b))&&Math.abs(a-A)<=L*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(M-q)<=L*Math.max(1,Math.abs(M),Math.abs(q))&&Math.abs(d-k)<=L*Math.max(1,Math.abs(d),Math.abs(k))&&Math.abs(w-_)<=L*Math.max(1,Math.abs(w),Math.abs(_))&&Math.abs(m-V)<=L*Math.max(1,Math.abs(m),Math.abs(V))&&Math.abs(p-Z)<=L*Math.max(1,Math.abs(p),Math.abs(Z))&&Math.abs(x-N)<=L*Math.max(1,Math.abs(x),Math.abs(N))}const Pe=Cn,Te=In,De=Object.freeze(Object.defineProperty({__proto__:null,add:qe,adjoint:Jt,clone:Zt,copy:Qt,create:Wt,determinant:ut,equals:ke,exactEquals:Fe,frob:Ae,fromQuat:xe,fromQuat2:de,fromRotation:le,fromRotationTranslation:Vn,fromRotationTranslationScale:we,fromRotationTranslationScaleOrigin:ye,fromScaling:oe,fromTranslation:ie,fromValues:Gt,fromXRotation:he,fromYRotation:fe,fromZRotation:ae,frustum:ve,getRotation:me,getScaling:pe,getTranslation:Me,identity:Rn,invert:Kt,lookAt:_e,mul:Pe,multiply:Cn,multiplyScalar:Ee,multiplyScalarAndAdd:Se,ortho:ze,perspective:ge,perspectiveFromFieldOfView:$e,rotate:ee,rotateX:se,rotateY:ce,rotateZ:re,scale:te,set:Ht,str:be,sub:Te,subtract:In,targetTo:Le,translate:ne,transpose:Bt},Symbol.toStringTag,{value:"Module"}));function _n(){const n=new D(3);return D!==Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function je(n){const t=new D(3);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function Nn(n){const t=n[0],e=n[1],s=n[2];return Math.sqrt(t*t+e*e+s*s)}function tn(n,t,e){const s=new D(3);return s[0]=n,s[1]=t,s[2]=e,s}function Oe(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}function Re(n,t,e,s){return n[0]=t,n[1]=e,n[2]=s,n}function Ce(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n}function Un(n,t,e){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n}function Xn(n,t,e){return n[0]=t[0]*e[0],n[1]=t[1]*e[1],n[2]=t[2]*e[2],n}function Yn(n,t,e){return n[0]=t[0]/e[0],n[1]=t[1]/e[1],n[2]=t[2]/e[2],n}function Ve(n,t){return n[0]=Math.ceil(t[0]),n[1]=Math.ceil(t[1]),n[2]=Math.ceil(t[2]),n}function Ie(n,t){return n[0]=Math.floor(t[0]),n[1]=Math.floor(t[1]),n[2]=Math.floor(t[2]),n}function Ne(n,t,e){return n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.min(t[2],e[2]),n}function Ue(n,t,e){return n[0]=Math.max(t[0],e[0]),n[1]=Math.max(t[1],e[1]),n[2]=Math.max(t[2],e[2]),n}function Xe(n,t){return n[0]=Math.round(t[0]),n[1]=Math.round(t[1]),n[2]=Math.round(t[2]),n}function Ye(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n}function We(n,t,e,s){return n[0]=t[0]+e[0]*s,n[1]=t[1]+e[1]*s,n[2]=t[2]+e[2]*s,n}function Wn(n,t){const e=t[0]-n[0],s=t[1]-n[1],c=t[2]-n[2];return Math.sqrt(e*e+s*s+c*c)}function Zn(n,t){const e=t[0]-n[0],s=t[1]-n[1],c=t[2]-n[2];return e*e+s*s+c*c}function Qn(n){const t=n[0],e=n[1],s=n[2];return t*t+e*e+s*s}function Ze(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n}function Qe(n,t){return n[0]=1/t[0],n[1]=1/t[1],n[2]=1/t[2],n}function wn(n,t){const e=t[0],s=t[1],c=t[2];let r=e*e+s*s+c*c;return r>0&&(r=1/Math.sqrt(r),n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r),n}function Ln(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function Mn(n,t,e){const s=t[0],c=t[1],r=t[2],o=e[0],i=e[1],l=e[2];return n[0]=c*l-r*i,n[1]=r*o-s*l,n[2]=s*i-c*o,n}function Ge(n,t,e,s){const c=t[0],r=t[1],o=t[2];return n[0]=c+s*(e[0]-c),n[1]=r+s*(e[1]-r),n[2]=o+s*(e[2]-o),n}function He(n,t,e,s,c,r){const o=r*r,i=o*(2*r-3)+1,l=o*(r-2)+r,h=o*(r-1),f=o*(3-2*r);return n[0]=t[0]*i+e[0]*l+s[0]*h+c[0]*f,n[1]=t[1]*i+e[1]*l+s[1]*h+c[1]*f,n[2]=t[2]*i+e[2]*l+s[2]*h+c[2]*f,n}function Be(n,t,e,s,c,r){const o=1-r,i=o*o,l=r*r,h=i*o,f=3*r*i,a=3*l*o,M=l*r;return n[0]=t[0]*h+e[0]*f+s[0]*a+c[0]*M,n[1]=t[1]*h+e[1]*f+s[1]*a+c[1]*M,n[2]=t[2]*h+e[2]*f+s[2]*a+c[2]*M,n}function Ke(n,t){t=t||1;const e=nn()*2*Math.PI,s=nn()*2-1,c=Math.sqrt(1-s*s)*t;return n[0]=Math.cos(e)*c,n[1]=Math.sin(e)*c,n[2]=s*t,n}function Je(n,t,e){const s=t[0],c=t[1],r=t[2];let o=e[3]*s+e[7]*c+e[11]*r+e[15];return o=o||1,n[0]=(e[0]*s+e[4]*c+e[8]*r+e[12])/o,n[1]=(e[1]*s+e[5]*c+e[9]*r+e[13])/o,n[2]=(e[2]*s+e[6]*c+e[10]*r+e[14])/o,n}function ue(n,t,e){const s=t[0],c=t[1],r=t[2];return n[0]=s*e[0]+c*e[3]+r*e[6],n[1]=s*e[1]+c*e[4]+r*e[7],n[2]=s*e[2]+c*e[5]+r*e[8],n}function ns(n,t,e){const s=e[0],c=e[1],r=e[2],o=e[3],i=t[0],l=t[1],h=t[2];let f=c*h-r*l,a=r*i-s*h,M=s*l-c*i,d=c*M-r*a,w=r*f-s*M,m=s*a-c*f;const p=o*2;return f*=p,a*=p,M*=p,d*=2,w*=2,m*=2,n[0]=i+f+d,n[1]=l+a+w,n[2]=h+M+m,n}function ts(n,t,e,s){const c=[],r=[];return c[0]=t[0]-e[0],c[1]=t[1]-e[1],c[2]=t[2]-e[2],r[0]=c[0],r[1]=c[1]*Math.cos(s)-c[2]*Math.sin(s),r[2]=c[1]*Math.sin(s)+c[2]*Math.cos(s),n[0]=r[0]+e[0],n[1]=r[1]+e[1],n[2]=r[2]+e[2],n}function es(n,t,e,s){const c=[],r=[];return c[0]=t[0]-e[0],c[1]=t[1]-e[1],c[2]=t[2]-e[2],r[0]=c[2]*Math.sin(s)+c[0]*Math.cos(s),r[1]=c[1],r[2]=c[2]*Math.cos(s)-c[0]*Math.sin(s),n[0]=r[0]+e[0],n[1]=r[1]+e[1],n[2]=r[2]+e[2],n}function ss(n,t,e,s){const c=[],r=[];return c[0]=t[0]-e[0],c[1]=t[1]-e[1],c[2]=t[2]-e[2],r[0]=c[0]*Math.cos(s)-c[1]*Math.sin(s),r[1]=c[0]*Math.sin(s)+c[1]*Math.cos(s),r[2]=c[2],n[0]=r[0]+e[0],n[1]=r[1]+e[1],n[2]=r[2]+e[2],n}function cs(n,t){const e=tn(n[0],n[1],n[2]),s=tn(t[0],t[1],t[2]);wn(e,e),wn(s,s);const c=Ln(e,s);return c>1?0:c<-1?Math.PI:Math.acos(c)}function rs(n){return`vec3(${n[0]}, ${n[1]}, ${n[2]})`}function is(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]}function os(n,t){const e=n[0],s=n[1],c=n[2],r=t[0],o=t[1],i=t[2];return Math.abs(e-r)<=L*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(s-o)<=L*Math.max(1,Math.abs(s),Math.abs(o))&&Math.abs(c-i)<=L*Math.max(1,Math.abs(c),Math.abs(i))}const ls=Un,hs=Xn,fs=Yn,as=Wn,ds=Zn,Gn=Nn,Ms=Qn,ps=function(){const n=_n();return function(t,e,s,c,r,o){let i,l;for(e||(e=3),s||(s=0),c?l=Math.min(c*e+s,t.length):l=t.length,i=s;i<l;i+=e)n[0]=t[i],n[1]=t[i+1],n[2]=t[i+2],r(n,n,o),t[i]=n[0],t[i+1]=n[1],t[i+2]=n[2];return t}}(),ms=Object.freeze(Object.defineProperty({__proto__:null,add:Ce,angle:cs,bezier:Be,ceil:Ve,clone:je,copy:Oe,create:_n,cross:Mn,dist:as,distance:Wn,div:fs,divide:Yn,dot:Ln,equals:os,exactEquals:is,floor:Ie,forEach:ps,fromValues:tn,hermite:He,inverse:Qe,len:Gn,length:Nn,lerp:Ge,max:Ue,min:Ne,mul:hs,multiply:Xn,negate:Ze,normalize:wn,random:Ke,rotateX:ts,rotateY:es,rotateZ:ss,round:Xe,scale:Ye,scaleAndAdd:We,set:Re,sqrDist:ds,sqrLen:Ms,squaredDistance:Zn,squaredLength:Qn,str:rs,sub:ls,subtract:Un,transformMat3:ue,transformMat4:Je,transformQuat:ns},Symbol.toStringTag,{value:"Module"}));function ws(){const n=new D(4);return D!==Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0),n}function ys(n){const t=new D(4);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function xs(n,t,e,s){const c=new D(4);return c[0]=n,c[1]=t,c[2]=e,c[3]=s,c}function vs(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function gs(n,t,e,s,c){return n[0]=t,n[1]=e,n[2]=s,n[3]=c,n}function $s(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3],n}function zs(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n}function _s(n){const t=n[0],e=n[1],s=n[2],c=n[3];return Math.sqrt(t*t+e*e+s*s+c*c)}function Ls(n){const t=n[0],e=n[1],s=n[2],c=n[3];return t*t+e*e+s*s+c*c}function bs(n,t){const e=t[0],s=t[1],c=t[2],r=t[3];let o=e*e+s*s+c*c+r*r;return o>0&&(o=1/Math.sqrt(o),n[0]=e*o,n[1]=s*o,n[2]=c*o,n[3]=r*o),n}function As(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function qs(n,t,e,s){const c=t[0],r=t[1],o=t[2],i=t[3];return n[0]=c+s*(e[0]-c),n[1]=r+s*(e[1]-r),n[2]=o+s*(e[2]-o),n[3]=i+s*(e[3]-i),n}function Es(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]}function Ss(n,t){const e=n[0],s=n[1],c=n[2],r=n[3],o=t[0],i=t[1],l=t[2],h=t[3];return Math.abs(e-o)<=L*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(s-i)<=L*Math.max(1,Math.abs(s),Math.abs(i))&&Math.abs(c-l)<=L*Math.max(1,Math.abs(c),Math.abs(l))&&Math.abs(r-h)<=L*Math.max(1,Math.abs(r),Math.abs(h))}(function(){const n=ws();return function(t,e,s,c,r,o){let i,l;for(e||(e=4),s||(s=0),c?l=Math.min(c*e+s,t.length):l=t.length,i=s;i<l;i+=e)n[0]=t[i],n[1]=t[i+1],n[2]=t[i+2],n[3]=t[i+3],r(n,n,o),t[i]=n[0],t[i+1]=n[1],t[i+2]=n[2],t[i+3]=n[3];return t}})();function $n(){const n=new D(4);return D!==Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function Fs(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n}function Hn(n,t,e){e=e*.5;const s=Math.sin(e);return n[0]=s*t[0],n[1]=s*t[1],n[2]=s*t[2],n[3]=Math.cos(e),n}function ks(n,t){const e=Math.acos(t[3])*2,s=Math.sin(e/2);return s>L?(n[0]=t[0]/s,n[1]=t[1]/s,n[2]=t[2]/s):(n[0]=1,n[1]=0,n[2]=0),e}function Bn(n,t,e){const s=t[0],c=t[1],r=t[2],o=t[3],i=e[0],l=e[1],h=e[2],f=e[3];return n[0]=s*f+o*i+c*h-r*l,n[1]=c*f+o*l+r*i-s*h,n[2]=r*f+o*h+s*l-c*i,n[3]=o*f-s*i-c*l-r*h,n}function Ps(n,t,e){e*=.5;const s=t[0],c=t[1],r=t[2],o=t[3],i=Math.sin(e),l=Math.cos(e);return n[0]=s*l+o*i,n[1]=c*l+r*i,n[2]=r*l-c*i,n[3]=o*l-s*i,n}function Ts(n,t,e){e*=.5;const s=t[0],c=t[1],r=t[2],o=t[3],i=Math.sin(e),l=Math.cos(e);return n[0]=s*l-r*i,n[1]=c*l+o*i,n[2]=r*l+s*i,n[3]=o*l-c*i,n}function Ds(n,t,e){e*=.5;const s=t[0],c=t[1],r=t[2],o=t[3],i=Math.sin(e),l=Math.cos(e);return n[0]=s*l+c*i,n[1]=c*l-s*i,n[2]=r*l+o*i,n[3]=o*l-r*i,n}function js(n,t){const e=t[0],s=t[1],c=t[2];return n[0]=e,n[1]=s,n[2]=c,n[3]=Math.sqrt(Math.abs(1-e*e-s*s-c*c)),n}function pn(n,t,e,s){const c=t[0],r=t[1],o=t[2],i=t[3];let l=e[0],h=e[1],f=e[2],a=e[3],M,d,w,m,p;return d=c*l+r*h+o*f+i*a,d<0&&(d=-d,l=-l,h=-h,f=-f,a=-a),1-d>L?(M=Math.acos(d),w=Math.sin(M),m=Math.sin((1-s)*M)/w,p=Math.sin(s*M)/w):(m=1-s,p=s),n[0]=m*c+p*l,n[1]=m*r+p*h,n[2]=m*o+p*f,n[3]=m*i+p*a,n}function Os(n){const t=nn(),e=nn(),s=nn(),c=Math.sqrt(1-t),r=Math.sqrt(t);return n[0]=c*Math.sin(2*Math.PI*e),n[1]=c*Math.cos(2*Math.PI*e),n[2]=r*Math.sin(2*Math.PI*s),n[3]=r*Math.cos(2*Math.PI*s),n}function Rs(n,t){const e=t[0],s=t[1],c=t[2],r=t[3],o=e*e+s*s+c*c+r*r,i=o?1/o:0;return n[0]=-e*i,n[1]=-s*i,n[2]=-c*i,n[3]=r*i,n}function Cs(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=t[3],n}function Kn(n,t){const e=t[0]+t[4]+t[8];let s;if(e>0)s=Math.sqrt(e+1),n[3]=.5*s,s=.5/s,n[0]=(t[5]-t[7])*s,n[1]=(t[6]-t[2])*s,n[2]=(t[1]-t[3])*s;else{let c=0;t[4]>t[0]&&(c=1),t[8]>t[c*3+c]&&(c=2);const r=(c+1)%3,o=(c+2)%3;s=Math.sqrt(t[c*3+c]-t[r*3+r]-t[o*3+o]+1),n[c]=.5*s,s=.5/s,n[3]=(t[r*3+o]-t[o*3+r])*s,n[r]=(t[r*3+c]+t[c*3+r])*s,n[o]=(t[o*3+c]+t[c*3+o])*s}return n}function Vs(n,t,e,s){const c=.5*Math.PI/180;t*=c,e*=c,s*=c;const r=Math.sin(t),o=Math.cos(t),i=Math.sin(e),l=Math.cos(e),h=Math.sin(s),f=Math.cos(s);return n[0]=r*l*f-o*i*h,n[1]=o*i*f+r*l*h,n[2]=o*l*h-r*i*f,n[3]=o*l*f+r*i*h,n}function Is(n){return`quat(${n[0]}, ${n[1]}, ${n[2]}, ${n[3]})`}const Ns=ys,Us=xs,Xs=vs,Ys=gs,Ws=$s,Zs=Bn,Qs=zs,Gs=As,Hs=qs,Jn=_s,Bs=Jn,un=Ls,Ks=un,bn=bs,Js=Es,us=Ss,n1=function(){const n=_n(),t=tn(1,0,0),e=tn(0,1,0);return function(s,c,r){const o=Ln(c,r);return o<-.999999?(Mn(n,t,c),Gn(n)<1e-6&&Mn(n,e,c),wn(n,n),Hn(s,n,Math.PI),s):o>.999999?(s[0]=0,s[1]=0,s[2]=0,s[3]=1,s):(Mn(n,c,r),s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=1+o,bn(s,s))}}(),t1=function(){const n=$n(),t=$n();return function(e,s,c,r,o,i){return pn(n,s,o,i),pn(t,c,r,i),pn(e,n,t,2*i*(1-i)),e}}(),e1=function(){const n=Dn();return function(t,e,s,c){return n[0]=s[0],n[3]=s[1],n[6]=s[2],n[1]=c[0],n[4]=c[1],n[7]=c[2],n[2]=-e[0],n[5]=-e[1],n[8]=-e[2],bn(t,Kn(t,n))}}(),s1=Object.freeze(Object.defineProperty({__proto__:null,add:Ws,calculateW:js,clone:Ns,conjugate:Cs,copy:Xs,create:$n,dot:Gs,equals:us,exactEquals:Js,fromEuler:Vs,fromMat3:Kn,fromValues:Us,getAxisAngle:ks,identity:Fs,invert:Rs,len:Bs,length:Jn,lerp:Hs,mul:Zs,multiply:Bn,normalize:bn,random:Os,rotateX:Ps,rotateY:Ts,rotateZ:Ds,rotationTo:n1,scale:Qs,set:Ys,setAxes:e1,setAxisAngle:Hn,slerp:pn,sqlerp:t1,sqrLen:Ks,squaredLength:un,str:Is},Symbol.toStringTag,{value:"Module"}));function c1(){const n=new D(2);return D!==Float32Array&&(n[0]=0,n[1]=0),n}(function(){const n=c1();return function(t,e,s,c,r,o){let i,l;for(e||(e=2),s||(s=0),c?l=Math.min(c*e+s,t.length):l=t.length,i=s;i<l;i+=e)n[0]=t[i],n[1]=t[i+1],r(n,n,o),t[i]=n[0],t[i+1]=n[1];return t}})();const J=ms,r1=Yt,mn=De,G=s1,C=new Float32Array(16),H=new Float32Array(16);function nt(n,t,e){this.rotation=n,this.center=t,this.distance=e}const cn=nt.prototype;cn.view=function(n){return n||(n=mn.create()),H[0]=H[1]=0,H[2]=-this.distance,mn.fromRotationTranslation(n,G.conjugate(C,this.rotation),H),mn.translate(n,n,J.negate(C,this.center)),n};cn.lookAt=function(n,t,e){mn.lookAt(C,n,t,e),r1.fromMat4(C,C),G.fromMat3(this.rotation,C),J.copy(this.center,t),this.distance=J.distance(n,t)};cn.pan=function(n){const t=this.distance;C[0]=-t*(n[0]||0),C[1]=t*(n[1]||0),C[2]=t*(n[2]||0),J.transformQuat(C,C,this.rotation),J.add(this.center,this.center,C)};cn.zoom=function(n){this.distance+=n,this.distance<0&&(this.distance=0)};function Fn(n,t){const e=t[0],s=t[1];let c=e*e+s*s;c>1&&(c=1),n[0]=-t[0],n[1]=t[1],n[2]=t[2]||Math.sqrt(1-c),n[3]=0}cn.rotate=function(n,t){Fn(C,n),Fn(H,t),G.invert(H,H),G.multiply(C,C,H),!(G.length(C)<1e-6)&&(G.multiply(this.rotation,this.rotation,C),G.normalize(this.rotation,this.rotation))};function i1(n,t,e){n=n||[0,0,-1],t=t||[0,0,0],e=e||[0,1,0];const s=new nt(G.create(),J.create(),1);return s.lookAt(n,t,e),s}const An=typeof window<"u"?window.navigator.userAgent:"",xn=/OS X/.test(An),tt=/Opera/.test(An),o1=!/like Gecko/.test(An)&&!tt;let P;const W={0:xn?"<menu>":"<UNK>",1:"<mouse 1>",2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",21:"<ime-hangul>",23:"<ime-junja>",24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",31:"<ime-mode-change>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",40:"<down>",41:"<select>",42:"<print>",43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",92:"<meta>",93:xn?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num-->",110:"<num-.>",111:"<num-/>",144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",164:"<alt-left>",165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",170:"<browser-search>",171:"<browser-favorites>",172:"<browser-home>",173:xn&&o1?"-":"<volume-mute>",174:"<volume-down>",175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",182:"<launch-app 1>",183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"<meta>",224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:tt?"`":"<unicode>",246:"<attention>",247:"<crsel>",248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(P=58;P<65;++P)W[P]=String.fromCharCode(P);for(P=48;P<58;++P)W[P]=`${P-48}`;for(P=65;P<91;++P)W[P]=String.fromCharCode(P);for(P=96;P<106;++P)W[P]=`<num-${P-96}>`;for(P=112;P<136;++P)W[P]=`F${P-111}`;const l1=Object.keys(W),en={};et();window.addEventListener("keydown",f1,!1);window.addEventListener("keyup",h1,!1);window.addEventListener("blur",et,!1);function vn(n){return n?en[n]:en}function et(){l1.forEach(function(n){en[W[n]]=!1})}function h1(n){en[W[n.keyCode]]=!1}function f1(n){en[W[n.keyCode]]=!0}function j(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}j.EventEmitter=j;j.prototype._events=void 0;j.prototype._maxListeners=void 0;j.defaultMaxListeners=10;j.prototype.setMaxListeners=function(n){if(!a1(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this};j.prototype.emit=function(n){let t,e,s,c,r;if(this._events||(this._events={}),n==="error"&&(!this._events.error||sn(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;{const i=new Error(`Uncaught, unspecified "error" event. (${t})`);throw i.context=t,i}}const o=this._events[n];if(st(o))return!1;if(Y(o))switch(arguments.length){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),o.apply(this,s)}else if(sn(o))for(s=Array.prototype.slice.call(arguments,1),r=o.slice(),e=r.length,c=0;c<e;c++)r[c].apply(this,s);return!0};j.prototype.addListener=function(n,t){let e;if(!Y(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",n,Y(t.listener)?t.listener:t),this._events[n]?sn(this._events[n])?this._events[n].push(t):this._events[n]=[this._events[n],t]:this._events[n]=t,sn(this._events[n])&&!this._events[n].warned&&(st(this._maxListeners)?e=j.defaultMaxListeners:e=this._maxListeners,e&&e>0&&this._events[n].length>e&&(this._events[n].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[n].length),typeof console.trace=="function"&&console.trace())),this};j.prototype.on=j.prototype.addListener;j.prototype.once=function(n,t){if(!Y(t))throw TypeError("listener must be a function");let e=!1;function s(){this.removeListener(n,s),e||(e=!0,t.apply(this,arguments))}return s.listener=t,this.on(n,s),this};j.prototype.removeListener=function(n,t){let e,s;if(!Y(t))throw TypeError("listener must be a function");if(!this._events||!this._events[n])return this;const c=this._events[n],r=c.length;if(e=-1,c===t||Y(c.listener)&&c.listener===t)delete this._events[n],this._events.removeListener&&this.emit("removeListener",n,t);else if(sn(c)){for(s=r;s-- >0;)if(c[s]===t||c[s].listener&&c[s].listener===t){e=s;break}if(e<0)return this;c.length===1?(c.length=0,delete this._events[n]):c.splice(e,1),this._events.removeListener&&this.emit("removeListener",n,t)}return this};j.prototype.removeAllListeners=function(n){let t;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[n]&&delete this._events[n],this;if(arguments.length===0){for(t in this._events)t!=="removeListener"&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}const e=this._events[n];if(Y(e))this.removeListener(n,e);else if(e)for(;e.length;)this.removeListener(n,e[e.length-1]);return delete this._events[n],this};j.prototype.listeners=function(n){let t;return!this._events||!this._events[n]?t=[]:Y(this._events[n])?t=[this._events[n]]:t=this._events[n].slice(),t};j.prototype.listenerCount=function(n){if(this._events){const t=this._events[n];if(Y(t))return 1;if(t)return t.length}return 0};j.listenerCount=function(n,t){return n.listenerCount(t)};function Y(n){return typeof n=="function"}function a1(n){return typeof n=="number"}function sn(n){return typeof n=="object"&&n!==null}function st(n){return n===void 0}function d1(n,t){const e=new j;if(e[0]=0,e[1]=0,e.prev=[0,0],e.flush=c,e.dispose=r,typeof window>"u")return e;t=t||n||window,n=n||document.body;const s=n===document.body||n===window?function(o){e.prev[0]=e[0],e.prev[1]=e[1],e[0]=o.clientX,e[1]=o.clientY,e.emit("move",o)}:function(o){e.prev[0]=e[0],e.prev[1]=e[1];const i=n.getBoundingClientRect();e[0]=o.clientX-i.left,e[1]=o.clientY-i.top,e.emit("move",o)};return t.addEventListener("mousemove",s,!1),e;function c(){e.prev[0]=e[0],e.prev[1]=e[1]}function r(){e.removeAllListeners("move"),t.removeEventListener("mousemove",s)}}const kn=["left","middle","right"];function M1(n,t){const e=new j;return e.left=!1,e.right=!1,e.middle=!1,e.dispose=o,typeof window<"u"&&(n=n||window,n.addEventListener("mousedown",s,!1),window.addEventListener("mouseup",c,!1),t&&n.addEventListener("contextmenu",r,!1)),e;function s(i){if(e.right=!1,e[kn[i.button]]=!0,e.emit("down",i),!!t){if(!i.preventDefault)return!1;i.preventDefault(),i.stopPropagation()}}function c(i){e.right=!1,e[kn[i.button]]=!1,e.emit("up",i),t&&i.preventDefault&&(i.preventDefault(),i.stopPropagation())}function r(i){return i.preventDefault&&i.preventDefault()&&!1}function o(){e.left=!1,e.right=!1,e.middle=!1,n&&(n.removeEventListener("contextmenu",r,!1),n.removeEventListener("mousedown",s,!1),window.removeEventListener("mouseup",c,!1))}}let ct="",zn;window.addEventListener?zn="addEventListener":(zn="attachEvent",ct="on");const yn="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll";function p1(n,t,e){Pn(n,yn,t,e),yn==="DOMMouseScroll"&&Pn(n,"MozMousePixelScroll",t,e)}function Pn(n,t,e,s){n[zn](ct+t,yn==="wheel"?e:function(c){!c&&(c=window.event);const r={deltaY:0,originalEvent:c,target:c.target||c.srcElement,type:"wheel",deltaMode:c.type==="MozMousePixelScroll"?0:1,deltaX:0,delatZ:0,preventDefault(){c.preventDefault?c.preventDefault():c.returnValue=!1}};return yn==="mousewheel"?(r.deltaY=-1/40*c.wheelDelta,c.wheelDeltaX&&(r.deltaX=-1/40*c.wheelDeltaX)):r.deltaY=c.detail,e(r)},s||!1)}function m1(n,t){const e=new j;if(e.flush=s,s(),typeof window>"u")return e;return n=n||window,p1(n,c,!1),e;function s(){e[0]=e[1]=e[2]=0}function c(r){const o=r.deltaMode===1?12:1;e[0]+=o*(r.deltaX||0),e[1]+=o*(r.deltaY||0),e[2]+=o*(r.deltaZ||0),e.emit("scroll",e),t&&r.preventDefault&&(r.preventDefault(),r.stopPropagation&&r.stopPropagation())}}const Tn=1;function w1(n,t){t=t||{},t.pan=t.pan!==!1,t.scale=t.scale!==!1,t.rotate=t.rotate!==!1;const e=m1(n,t.scale),s=M1(n,t.rotate),c=d1(n),r=i1([0,10,30],[0,0,0],[0,1,0]);return r.tick=o,r;function o(){const i=vn("<control>")||vn("<alt>"),l=vn("<shift>"),h=n.height,f=n.width;if(t.rotate&&s.left&&!i&&!l&&r.rotate([c[0]/f-.5,c[1]/h-.5],[c.prev[0]/f-.5,c.prev[1]/h-.5]),(t.pan&&s.right||s.left&&i&&!l)&&r.pan([Tn*(c[0]-c.prev[0])/f,Tn*(c[1]-c.prev[1])/h]),t.scale&&e[1]&&(r.distance*=Math.exp(e[1]/h)),t.scale&&(s.middle||s.left&&!i&&l)){const a=c.y-c.prevY;if(!a)return;r.distance*=Math.exp(a/h)}e.flush(),c.flush()}}function y1(){const n=new Float32Array(3);return n[0]=0,n[1]=0,n[2]=0,n}function fn(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n}function an(n,t,e){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n}function x1(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n}function dn(n,t,e,s){return n[0]=t[0]+e[0]*s,n[1]=t[1]+e[1]*s,n[2]=t[2]+e[2]*s,n}function v1(n,t){const e=t[0]-n[0],s=t[1]-n[1],c=t[2]-n[2];return Math.sqrt(e*e+s*s+c*c)}function g1(n){const t=n[0],e=n[1],s=n[2];return Math.sqrt(t*t+e*e+s*s)}function gn(n,t){const e=t[0],s=t[1],c=t[2];let r=e*e+s*s+c*c;return r>0&&(r=1/Math.sqrt(r),n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r),n}function $1(n,t,e){const s=t[0],c=t[1],r=t[2],o=e[0],i=e[1],l=e[2];return n[0]=c*l-r*i,n[1]=r*o-s*l,n[2]=s*i-c*o,n}y1();(async()=>{const n=document.createElement("canvas");n.id="glcanvas",n.width=window.innerWidth,n.height=window.innerHeight,document.body.appendChild(n);const t=new ft({canvasId:"glcanvas"}),e=w1(n);window.addEventListener("resize",pt(n),!1),e.view(at([],[0,3,30],[0,0,-5.5],[0,1,0])),e.rotate([0,0],[3.14*.15,0]);const s=[],c=[],r=[],o=[],i=[],l=[];class h{constructor(R,T){ln(this,"i0");ln(this,"i1");ln(this,"restLength");this.i0=R,this.i1=T,this.restLength=v1(r[R],r[T])}}const f=5.5,a=-f,M=Number(f),d=-f,w=Number(f),m=20;let p,x;for(p=0;p<=m;++p){const O=p/m*(w-d)+d,R=p/m;for(x=0;x<=m;++x){const T=x/m*(M-a)+a,qn=x/m;r.push([T,0,O]),o.push([T,0,O]),s.push([qn,R])}}let y,v,g,$,z;for(y=0;y<r.length;++y)i.push([0,0,0]);for(p=0;p<=m-1;++p)for(x=0;x<=m-1;++x)y=p*(m+1)+x,v=y+0,g=y+1,$=y+(m+1)+0,z=y+(m+1)+1,c.push([z,g,v]),c.push([v,$,z]);for(p=0;p<=m;++p)for(x=0;x<=m;++x)y=p*(m+1)+x,v=y+0,g=y+1,$=y+(m+1)+0,z=y+(m+1)+1,x<m&&l.push(new h(v,g)),p<m&&l.push(new h(v,$)),x<m&&p<m&&l.push(new h(v,z));const F=r.reduce((O,R)=>(R.forEach(T=>{O.push(T)}),O),[]),E=s.reduce((O,R)=>(R.forEach(T=>{O.push(T)}),O),[]),S=i.reduce((O,R)=>(R.forEach(T=>{O.push(T)}),O),[]),b=c.reduce((O,R)=>(R.forEach(T=>{O.push(T)}),O),[]);let A=0,q=1,k=1;const _={geometry:{vertices:{position:{data:new Float32Array(F),format:"float32x3"},normal:{data:new Float32Array(S),format:"float32x3"},uv:{data:new Float32Array(E),format:"float32x2"}},indices:new Uint16Array(b),draw:{__type__:"DrawIndexed",indexCount:b.length}},bindingResources:{},pipeline:{vertex:{code:`precision mediump float;

        attribute vec3 position;
        attribute vec3 normal;
        attribute vec2 uv;
      
        varying vec2 vUv;
        varying vec3 vNormal;
      
        uniform mat4 projection, view;
      
        void main() {
          vUv = uv;
          vNormal = normal;
          gl_Position = projection * view * vec4(position, 1);
        }`},fragment:{code:`precision mediump float;

        varying vec2 vUv;
        varying vec3 vNormal;
      
        uniform sampler2D texture;
      
        void main () {
          vec3 tex = texture2D(texture, vUv*1.0).xyz;
          vec3 lightDir = normalize(vec3(0.4, 0.9, 0.3));
      
          vec3 n = vNormal;
      
          // for the back faces we need to use the opposite normals.
          if(gl_FrontFacing == false) {
            n = -n;
          }
      
          vec3 ambient = 0.3 * tex;
          vec3 diffuse = 0.7 * tex * clamp( dot(n, lightDir ), 0.0, 1.0 );
      
          gl_FragColor = vec4(ambient + diffuse, 1.0);
        }`,targets:[{blend:{}}]},depthStencil:{}}},V={commandEncoders:[{passEncoders:[{renderObjects:[_]}]}]};function Z(){let R=[],T=[];const rt=[0,-4,0],u=[Math.sin(A/2),Math.cos(A/3),Math.sin(A/1)];for(gn(u,u),x1(u,u,20.6),y=0;y<r.length;++y)an(R,r[y],o[y]),R=[R[0],R[1],R[2]],T=[r[y][0],r[y][1],r[y][2]],fn(T,T,R),dn(T,T,rt,.017*.017),dn(T,T,u,.017*.017),o[y]=[r[y][0],r[y][1],r[y][2]],r[y]=[T[0],T[1],T[2]];const on=[];let B,K;for(y=0;y<15;++y)for(let I=0;I<l.length;I++){const U=l[I];B=r[U.i0],K=r[U.i1],an(on,K,B);const Q=g1(on),X=(Q-U.restLength)/Q;dn(B,B,on,.5*X),dn(K,K,on,-.5*X)}for(y=0;y<=m;++y)r[y]=[o[y][0],o[y][1],o[y][2]];for(y=0;y<i.length;y++)i[y]=[0,0,0];for(y=0;y<c.length;y++){v=c[y][0],g=c[y][1],$=c[y][2];const I=r[v],U=r[g],Q=r[$];B=[0,0,0],an(B,I,U),K=[0,0,0],an(K,I,Q);const X=[0,0,0];$1(X,B,K),gn(X,X),fn(i[v],i[v],X),fn(i[g],i[g],X),fn(i[$],i[$],X)}for(y=0;y<i.length;y++)gn(i[y],i[y]);const it=r.reduce((I,U)=>(U.forEach(Q=>{I.push(Q)}),I),[]),ot=i.reduce((I,U)=>(U.forEach(Q=>{I.push(Q)}),I),[]);En(_.geometry.vertices.position.data).data=new Float32Array(it),En(_.geometry.vertices.normal.data).data=new Float32Array(ot),A++,q=n.width=n.clientWidth,k=n.height=n.clientHeight,e.tick(),_.bindingResources.view=e.view(),_.bindingResources.projection=dt([],Math.PI/4,q/k,.01,1e3),t.submit(V),requestAnimationFrame(Z)}const N=new Image;N.src="../../assets/cloth.png",await N.decode();const rn={texture:{size:[N.width,N.height],generateMipmap:!0,sources:[{image:N}]},sampler:{minFilter:"linear",mipmapFilter:"linear",addressModeU:"repeat",addressModeV:"repeat"}};_.bindingResources.texture=rn,Z()})();
//# sourceMappingURL=cloth.html-4febb0df.js.map
