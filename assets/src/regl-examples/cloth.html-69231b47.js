var ht=Object.defineProperty;var ft=(n,t,s)=>t in n?ht(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s;var hn=(n,t,s)=>(ft(n,typeof t!="symbol"?t+"":t,s),s);import"../../modulepreload-polyfill-3cfb730f.js";import{W as at,g as Sn}from"../../WebGL-b4686ab5.js";import{l as dt,p as Mt}from"../../gl-mat4-3d6487f1.js";import{r as nn}from"../../index-ac627bb5.js";function pt(n){if(n===window||n===document.body)return[window.innerWidth,window.innerHeight];let t=!1;n.parentNode||(t=!0,document.body.appendChild(n));const s=n.getBoundingClientRect(),e=getComputedStyle(n),c=(s.height|0)+fn(e.getPropertyValue("margin-top"))+fn(e.getPropertyValue("margin-bottom")),r=(s.width|0)+fn(e.getPropertyValue("margin-left"))+fn(e.getPropertyValue("margin-right"));return t&&document.body.removeChild(n),[r,c]}function fn(n){return parseFloat(n)||0}const Fn=new Float32Array(2);function mt(n,t,s){const e=n.nodeName.toUpperCase()==="SVG";return n.style.position=n.style.position||"absolute",n.style.top=0,n.style.left=0,c.scale=parseFloat(s||1),c.parent=t,c();function c(){const r=c.parent||n.parentNode;let o,i;if(typeof r=="function"){const l=r(Fn)||Fn;o=l[0],i=l[1]}else if(r&&r!==document.body){const l=pt(r);o=l[0]|0,i=l[1]|0}else o=window.innerWidth,i=window.innerHeight;return e?(n.setAttribute("width",`${o*c.scale}px`),n.setAttribute("height",`${i*c.scale}px`)):(n.width=o*c.scale,n.height=i*c.scale),n.style.width=`${o}px`,n.style.height=`${i}px`,c}}const L=1e-6;let D=typeof Float32Array<"u"?Float32Array:Array;const tn=Math.random;function jn(){const n=new D(9);return D!==Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1,n}function wt(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[4],n[4]=t[5],n[5]=t[6],n[6]=t[8],n[7]=t[9],n[8]=t[10],n}function yt(n){const t=new D(9);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t}function xt(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n}function vt(n,t,s,e,c,r,o,i,l){const h=new D(9);return h[0]=n,h[1]=t,h[2]=s,h[3]=e,h[4]=c,h[5]=r,h[6]=o,h[7]=i,h[8]=l,h}function gt(n,t,s,e,c,r,o,i,l,h){return n[0]=t,n[1]=s,n[2]=e,n[3]=c,n[4]=r,n[5]=o,n[6]=i,n[7]=l,n[8]=h,n}function $t(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n}function zt(n,t){if(n===t){const s=t[1],e=t[2],c=t[5];n[1]=t[3],n[2]=t[6],n[3]=s,n[5]=t[7],n[6]=e,n[7]=c}else n[0]=t[0],n[1]=t[3],n[2]=t[6],n[3]=t[1],n[4]=t[4],n[5]=t[7],n[6]=t[2],n[7]=t[5],n[8]=t[8];return n}function _t(n,t){const s=t[0],e=t[1],c=t[2],r=t[3],o=t[4],i=t[5],l=t[6],h=t[7],f=t[8],a=f*o-i*h,M=-f*r+i*l,d=h*r-o*l;let w=s*a+e*M+c*d;return w?(w=1/w,n[0]=a*w,n[1]=(-f*e+c*h)*w,n[2]=(i*e-c*o)*w,n[3]=M*w,n[4]=(f*s-c*l)*w,n[5]=(-i*s+c*r)*w,n[6]=d*w,n[7]=(-h*s+e*l)*w,n[8]=(o*s-e*r)*w,n):null}function Lt(n,t){const s=t[0],e=t[1],c=t[2],r=t[3],o=t[4],i=t[5],l=t[6],h=t[7],f=t[8];return n[0]=o*f-i*h,n[1]=c*h-e*f,n[2]=e*i-c*o,n[3]=i*l-r*f,n[4]=s*f-c*l,n[5]=c*r-s*i,n[6]=r*h-o*l,n[7]=e*l-s*h,n[8]=s*o-e*r,n}function bt(n){const t=n[0],s=n[1],e=n[2],c=n[3],r=n[4],o=n[5],i=n[6],l=n[7],h=n[8];return t*(h*r-o*l)+s*(-h*c+o*i)+e*(l*c-r*i)}function On(n,t,s){const e=t[0],c=t[1],r=t[2],o=t[3],i=t[4],l=t[5],h=t[6],f=t[7],a=t[8],M=s[0],d=s[1],w=s[2],m=s[3],p=s[4],x=s[5],y=s[6],v=s[7],g=s[8];return n[0]=M*e+d*o+w*h,n[1]=M*c+d*i+w*f,n[2]=M*r+d*l+w*a,n[3]=m*e+p*o+x*h,n[4]=m*c+p*i+x*f,n[5]=m*r+p*l+x*a,n[6]=y*e+v*o+g*h,n[7]=y*c+v*i+g*f,n[8]=y*r+v*l+g*a,n}function At(n,t,s){const e=t[0],c=t[1],r=t[2],o=t[3],i=t[4],l=t[5],h=t[6],f=t[7],a=t[8],M=s[0],d=s[1];return n[0]=e,n[1]=c,n[2]=r,n[3]=o,n[4]=i,n[5]=l,n[6]=M*e+d*o+h,n[7]=M*c+d*i+f,n[8]=M*r+d*l+a,n}function qt(n,t,s){const e=t[0],c=t[1],r=t[2],o=t[3],i=t[4],l=t[5],h=t[6],f=t[7],a=t[8],M=Math.sin(s),d=Math.cos(s);return n[0]=d*e+M*o,n[1]=d*c+M*i,n[2]=d*r+M*l,n[3]=d*o-M*e,n[4]=d*i-M*c,n[5]=d*l-M*r,n[6]=h,n[7]=f,n[8]=a,n}function Et(n,t,s){const e=s[0],c=s[1];return n[0]=e*t[0],n[1]=e*t[1],n[2]=e*t[2],n[3]=c*t[3],n[4]=c*t[4],n[5]=c*t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n}function St(n,t){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=t[0],n[7]=t[1],n[8]=1,n}function Ft(n,t){const s=Math.sin(t),e=Math.cos(t);return n[0]=e,n[1]=s,n[2]=0,n[3]=-s,n[4]=e,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n}function kt(n,t){return n[0]=t[0],n[1]=0,n[2]=0,n[3]=0,n[4]=t[1],n[5]=0,n[6]=0,n[7]=0,n[8]=1,n}function Pt(n,t){return n[0]=t[0],n[1]=t[1],n[2]=0,n[3]=t[2],n[4]=t[3],n[5]=0,n[6]=t[4],n[7]=t[5],n[8]=1,n}function Tt(n,t){const s=t[0],e=t[1],c=t[2],r=t[3],o=s+s,i=e+e,l=c+c,h=s*o,f=e*o,a=e*i,M=c*o,d=c*i,w=c*l,m=r*o,p=r*i,x=r*l;return n[0]=1-a-w,n[3]=f-x,n[6]=M+p,n[1]=f+x,n[4]=1-h-w,n[7]=d-m,n[2]=M-p,n[5]=d+m,n[8]=1-h-a,n}function Dt(n,t){const s=t[0],e=t[1],c=t[2],r=t[3],o=t[4],i=t[5],l=t[6],h=t[7],f=t[8],a=t[9],M=t[10],d=t[11],w=t[12],m=t[13],p=t[14],x=t[15],y=s*i-e*o,v=s*l-c*o,g=s*h-r*o,$=e*l-c*i,z=e*h-r*i,F=c*h-r*l,E=f*m-a*w,S=f*p-M*w,b=f*x-d*w,A=a*p-M*m,q=a*x-d*m,k=M*x-d*p;let _=y*k-v*q+g*A+$*b-z*S+F*E;return _?(_=1/_,n[0]=(i*k-l*q+h*A)*_,n[1]=(l*b-o*k-h*S)*_,n[2]=(o*q-i*b+h*E)*_,n[3]=(c*q-e*k-r*A)*_,n[4]=(s*k-c*b+r*S)*_,n[5]=(e*b-s*q-r*E)*_,n[6]=(m*F-p*z+x*$)*_,n[7]=(p*g-w*F-x*v)*_,n[8]=(w*z-m*g+x*y)*_,n):null}function jt(n,t,s){return n[0]=2/t,n[1]=0,n[2]=0,n[3]=0,n[4]=-2/s,n[5]=0,n[6]=-1,n[7]=1,n[8]=1,n}function Ot(n){return`mat3(${n[0]}, ${n[1]}, ${n[2]}, ${n[3]}, ${n[4]}, ${n[5]}, ${n[6]}, ${n[7]}, ${n[8]})`}function Rt(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)+Math.pow(n[3],2)+Math.pow(n[4],2)+Math.pow(n[5],2)+Math.pow(n[6],2)+Math.pow(n[7],2)+Math.pow(n[8],2))}function Ct(n,t,s){return n[0]=t[0]+s[0],n[1]=t[1]+s[1],n[2]=t[2]+s[2],n[3]=t[3]+s[3],n[4]=t[4]+s[4],n[5]=t[5]+s[5],n[6]=t[6]+s[6],n[7]=t[7]+s[7],n[8]=t[8]+s[8],n}function Rn(n,t,s){return n[0]=t[0]-s[0],n[1]=t[1]-s[1],n[2]=t[2]-s[2],n[3]=t[3]-s[3],n[4]=t[4]-s[4],n[5]=t[5]-s[5],n[6]=t[6]-s[6],n[7]=t[7]-s[7],n[8]=t[8]-s[8],n}function Vt(n,t,s){return n[0]=t[0]*s,n[1]=t[1]*s,n[2]=t[2]*s,n[3]=t[3]*s,n[4]=t[4]*s,n[5]=t[5]*s,n[6]=t[6]*s,n[7]=t[7]*s,n[8]=t[8]*s,n}function It(n,t,s,e){return n[0]=t[0]+s[0]*e,n[1]=t[1]+s[1]*e,n[2]=t[2]+s[2]*e,n[3]=t[3]+s[3]*e,n[4]=t[4]+s[4]*e,n[5]=t[5]+s[5]*e,n[6]=t[6]+s[6]*e,n[7]=t[7]+s[7]*e,n[8]=t[8]+s[8]*e,n}function Nt(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]&&n[4]===t[4]&&n[5]===t[5]&&n[6]===t[6]&&n[7]===t[7]&&n[8]===t[8]}function Ut(n,t){const s=n[0],e=n[1],c=n[2],r=n[3],o=n[4],i=n[5],l=n[6],h=n[7],f=n[8],a=t[0],M=t[1],d=t[2],w=t[3],m=t[4],p=t[5],x=t[6],y=t[7],v=t[8];return Math.abs(s-a)<=L*Math.max(1,Math.abs(s),Math.abs(a))&&Math.abs(e-M)<=L*Math.max(1,Math.abs(e),Math.abs(M))&&Math.abs(c-d)<=L*Math.max(1,Math.abs(c),Math.abs(d))&&Math.abs(r-w)<=L*Math.max(1,Math.abs(r),Math.abs(w))&&Math.abs(o-m)<=L*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(i-p)<=L*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(l-x)<=L*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(h-y)<=L*Math.max(1,Math.abs(h),Math.abs(y))&&Math.abs(f-v)<=L*Math.max(1,Math.abs(f),Math.abs(v))}const Xt=On,Yt=Rn,Wt=Object.freeze(Object.defineProperty({__proto__:null,add:Ct,adjoint:Lt,clone:yt,copy:xt,create:jn,determinant:bt,equals:Ut,exactEquals:Nt,frob:Rt,fromMat2d:Pt,fromMat4:wt,fromQuat:Tt,fromRotation:Ft,fromScaling:kt,fromTranslation:St,fromValues:vt,identity:$t,invert:_t,mul:Xt,multiply:On,multiplyScalar:Vt,multiplyScalarAndAdd:It,normalFromMat4:Dt,projection:jt,rotate:qt,scale:Et,set:gt,str:Ot,sub:Yt,subtract:Rn,translate:At,transpose:zt},Symbol.toStringTag,{value:"Module"}));function Zt(){const n=new D(16);return D!==Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n}function Qt(n){const t=new D(16);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function Gt(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function Ht(n,t,s,e,c,r,o,i,l,h,f,a,M,d,w,m){const p=new D(16);return p[0]=n,p[1]=t,p[2]=s,p[3]=e,p[4]=c,p[5]=r,p[6]=o,p[7]=i,p[8]=l,p[9]=h,p[10]=f,p[11]=a,p[12]=M,p[13]=d,p[14]=w,p[15]=m,p}function Bt(n,t,s,e,c,r,o,i,l,h,f,a,M,d,w,m,p){return n[0]=t,n[1]=s,n[2]=e,n[3]=c,n[4]=r,n[5]=o,n[6]=i,n[7]=l,n[8]=h,n[9]=f,n[10]=a,n[11]=M,n[12]=d,n[13]=w,n[14]=m,n[15]=p,n}function Cn(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Kt(n,t){if(n===t){const s=t[1],e=t[2],c=t[3],r=t[6],o=t[7],i=t[11];n[1]=t[4],n[2]=t[8],n[3]=t[12],n[4]=s,n[6]=t[9],n[7]=t[13],n[8]=e,n[9]=r,n[11]=t[14],n[12]=c,n[13]=o,n[14]=i}else n[0]=t[0],n[1]=t[4],n[2]=t[8],n[3]=t[12],n[4]=t[1],n[5]=t[5],n[6]=t[9],n[7]=t[13],n[8]=t[2],n[9]=t[6],n[10]=t[10],n[11]=t[14],n[12]=t[3],n[13]=t[7],n[14]=t[11],n[15]=t[15];return n}function Jt(n,t){const s=t[0],e=t[1],c=t[2],r=t[3],o=t[4],i=t[5],l=t[6],h=t[7],f=t[8],a=t[9],M=t[10],d=t[11],w=t[12],m=t[13],p=t[14],x=t[15],y=s*i-e*o,v=s*l-c*o,g=s*h-r*o,$=e*l-c*i,z=e*h-r*i,F=c*h-r*l,E=f*m-a*w,S=f*p-M*w,b=f*x-d*w,A=a*p-M*m,q=a*x-d*m,k=M*x-d*p;let _=y*k-v*q+g*A+$*b-z*S+F*E;return _?(_=1/_,n[0]=(i*k-l*q+h*A)*_,n[1]=(c*q-e*k-r*A)*_,n[2]=(m*F-p*z+x*$)*_,n[3]=(M*z-a*F-d*$)*_,n[4]=(l*b-o*k-h*S)*_,n[5]=(s*k-c*b+r*S)*_,n[6]=(p*g-w*F-x*v)*_,n[7]=(f*F-M*g+d*v)*_,n[8]=(o*q-i*b+h*E)*_,n[9]=(e*b-s*q-r*E)*_,n[10]=(w*z-m*g+x*y)*_,n[11]=(a*g-f*z-d*y)*_,n[12]=(i*S-o*A-l*E)*_,n[13]=(s*A-e*S+c*E)*_,n[14]=(m*v-w*$-p*y)*_,n[15]=(f*$-a*v+M*y)*_,n):null}function ut(n,t){const s=t[0],e=t[1],c=t[2],r=t[3],o=t[4],i=t[5],l=t[6],h=t[7],f=t[8],a=t[9],M=t[10],d=t[11],w=t[12],m=t[13],p=t[14],x=t[15];return n[0]=i*(M*x-d*p)-a*(l*x-h*p)+m*(l*d-h*M),n[1]=-(e*(M*x-d*p)-a*(c*x-r*p)+m*(c*d-r*M)),n[2]=e*(l*x-h*p)-i*(c*x-r*p)+m*(c*h-r*l),n[3]=-(e*(l*d-h*M)-i*(c*d-r*M)+a*(c*h-r*l)),n[4]=-(o*(M*x-d*p)-f*(l*x-h*p)+w*(l*d-h*M)),n[5]=s*(M*x-d*p)-f*(c*x-r*p)+w*(c*d-r*M),n[6]=-(s*(l*x-h*p)-o*(c*x-r*p)+w*(c*h-r*l)),n[7]=s*(l*d-h*M)-o*(c*d-r*M)+f*(c*h-r*l),n[8]=o*(a*x-d*m)-f*(i*x-h*m)+w*(i*d-h*a),n[9]=-(s*(a*x-d*m)-f*(e*x-r*m)+w*(e*d-r*a)),n[10]=s*(i*x-h*m)-o*(e*x-r*m)+w*(e*h-r*i),n[11]=-(s*(i*d-h*a)-o*(e*d-r*a)+f*(e*h-r*i)),n[12]=-(o*(a*p-M*m)-f*(i*p-l*m)+w*(i*M-l*a)),n[13]=s*(a*p-M*m)-f*(e*p-c*m)+w*(e*M-c*a),n[14]=-(s*(i*p-l*m)-o*(e*p-c*m)+w*(e*l-c*i)),n[15]=s*(i*M-l*a)-o*(e*M-c*a)+f*(e*l-c*i),n}function ns(n){const t=n[0],s=n[1],e=n[2],c=n[3],r=n[4],o=n[5],i=n[6],l=n[7],h=n[8],f=n[9],a=n[10],M=n[11],d=n[12],w=n[13],m=n[14],p=n[15],x=t*o-s*r,y=t*i-e*r,v=t*l-c*r,g=s*i-e*o,$=s*l-c*o,z=e*l-c*i,F=h*w-f*d,E=h*m-a*d,S=h*p-M*d,b=f*m-a*w,A=f*p-M*w,q=a*p-M*m;return x*q-y*A+v*b+g*S-$*E+z*F}function Vn(n,t,s){const e=t[0],c=t[1],r=t[2],o=t[3],i=t[4],l=t[5],h=t[6],f=t[7],a=t[8],M=t[9],d=t[10],w=t[11],m=t[12],p=t[13],x=t[14],y=t[15];let v=s[0],g=s[1],$=s[2],z=s[3];return n[0]=v*e+g*i+$*a+z*m,n[1]=v*c+g*l+$*M+z*p,n[2]=v*r+g*h+$*d+z*x,n[3]=v*o+g*f+$*w+z*y,v=s[4],g=s[5],$=s[6],z=s[7],n[4]=v*e+g*i+$*a+z*m,n[5]=v*c+g*l+$*M+z*p,n[6]=v*r+g*h+$*d+z*x,n[7]=v*o+g*f+$*w+z*y,v=s[8],g=s[9],$=s[10],z=s[11],n[8]=v*e+g*i+$*a+z*m,n[9]=v*c+g*l+$*M+z*p,n[10]=v*r+g*h+$*d+z*x,n[11]=v*o+g*f+$*w+z*y,v=s[12],g=s[13],$=s[14],z=s[15],n[12]=v*e+g*i+$*a+z*m,n[13]=v*c+g*l+$*M+z*p,n[14]=v*r+g*h+$*d+z*x,n[15]=v*o+g*f+$*w+z*y,n}function ts(n,t,s){const e=s[0],c=s[1],r=s[2];let o,i,l,h,f,a,M,d,w,m,p,x;return t===n?(n[12]=t[0]*e+t[4]*c+t[8]*r+t[12],n[13]=t[1]*e+t[5]*c+t[9]*r+t[13],n[14]=t[2]*e+t[6]*c+t[10]*r+t[14],n[15]=t[3]*e+t[7]*c+t[11]*r+t[15]):(o=t[0],i=t[1],l=t[2],h=t[3],f=t[4],a=t[5],M=t[6],d=t[7],w=t[8],m=t[9],p=t[10],x=t[11],n[0]=o,n[1]=i,n[2]=l,n[3]=h,n[4]=f,n[5]=a,n[6]=M,n[7]=d,n[8]=w,n[9]=m,n[10]=p,n[11]=x,n[12]=o*e+f*c+w*r+t[12],n[13]=i*e+a*c+m*r+t[13],n[14]=l*e+M*c+p*r+t[14],n[15]=h*e+d*c+x*r+t[15]),n}function ss(n,t,s){const e=s[0],c=s[1],r=s[2];return n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n[4]=t[4]*c,n[5]=t[5]*c,n[6]=t[6]*c,n[7]=t[7]*c,n[8]=t[8]*r,n[9]=t[9]*r,n[10]=t[10]*r,n[11]=t[11]*r,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function es(n,t,s,e){let c=e[0],r=e[1],o=e[2],i=Math.sqrt(c*c+r*r+o*o);if(i<L)return null;i=1/i,c*=i,r*=i,o*=i;const l=Math.sin(s),h=Math.cos(s),f=1-h,a=t[0],M=t[1],d=t[2],w=t[3],m=t[4],p=t[5],x=t[6],y=t[7],v=t[8],g=t[9],$=t[10],z=t[11],F=c*c*f+h,E=r*c*f+o*l,S=o*c*f-r*l,b=c*r*f-o*l,A=r*r*f+h,q=o*r*f+c*l,k=c*o*f+r*l,_=r*o*f-c*l,V=o*o*f+h;return n[0]=a*F+m*E+v*S,n[1]=M*F+p*E+g*S,n[2]=d*F+x*E+$*S,n[3]=w*F+y*E+z*S,n[4]=a*b+m*A+v*q,n[5]=M*b+p*A+g*q,n[6]=d*b+x*A+$*q,n[7]=w*b+y*A+z*q,n[8]=a*k+m*_+v*V,n[9]=M*k+p*_+g*V,n[10]=d*k+x*_+$*V,n[11]=w*k+y*_+z*V,t!==n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n}function cs(n,t,s){const e=Math.sin(s),c=Math.cos(s),r=t[4],o=t[5],i=t[6],l=t[7],h=t[8],f=t[9],a=t[10],M=t[11];return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[4]=r*c+h*e,n[5]=o*c+f*e,n[6]=i*c+a*e,n[7]=l*c+M*e,n[8]=h*c-r*e,n[9]=f*c-o*e,n[10]=a*c-i*e,n[11]=M*c-l*e,n}function rs(n,t,s){const e=Math.sin(s),c=Math.cos(s),r=t[0],o=t[1],i=t[2],l=t[3],h=t[8],f=t[9],a=t[10],M=t[11];return t!==n&&(n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=r*c-h*e,n[1]=o*c-f*e,n[2]=i*c-a*e,n[3]=l*c-M*e,n[8]=r*e+h*c,n[9]=o*e+f*c,n[10]=i*e+a*c,n[11]=l*e+M*c,n}function is(n,t,s){const e=Math.sin(s),c=Math.cos(s),r=t[0],o=t[1],i=t[2],l=t[3],h=t[4],f=t[5],a=t[6],M=t[7];return t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=r*c+h*e,n[1]=o*c+f*e,n[2]=i*c+a*e,n[3]=l*c+M*e,n[4]=h*c-r*e,n[5]=f*c-o*e,n[6]=a*c-i*e,n[7]=M*c-l*e,n}function os(n,t){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,n}function ls(n,t){return n[0]=t[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=t[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=t[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function hs(n,t,s){let e=s[0],c=s[1],r=s[2],o=Math.sqrt(e*e+c*c+r*r);if(o<L)return null;o=1/o,e*=o,c*=o,r*=o;const i=Math.sin(t),l=Math.cos(t),h=1-l;return n[0]=e*e*h+l,n[1]=c*e*h+r*i,n[2]=r*e*h-c*i,n[3]=0,n[4]=e*c*h-r*i,n[5]=c*c*h+l,n[6]=r*c*h+e*i,n[7]=0,n[8]=e*r*h+c*i,n[9]=c*r*h-e*i,n[10]=r*r*h+l,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function fs(n,t){const s=Math.sin(t),e=Math.cos(t);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=e,n[6]=s,n[7]=0,n[8]=0,n[9]=-s,n[10]=e,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function as(n,t){const s=Math.sin(t),e=Math.cos(t);return n[0]=e,n[1]=0,n[2]=-s,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=s,n[9]=0,n[10]=e,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function ds(n,t){const s=Math.sin(t),e=Math.cos(t);return n[0]=e,n[1]=s,n[2]=0,n[3]=0,n[4]=-s,n[5]=e,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function In(n,t,s){const e=t[0],c=t[1],r=t[2],o=t[3],i=e+e,l=c+c,h=r+r,f=e*i,a=e*l,M=e*h,d=c*l,w=c*h,m=r*h,p=o*i,x=o*l,y=o*h;return n[0]=1-(d+m),n[1]=a+y,n[2]=M-x,n[3]=0,n[4]=a-y,n[5]=1-(f+m),n[6]=w+p,n[7]=0,n[8]=M+x,n[9]=w-p,n[10]=1-(f+d),n[11]=0,n[12]=s[0],n[13]=s[1],n[14]=s[2],n[15]=1,n}function Ms(n,t){const s=new D(3),e=-t[0],c=-t[1],r=-t[2],o=t[3],i=t[4],l=t[5],h=t[6],f=t[7],a=e*e+c*c+r*r+o*o;return a>0?(s[0]=(i*o+f*e+l*r-h*c)*2/a,s[1]=(l*o+f*c+h*e-i*r)*2/a,s[2]=(h*o+f*r+i*c-l*e)*2/a):(s[0]=(i*o+f*e+l*r-h*c)*2,s[1]=(l*o+f*c+h*e-i*r)*2,s[2]=(h*o+f*r+i*c-l*e)*2),In(n,t,s),n}function ps(n,t){return n[0]=t[12],n[1]=t[13],n[2]=t[14],n}function ms(n,t){const s=t[0],e=t[1],c=t[2],r=t[4],o=t[5],i=t[6],l=t[8],h=t[9],f=t[10];return n[0]=Math.sqrt(s*s+e*e+c*c),n[1]=Math.sqrt(r*r+o*o+i*i),n[2]=Math.sqrt(l*l+h*h+f*f),n}function ws(n,t){const s=t[0]+t[5]+t[10];let e=0;return s>0?(e=Math.sqrt(s+1)*2,n[3]=.25*e,n[0]=(t[6]-t[9])/e,n[1]=(t[8]-t[2])/e,n[2]=(t[1]-t[4])/e):t[0]>t[5]&&t[0]>t[10]?(e=Math.sqrt(1+t[0]-t[5]-t[10])*2,n[3]=(t[6]-t[9])/e,n[0]=.25*e,n[1]=(t[1]+t[4])/e,n[2]=(t[8]+t[2])/e):t[5]>t[10]?(e=Math.sqrt(1+t[5]-t[0]-t[10])*2,n[3]=(t[8]-t[2])/e,n[0]=(t[1]+t[4])/e,n[1]=.25*e,n[2]=(t[6]+t[9])/e):(e=Math.sqrt(1+t[10]-t[0]-t[5])*2,n[3]=(t[1]-t[4])/e,n[0]=(t[8]+t[2])/e,n[1]=(t[6]+t[9])/e,n[2]=.25*e),n}function ys(n,t,s,e){const c=t[0],r=t[1],o=t[2],i=t[3],l=c+c,h=r+r,f=o+o,a=c*l,M=c*h,d=c*f,w=r*h,m=r*f,p=o*f,x=i*l,y=i*h,v=i*f,g=e[0],$=e[1],z=e[2];return n[0]=(1-(w+p))*g,n[1]=(M+v)*g,n[2]=(d-y)*g,n[3]=0,n[4]=(M-v)*$,n[5]=(1-(a+p))*$,n[6]=(m+x)*$,n[7]=0,n[8]=(d+y)*z,n[9]=(m-x)*z,n[10]=(1-(a+w))*z,n[11]=0,n[12]=s[0],n[13]=s[1],n[14]=s[2],n[15]=1,n}function xs(n,t,s,e,c){const r=t[0],o=t[1],i=t[2],l=t[3],h=r+r,f=o+o,a=i+i,M=r*h,d=r*f,w=r*a,m=o*f,p=o*a,x=i*a,y=l*h,v=l*f,g=l*a,$=e[0],z=e[1],F=e[2],E=c[0],S=c[1],b=c[2],A=(1-(m+x))*$,q=(d+g)*$,k=(w-v)*$,_=(d-g)*z,V=(1-(M+x))*z,Z=(p+y)*z,N=(w+v)*F,on=(p-y)*F,O=(1-(M+m))*F;return n[0]=A,n[1]=q,n[2]=k,n[3]=0,n[4]=_,n[5]=V,n[6]=Z,n[7]=0,n[8]=N,n[9]=on,n[10]=O,n[11]=0,n[12]=s[0]+E-(A*E+_*S+N*b),n[13]=s[1]+S-(q*E+V*S+on*b),n[14]=s[2]+b-(k*E+Z*S+O*b),n[15]=1,n}function vs(n,t){const s=t[0],e=t[1],c=t[2],r=t[3],o=s+s,i=e+e,l=c+c,h=s*o,f=e*o,a=e*i,M=c*o,d=c*i,w=c*l,m=r*o,p=r*i,x=r*l;return n[0]=1-a-w,n[1]=f+x,n[2]=M-p,n[3]=0,n[4]=f-x,n[5]=1-h-w,n[6]=d+m,n[7]=0,n[8]=M+p,n[9]=d-m,n[10]=1-h-a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function gs(n,t,s,e,c,r,o){const i=1/(s-t),l=1/(c-e),h=1/(r-o);return n[0]=r*2*i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=r*2*l,n[6]=0,n[7]=0,n[8]=(s+t)*i,n[9]=(c+e)*l,n[10]=(o+r)*h,n[11]=-1,n[12]=0,n[13]=0,n[14]=o*r*2*h,n[15]=0,n}function $s(n,t,s,e,c){const r=1/Math.tan(t/2);let o;return n[0]=r/s,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=r,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,!c&&c!==1/0?(o=1/(e-c),n[10]=(c+e)*o,n[14]=2*c*e*o):(n[10]=-1,n[14]=-2*e),n}function zs(n,t,s,e){const c=Math.tan(t.upDegrees*Math.PI/180),r=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),i=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+i),h=2/(c+r);return n[0]=l,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=h,n[6]=0,n[7]=0,n[8]=-((o-i)*l*.5),n[9]=(c-r)*h*.5,n[10]=e/(s-e),n[11]=-1,n[12]=0,n[13]=0,n[14]=e*s/(s-e),n[15]=0,n}function _s(n,t,s,e,c,r,o){const i=1/(t-s),l=1/(e-c),h=1/(r-o);return n[0]=-2*i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*l,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*h,n[11]=0,n[12]=(t+s)*i,n[13]=(c+e)*l,n[14]=(o+r)*h,n[15]=1,n}function Ls(n,t,s,e){let c,r,o,i,l,h,f,a,M,d;const w=t[0],m=t[1],p=t[2],x=e[0],y=e[1],v=e[2],g=s[0],$=s[1],z=s[2];return Math.abs(w-g)<L&&Math.abs(m-$)<L&&Math.abs(p-z)<L?Cn(n):(f=w-g,a=m-$,M=p-z,d=1/Math.sqrt(f*f+a*a+M*M),f*=d,a*=d,M*=d,c=y*M-v*a,r=v*f-x*M,o=x*a-y*f,d=Math.sqrt(c*c+r*r+o*o),d?(d=1/d,c*=d,r*=d,o*=d):(c=0,r=0,o=0),i=a*o-M*r,l=M*c-f*o,h=f*r-a*c,d=Math.sqrt(i*i+l*l+h*h),d?(d=1/d,i*=d,l*=d,h*=d):(i=0,l=0,h=0),n[0]=c,n[1]=i,n[2]=f,n[3]=0,n[4]=r,n[5]=l,n[6]=a,n[7]=0,n[8]=o,n[9]=h,n[10]=M,n[11]=0,n[12]=-(c*w+r*m+o*p),n[13]=-(i*w+l*m+h*p),n[14]=-(f*w+a*m+M*p),n[15]=1,n)}function bs(n,t,s,e){const c=t[0],r=t[1],o=t[2],i=e[0],l=e[1],h=e[2];let f=c-s[0],a=r-s[1],M=o-s[2],d=f*f+a*a+M*M;d>0&&(d=1/Math.sqrt(d),f*=d,a*=d,M*=d);let w=l*M-h*a,m=h*f-i*M,p=i*a-l*f;return d=w*w+m*m+p*p,d>0&&(d=1/Math.sqrt(d),w*=d,m*=d,p*=d),n[0]=w,n[1]=m,n[2]=p,n[3]=0,n[4]=a*p-M*m,n[5]=M*w-f*p,n[6]=f*m-a*w,n[7]=0,n[8]=f,n[9]=a,n[10]=M,n[11]=0,n[12]=c,n[13]=r,n[14]=o,n[15]=1,n}function As(n){return`mat4(${n[0]}, ${n[1]}, ${n[2]}, ${n[3]}, ${n[4]}, ${n[5]}, ${n[6]}, ${n[7]}, ${n[8]}, ${n[9]}, ${n[10]}, ${n[11]}, ${n[12]}, ${n[13]}, ${n[14]}, ${n[15]})`}function qs(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)+Math.pow(n[3],2)+Math.pow(n[4],2)+Math.pow(n[5],2)+Math.pow(n[6],2)+Math.pow(n[7],2)+Math.pow(n[8],2)+Math.pow(n[9],2)+Math.pow(n[10],2)+Math.pow(n[11],2)+Math.pow(n[12],2)+Math.pow(n[13],2)+Math.pow(n[14],2)+Math.pow(n[15],2))}function Es(n,t,s){return n[0]=t[0]+s[0],n[1]=t[1]+s[1],n[2]=t[2]+s[2],n[3]=t[3]+s[3],n[4]=t[4]+s[4],n[5]=t[5]+s[5],n[6]=t[6]+s[6],n[7]=t[7]+s[7],n[8]=t[8]+s[8],n[9]=t[9]+s[9],n[10]=t[10]+s[10],n[11]=t[11]+s[11],n[12]=t[12]+s[12],n[13]=t[13]+s[13],n[14]=t[14]+s[14],n[15]=t[15]+s[15],n}function Nn(n,t,s){return n[0]=t[0]-s[0],n[1]=t[1]-s[1],n[2]=t[2]-s[2],n[3]=t[3]-s[3],n[4]=t[4]-s[4],n[5]=t[5]-s[5],n[6]=t[6]-s[6],n[7]=t[7]-s[7],n[8]=t[8]-s[8],n[9]=t[9]-s[9],n[10]=t[10]-s[10],n[11]=t[11]-s[11],n[12]=t[12]-s[12],n[13]=t[13]-s[13],n[14]=t[14]-s[14],n[15]=t[15]-s[15],n}function Ss(n,t,s){return n[0]=t[0]*s,n[1]=t[1]*s,n[2]=t[2]*s,n[3]=t[3]*s,n[4]=t[4]*s,n[5]=t[5]*s,n[6]=t[6]*s,n[7]=t[7]*s,n[8]=t[8]*s,n[9]=t[9]*s,n[10]=t[10]*s,n[11]=t[11]*s,n[12]=t[12]*s,n[13]=t[13]*s,n[14]=t[14]*s,n[15]=t[15]*s,n}function Fs(n,t,s,e){return n[0]=t[0]+s[0]*e,n[1]=t[1]+s[1]*e,n[2]=t[2]+s[2]*e,n[3]=t[3]+s[3]*e,n[4]=t[4]+s[4]*e,n[5]=t[5]+s[5]*e,n[6]=t[6]+s[6]*e,n[7]=t[7]+s[7]*e,n[8]=t[8]+s[8]*e,n[9]=t[9]+s[9]*e,n[10]=t[10]+s[10]*e,n[11]=t[11]+s[11]*e,n[12]=t[12]+s[12]*e,n[13]=t[13]+s[13]*e,n[14]=t[14]+s[14]*e,n[15]=t[15]+s[15]*e,n}function ks(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]&&n[4]===t[4]&&n[5]===t[5]&&n[6]===t[6]&&n[7]===t[7]&&n[8]===t[8]&&n[9]===t[9]&&n[10]===t[10]&&n[11]===t[11]&&n[12]===t[12]&&n[13]===t[13]&&n[14]===t[14]&&n[15]===t[15]}function Ps(n,t){const s=n[0],e=n[1],c=n[2],r=n[3],o=n[4],i=n[5],l=n[6],h=n[7],f=n[8],a=n[9],M=n[10],d=n[11],w=n[12],m=n[13],p=n[14],x=n[15],y=t[0],v=t[1],g=t[2],$=t[3],z=t[4],F=t[5],E=t[6],S=t[7],b=t[8],A=t[9],q=t[10],k=t[11],_=t[12],V=t[13],Z=t[14],N=t[15];return Math.abs(s-y)<=L*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(e-v)<=L*Math.max(1,Math.abs(e),Math.abs(v))&&Math.abs(c-g)<=L*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(r-$)<=L*Math.max(1,Math.abs(r),Math.abs($))&&Math.abs(o-z)<=L*Math.max(1,Math.abs(o),Math.abs(z))&&Math.abs(i-F)<=L*Math.max(1,Math.abs(i),Math.abs(F))&&Math.abs(l-E)<=L*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(h-S)<=L*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(f-b)<=L*Math.max(1,Math.abs(f),Math.abs(b))&&Math.abs(a-A)<=L*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(M-q)<=L*Math.max(1,Math.abs(M),Math.abs(q))&&Math.abs(d-k)<=L*Math.max(1,Math.abs(d),Math.abs(k))&&Math.abs(w-_)<=L*Math.max(1,Math.abs(w),Math.abs(_))&&Math.abs(m-V)<=L*Math.max(1,Math.abs(m),Math.abs(V))&&Math.abs(p-Z)<=L*Math.max(1,Math.abs(p),Math.abs(Z))&&Math.abs(x-N)<=L*Math.max(1,Math.abs(x),Math.abs(N))}const Ts=Vn,Ds=Nn,js=Object.freeze(Object.defineProperty({__proto__:null,add:Es,adjoint:ut,clone:Qt,copy:Gt,create:Zt,determinant:ns,equals:Ps,exactEquals:ks,frob:qs,fromQuat:vs,fromQuat2:Ms,fromRotation:hs,fromRotationTranslation:In,fromRotationTranslationScale:ys,fromRotationTranslationScaleOrigin:xs,fromScaling:ls,fromTranslation:os,fromValues:Ht,fromXRotation:fs,fromYRotation:as,fromZRotation:ds,frustum:gs,getRotation:ws,getScaling:ms,getTranslation:ps,identity:Cn,invert:Jt,lookAt:Ls,mul:Ts,multiply:Vn,multiplyScalar:Ss,multiplyScalarAndAdd:Fs,ortho:_s,perspective:$s,perspectiveFromFieldOfView:zs,rotate:es,rotateX:cs,rotateY:rs,rotateZ:is,scale:ss,set:Bt,str:As,sub:Ds,subtract:Nn,targetTo:bs,translate:ts,transpose:Kt},Symbol.toStringTag,{value:"Module"}));function Ln(){const n=new D(3);return D!==Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function Os(n){const t=new D(3);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function Un(n){const t=n[0],s=n[1],e=n[2];return Math.sqrt(t*t+s*s+e*e)}function sn(n,t,s){const e=new D(3);return e[0]=n,e[1]=t,e[2]=s,e}function Rs(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}function Cs(n,t,s,e){return n[0]=t,n[1]=s,n[2]=e,n}function Vs(n,t,s){return n[0]=t[0]+s[0],n[1]=t[1]+s[1],n[2]=t[2]+s[2],n}function Xn(n,t,s){return n[0]=t[0]-s[0],n[1]=t[1]-s[1],n[2]=t[2]-s[2],n}function Yn(n,t,s){return n[0]=t[0]*s[0],n[1]=t[1]*s[1],n[2]=t[2]*s[2],n}function Wn(n,t,s){return n[0]=t[0]/s[0],n[1]=t[1]/s[1],n[2]=t[2]/s[2],n}function Is(n,t){return n[0]=Math.ceil(t[0]),n[1]=Math.ceil(t[1]),n[2]=Math.ceil(t[2]),n}function Ns(n,t){return n[0]=Math.floor(t[0]),n[1]=Math.floor(t[1]),n[2]=Math.floor(t[2]),n}function Us(n,t,s){return n[0]=Math.min(t[0],s[0]),n[1]=Math.min(t[1],s[1]),n[2]=Math.min(t[2],s[2]),n}function Xs(n,t,s){return n[0]=Math.max(t[0],s[0]),n[1]=Math.max(t[1],s[1]),n[2]=Math.max(t[2],s[2]),n}function Ys(n,t){return n[0]=Math.round(t[0]),n[1]=Math.round(t[1]),n[2]=Math.round(t[2]),n}function Ws(n,t,s){return n[0]=t[0]*s,n[1]=t[1]*s,n[2]=t[2]*s,n}function Zs(n,t,s,e){return n[0]=t[0]+s[0]*e,n[1]=t[1]+s[1]*e,n[2]=t[2]+s[2]*e,n}function Zn(n,t){const s=t[0]-n[0],e=t[1]-n[1],c=t[2]-n[2];return Math.sqrt(s*s+e*e+c*c)}function Qn(n,t){const s=t[0]-n[0],e=t[1]-n[1],c=t[2]-n[2];return s*s+e*e+c*c}function Gn(n){const t=n[0],s=n[1],e=n[2];return t*t+s*s+e*e}function Qs(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n}function Gs(n,t){return n[0]=1/t[0],n[1]=1/t[1],n[2]=1/t[2],n}function yn(n,t){const s=t[0],e=t[1],c=t[2];let r=s*s+e*e+c*c;return r>0&&(r=1/Math.sqrt(r),n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r),n}function bn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function pn(n,t,s){const e=t[0],c=t[1],r=t[2],o=s[0],i=s[1],l=s[2];return n[0]=c*l-r*i,n[1]=r*o-e*l,n[2]=e*i-c*o,n}function Hs(n,t,s,e){const c=t[0],r=t[1],o=t[2];return n[0]=c+e*(s[0]-c),n[1]=r+e*(s[1]-r),n[2]=o+e*(s[2]-o),n}function Bs(n,t,s,e,c,r){const o=r*r,i=o*(2*r-3)+1,l=o*(r-2)+r,h=o*(r-1),f=o*(3-2*r);return n[0]=t[0]*i+s[0]*l+e[0]*h+c[0]*f,n[1]=t[1]*i+s[1]*l+e[1]*h+c[1]*f,n[2]=t[2]*i+s[2]*l+e[2]*h+c[2]*f,n}function Ks(n,t,s,e,c,r){const o=1-r,i=o*o,l=r*r,h=i*o,f=3*r*i,a=3*l*o,M=l*r;return n[0]=t[0]*h+s[0]*f+e[0]*a+c[0]*M,n[1]=t[1]*h+s[1]*f+e[1]*a+c[1]*M,n[2]=t[2]*h+s[2]*f+e[2]*a+c[2]*M,n}function Js(n,t){t=t||1;const s=tn()*2*Math.PI,e=tn()*2-1,c=Math.sqrt(1-e*e)*t;return n[0]=Math.cos(s)*c,n[1]=Math.sin(s)*c,n[2]=e*t,n}function us(n,t,s){const e=t[0],c=t[1],r=t[2];let o=s[3]*e+s[7]*c+s[11]*r+s[15];return o=o||1,n[0]=(s[0]*e+s[4]*c+s[8]*r+s[12])/o,n[1]=(s[1]*e+s[5]*c+s[9]*r+s[13])/o,n[2]=(s[2]*e+s[6]*c+s[10]*r+s[14])/o,n}function ne(n,t,s){const e=t[0],c=t[1],r=t[2];return n[0]=e*s[0]+c*s[3]+r*s[6],n[1]=e*s[1]+c*s[4]+r*s[7],n[2]=e*s[2]+c*s[5]+r*s[8],n}function te(n,t,s){const e=s[0],c=s[1],r=s[2],o=s[3],i=t[0],l=t[1],h=t[2];let f=c*h-r*l,a=r*i-e*h,M=e*l-c*i,d=c*M-r*a,w=r*f-e*M,m=e*a-c*f;const p=o*2;return f*=p,a*=p,M*=p,d*=2,w*=2,m*=2,n[0]=i+f+d,n[1]=l+a+w,n[2]=h+M+m,n}function se(n,t,s,e){const c=[],r=[];return c[0]=t[0]-s[0],c[1]=t[1]-s[1],c[2]=t[2]-s[2],r[0]=c[0],r[1]=c[1]*Math.cos(e)-c[2]*Math.sin(e),r[2]=c[1]*Math.sin(e)+c[2]*Math.cos(e),n[0]=r[0]+s[0],n[1]=r[1]+s[1],n[2]=r[2]+s[2],n}function ee(n,t,s,e){const c=[],r=[];return c[0]=t[0]-s[0],c[1]=t[1]-s[1],c[2]=t[2]-s[2],r[0]=c[2]*Math.sin(e)+c[0]*Math.cos(e),r[1]=c[1],r[2]=c[2]*Math.cos(e)-c[0]*Math.sin(e),n[0]=r[0]+s[0],n[1]=r[1]+s[1],n[2]=r[2]+s[2],n}function ce(n,t,s,e){const c=[],r=[];return c[0]=t[0]-s[0],c[1]=t[1]-s[1],c[2]=t[2]-s[2],r[0]=c[0]*Math.cos(e)-c[1]*Math.sin(e),r[1]=c[0]*Math.sin(e)+c[1]*Math.cos(e),r[2]=c[2],n[0]=r[0]+s[0],n[1]=r[1]+s[1],n[2]=r[2]+s[2],n}function re(n,t){const s=sn(n[0],n[1],n[2]),e=sn(t[0],t[1],t[2]);yn(s,s),yn(e,e);const c=bn(s,e);return c>1?0:c<-1?Math.PI:Math.acos(c)}function ie(n){return`vec3(${n[0]}, ${n[1]}, ${n[2]})`}function oe(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]}function le(n,t){const s=n[0],e=n[1],c=n[2],r=t[0],o=t[1],i=t[2];return Math.abs(s-r)<=L*Math.max(1,Math.abs(s),Math.abs(r))&&Math.abs(e-o)<=L*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(c-i)<=L*Math.max(1,Math.abs(c),Math.abs(i))}const he=Xn,fe=Yn,ae=Wn,de=Zn,Me=Qn,Hn=Un,pe=Gn,me=function(){const n=Ln();return function(t,s,e,c,r,o){let i,l;for(s||(s=3),e||(e=0),c?l=Math.min(c*s+e,t.length):l=t.length,i=e;i<l;i+=s)n[0]=t[i],n[1]=t[i+1],n[2]=t[i+2],r(n,n,o),t[i]=n[0],t[i+1]=n[1],t[i+2]=n[2];return t}}(),we=Object.freeze(Object.defineProperty({__proto__:null,add:Vs,angle:re,bezier:Ks,ceil:Is,clone:Os,copy:Rs,create:Ln,cross:pn,dist:de,distance:Zn,div:ae,divide:Wn,dot:bn,equals:le,exactEquals:oe,floor:Ns,forEach:me,fromValues:sn,hermite:Bs,inverse:Gs,len:Hn,length:Un,lerp:Hs,max:Xs,min:Us,mul:fe,multiply:Yn,negate:Qs,normalize:yn,random:Js,rotateX:se,rotateY:ee,rotateZ:ce,round:Ys,scale:Ws,scaleAndAdd:Zs,set:Cs,sqrDist:Me,sqrLen:pe,squaredDistance:Qn,squaredLength:Gn,str:ie,sub:he,subtract:Xn,transformMat3:ne,transformMat4:us,transformQuat:te},Symbol.toStringTag,{value:"Module"}));function ye(){const n=new D(4);return D!==Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0),n}function xe(n){const t=new D(4);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function ve(n,t,s,e){const c=new D(4);return c[0]=n,c[1]=t,c[2]=s,c[3]=e,c}function ge(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function $e(n,t,s,e,c){return n[0]=t,n[1]=s,n[2]=e,n[3]=c,n}function ze(n,t,s){return n[0]=t[0]+s[0],n[1]=t[1]+s[1],n[2]=t[2]+s[2],n[3]=t[3]+s[3],n}function _e(n,t,s){return n[0]=t[0]*s,n[1]=t[1]*s,n[2]=t[2]*s,n[3]=t[3]*s,n}function Le(n){const t=n[0],s=n[1],e=n[2],c=n[3];return Math.sqrt(t*t+s*s+e*e+c*c)}function be(n){const t=n[0],s=n[1],e=n[2],c=n[3];return t*t+s*s+e*e+c*c}function Ae(n,t){const s=t[0],e=t[1],c=t[2],r=t[3];let o=s*s+e*e+c*c+r*r;return o>0&&(o=1/Math.sqrt(o),n[0]=s*o,n[1]=e*o,n[2]=c*o,n[3]=r*o),n}function qe(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function Ee(n,t,s,e){const c=t[0],r=t[1],o=t[2],i=t[3];return n[0]=c+e*(s[0]-c),n[1]=r+e*(s[1]-r),n[2]=o+e*(s[2]-o),n[3]=i+e*(s[3]-i),n}function Se(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]}function Fe(n,t){const s=n[0],e=n[1],c=n[2],r=n[3],o=t[0],i=t[1],l=t[2],h=t[3];return Math.abs(s-o)<=L*Math.max(1,Math.abs(s),Math.abs(o))&&Math.abs(e-i)<=L*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(c-l)<=L*Math.max(1,Math.abs(c),Math.abs(l))&&Math.abs(r-h)<=L*Math.max(1,Math.abs(r),Math.abs(h))}(function(){const n=ye();return function(t,s,e,c,r,o){let i,l;for(s||(s=4),e||(e=0),c?l=Math.min(c*s+e,t.length):l=t.length,i=e;i<l;i+=s)n[0]=t[i],n[1]=t[i+1],n[2]=t[i+2],n[3]=t[i+3],r(n,n,o),t[i]=n[0],t[i+1]=n[1],t[i+2]=n[2],t[i+3]=n[3];return t}})();function zn(){const n=new D(4);return D!==Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function ke(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n}function Bn(n,t,s){s=s*.5;const e=Math.sin(s);return n[0]=e*t[0],n[1]=e*t[1],n[2]=e*t[2],n[3]=Math.cos(s),n}function Pe(n,t){const s=Math.acos(t[3])*2,e=Math.sin(s/2);return e>L?(n[0]=t[0]/e,n[1]=t[1]/e,n[2]=t[2]/e):(n[0]=1,n[1]=0,n[2]=0),s}function Kn(n,t,s){const e=t[0],c=t[1],r=t[2],o=t[3],i=s[0],l=s[1],h=s[2],f=s[3];return n[0]=e*f+o*i+c*h-r*l,n[1]=c*f+o*l+r*i-e*h,n[2]=r*f+o*h+e*l-c*i,n[3]=o*f-e*i-c*l-r*h,n}function Te(n,t,s){s*=.5;const e=t[0],c=t[1],r=t[2],o=t[3],i=Math.sin(s),l=Math.cos(s);return n[0]=e*l+o*i,n[1]=c*l+r*i,n[2]=r*l-c*i,n[3]=o*l-e*i,n}function De(n,t,s){s*=.5;const e=t[0],c=t[1],r=t[2],o=t[3],i=Math.sin(s),l=Math.cos(s);return n[0]=e*l-r*i,n[1]=c*l+o*i,n[2]=r*l+e*i,n[3]=o*l-c*i,n}function je(n,t,s){s*=.5;const e=t[0],c=t[1],r=t[2],o=t[3],i=Math.sin(s),l=Math.cos(s);return n[0]=e*l+c*i,n[1]=c*l-e*i,n[2]=r*l+o*i,n[3]=o*l-r*i,n}function Oe(n,t){const s=t[0],e=t[1],c=t[2];return n[0]=s,n[1]=e,n[2]=c,n[3]=Math.sqrt(Math.abs(1-s*s-e*e-c*c)),n}function mn(n,t,s,e){const c=t[0],r=t[1],o=t[2],i=t[3];let l=s[0],h=s[1],f=s[2],a=s[3],M,d,w,m,p;return d=c*l+r*h+o*f+i*a,d<0&&(d=-d,l=-l,h=-h,f=-f,a=-a),1-d>L?(M=Math.acos(d),w=Math.sin(M),m=Math.sin((1-e)*M)/w,p=Math.sin(e*M)/w):(m=1-e,p=e),n[0]=m*c+p*l,n[1]=m*r+p*h,n[2]=m*o+p*f,n[3]=m*i+p*a,n}function Re(n){const t=tn(),s=tn(),e=tn(),c=Math.sqrt(1-t),r=Math.sqrt(t);return n[0]=c*Math.sin(2*Math.PI*s),n[1]=c*Math.cos(2*Math.PI*s),n[2]=r*Math.sin(2*Math.PI*e),n[3]=r*Math.cos(2*Math.PI*e),n}function Ce(n,t){const s=t[0],e=t[1],c=t[2],r=t[3],o=s*s+e*e+c*c+r*r,i=o?1/o:0;return n[0]=-s*i,n[1]=-e*i,n[2]=-c*i,n[3]=r*i,n}function Ve(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=t[3],n}function Jn(n,t){const s=t[0]+t[4]+t[8];let e;if(s>0)e=Math.sqrt(s+1),n[3]=.5*e,e=.5/e,n[0]=(t[5]-t[7])*e,n[1]=(t[6]-t[2])*e,n[2]=(t[1]-t[3])*e;else{let c=0;t[4]>t[0]&&(c=1),t[8]>t[c*3+c]&&(c=2);const r=(c+1)%3,o=(c+2)%3;e=Math.sqrt(t[c*3+c]-t[r*3+r]-t[o*3+o]+1),n[c]=.5*e,e=.5/e,n[3]=(t[r*3+o]-t[o*3+r])*e,n[r]=(t[r*3+c]+t[c*3+r])*e,n[o]=(t[o*3+c]+t[c*3+o])*e}return n}function Ie(n,t,s,e){const c=.5*Math.PI/180;t*=c,s*=c,e*=c;const r=Math.sin(t),o=Math.cos(t),i=Math.sin(s),l=Math.cos(s),h=Math.sin(e),f=Math.cos(e);return n[0]=r*l*f-o*i*h,n[1]=o*i*f+r*l*h,n[2]=o*l*h-r*i*f,n[3]=o*l*f+r*i*h,n}function Ne(n){return`quat(${n[0]}, ${n[1]}, ${n[2]}, ${n[3]})`}const Ue=xe,Xe=ve,Ye=ge,We=$e,Ze=ze,Qe=Kn,Ge=_e,He=qe,Be=Ee,un=Le,Ke=un,nt=be,Je=nt,An=Ae,ue=Se,n1=Fe,t1=function(){const n=Ln(),t=sn(1,0,0),s=sn(0,1,0);return function(e,c,r){const o=bn(c,r);return o<-.999999?(pn(n,t,c),Hn(n)<1e-6&&pn(n,s,c),yn(n,n),Bn(e,n,Math.PI),e):o>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(pn(n,c,r),e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=1+o,An(e,e))}}(),s1=function(){const n=zn(),t=zn();return function(s,e,c,r,o,i){return mn(n,e,o,i),mn(t,c,r,i),mn(s,n,t,2*i*(1-i)),s}}(),e1=function(){const n=jn();return function(t,s,e,c){return n[0]=e[0],n[3]=e[1],n[6]=e[2],n[1]=c[0],n[4]=c[1],n[7]=c[2],n[2]=-s[0],n[5]=-s[1],n[8]=-s[2],An(t,Jn(t,n))}}(),c1=Object.freeze(Object.defineProperty({__proto__:null,add:Ze,calculateW:Oe,clone:Ue,conjugate:Ve,copy:Ye,create:zn,dot:He,equals:n1,exactEquals:ue,fromEuler:Ie,fromMat3:Jn,fromValues:Xe,getAxisAngle:Pe,identity:ke,invert:Ce,len:Ke,length:un,lerp:Be,mul:Qe,multiply:Kn,normalize:An,random:Re,rotateX:Te,rotateY:De,rotateZ:je,rotationTo:t1,scale:Ge,set:We,setAxes:e1,setAxisAngle:Bn,slerp:mn,sqlerp:s1,sqrLen:Je,squaredLength:nt,str:Ne},Symbol.toStringTag,{value:"Module"}));function r1(){const n=new D(2);return D!==Float32Array&&(n[0]=0,n[1]=0),n}(function(){const n=r1();return function(t,s,e,c,r,o){let i,l;for(s||(s=2),e||(e=0),c?l=Math.min(c*s+e,t.length):l=t.length,i=e;i<l;i+=s)n[0]=t[i],n[1]=t[i+1],r(n,n,o),t[i]=n[0],t[i+1]=n[1];return t}})();const J=we,i1=Wt,wn=js,G=c1,C=new Float32Array(16),H=new Float32Array(16);function tt(n,t,s){this.rotation=n,this.center=t,this.distance=s}const rn=tt.prototype;rn.view=function(n){return n||(n=wn.create()),H[0]=H[1]=0,H[2]=-this.distance,wn.fromRotationTranslation(n,G.conjugate(C,this.rotation),H),wn.translate(n,n,J.negate(C,this.center)),n};rn.lookAt=function(n,t,s){wn.lookAt(C,n,t,s),i1.fromMat4(C,C),G.fromMat3(this.rotation,C),J.copy(this.center,t),this.distance=J.distance(n,t)};rn.pan=function(n){const t=this.distance;C[0]=-t*(n[0]||0),C[1]=t*(n[1]||0),C[2]=t*(n[2]||0),J.transformQuat(C,C,this.rotation),J.add(this.center,this.center,C)};rn.zoom=function(n){this.distance+=n,this.distance<0&&(this.distance=0)};function kn(n,t){const s=t[0],e=t[1];let c=s*s+e*e;c>1&&(c=1),n[0]=-t[0],n[1]=t[1],n[2]=t[2]||Math.sqrt(1-c),n[3]=0}rn.rotate=function(n,t){kn(C,n),kn(H,t),G.invert(H,H),G.multiply(C,C,H),!(G.length(C)<1e-6)&&(G.multiply(this.rotation,this.rotation,C),G.normalize(this.rotation,this.rotation))};function o1(n,t,s){n=n||[0,0,-1],t=t||[0,0,0],s=s||[0,1,0];const e=new tt(G.create(),J.create(),1);return e.lookAt(n,t,s),e}const qn=typeof window<"u"?window.navigator.userAgent:"",vn=/OS X/.test(qn),st=/Opera/.test(qn),l1=!/like Gecko/.test(qn)&&!st;let P;const W={0:vn?"<menu>":"<UNK>",1:"<mouse 1>",2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",21:"<ime-hangul>",23:"<ime-junja>",24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",31:"<ime-mode-change>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",40:"<down>",41:"<select>",42:"<print>",43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",92:"<meta>",93:vn?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num-->",110:"<num-.>",111:"<num-/>",144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",164:"<alt-left>",165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",170:"<browser-search>",171:"<browser-favorites>",172:"<browser-home>",173:vn&&l1?"-":"<volume-mute>",174:"<volume-down>",175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",182:"<launch-app 1>",183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"<meta>",224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:st?"`":"<unicode>",246:"<attention>",247:"<crsel>",248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(P=58;P<65;++P)W[P]=String.fromCharCode(P);for(P=48;P<58;++P)W[P]=`${P-48}`;for(P=65;P<91;++P)W[P]=String.fromCharCode(P);for(P=96;P<106;++P)W[P]=`<num-${P-96}>`;for(P=112;P<136;++P)W[P]=`F${P-111}`;const h1=Object.keys(W),en={};et();window.addEventListener("keydown",a1,!1);window.addEventListener("keyup",f1,!1);window.addEventListener("blur",et,!1);function gn(n){return n?en[n]:en}function et(){h1.forEach(function(n){en[W[n]]=!1})}function f1(n){en[W[n.keyCode]]=!1}function a1(n){en[W[n.keyCode]]=!0}function j(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}j.EventEmitter=j;j.prototype._events=void 0;j.prototype._maxListeners=void 0;j.defaultMaxListeners=10;j.prototype.setMaxListeners=function(n){if(!d1(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this};j.prototype.emit=function(n){let t,s,e,c,r;if(this._events||(this._events={}),n==="error"&&(!this._events.error||cn(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;{const i=new Error(`Uncaught, unspecified "error" event. (${t})`);throw i.context=t,i}}const o=this._events[n];if(ct(o))return!1;if(Y(o))switch(arguments.length){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:e=Array.prototype.slice.call(arguments,1),o.apply(this,e)}else if(cn(o))for(e=Array.prototype.slice.call(arguments,1),r=o.slice(),s=r.length,c=0;c<s;c++)r[c].apply(this,e);return!0};j.prototype.addListener=function(n,t){let s;if(!Y(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",n,Y(t.listener)?t.listener:t),this._events[n]?cn(this._events[n])?this._events[n].push(t):this._events[n]=[this._events[n],t]:this._events[n]=t,cn(this._events[n])&&!this._events[n].warned&&(ct(this._maxListeners)?s=j.defaultMaxListeners:s=this._maxListeners,s&&s>0&&this._events[n].length>s&&(this._events[n].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[n].length),typeof console.trace=="function"&&console.trace())),this};j.prototype.on=j.prototype.addListener;j.prototype.once=function(n,t){if(!Y(t))throw TypeError("listener must be a function");let s=!1;function e(){this.removeListener(n,e),s||(s=!0,t.apply(this,arguments))}return e.listener=t,this.on(n,e),this};j.prototype.removeListener=function(n,t){let s,e;if(!Y(t))throw TypeError("listener must be a function");if(!this._events||!this._events[n])return this;const c=this._events[n],r=c.length;if(s=-1,c===t||Y(c.listener)&&c.listener===t)delete this._events[n],this._events.removeListener&&this.emit("removeListener",n,t);else if(cn(c)){for(e=r;e-- >0;)if(c[e]===t||c[e].listener&&c[e].listener===t){s=e;break}if(s<0)return this;c.length===1?(c.length=0,delete this._events[n]):c.splice(s,1),this._events.removeListener&&this.emit("removeListener",n,t)}return this};j.prototype.removeAllListeners=function(n){let t;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[n]&&delete this._events[n],this;if(arguments.length===0){for(t in this._events)t!=="removeListener"&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}const s=this._events[n];if(Y(s))this.removeListener(n,s);else if(s)for(;s.length;)this.removeListener(n,s[s.length-1]);return delete this._events[n],this};j.prototype.listeners=function(n){let t;return!this._events||!this._events[n]?t=[]:Y(this._events[n])?t=[this._events[n]]:t=this._events[n].slice(),t};j.prototype.listenerCount=function(n){if(this._events){const t=this._events[n];if(Y(t))return 1;if(t)return t.length}return 0};j.listenerCount=function(n,t){return n.listenerCount(t)};function Y(n){return typeof n=="function"}function d1(n){return typeof n=="number"}function cn(n){return typeof n=="object"&&n!==null}function ct(n){return n===void 0}function M1(n,t){const s=new j;if(s[0]=0,s[1]=0,s.prev=[0,0],s.flush=c,s.dispose=r,typeof window>"u")return s;t=t||n||window,n=n||document.body;const e=n===document.body||n===window?function(o){s.prev[0]=s[0],s.prev[1]=s[1],s[0]=o.clientX,s[1]=o.clientY,s.emit("move",o)}:function(o){s.prev[0]=s[0],s.prev[1]=s[1];const i=n.getBoundingClientRect();s[0]=o.clientX-i.left,s[1]=o.clientY-i.top,s.emit("move",o)};return t.addEventListener("mousemove",e,!1),s;function c(){s.prev[0]=s[0],s.prev[1]=s[1]}function r(){s.removeAllListeners("move"),t.removeEventListener("mousemove",e)}}const Pn=["left","middle","right"];function p1(n,t){const s=new j;return s.left=!1,s.right=!1,s.middle=!1,s.dispose=o,typeof window<"u"&&(n=n||window,n.addEventListener("mousedown",e,!1),window.addEventListener("mouseup",c,!1),t&&n.addEventListener("contextmenu",r,!1)),s;function e(i){if(s.right=!1,s[Pn[i.button]]=!0,s.emit("down",i),!!t){if(!i.preventDefault)return!1;i.preventDefault(),i.stopPropagation()}}function c(i){s.right=!1,s[Pn[i.button]]=!1,s.emit("up",i),t&&i.preventDefault&&(i.preventDefault(),i.stopPropagation())}function r(i){return i.preventDefault&&i.preventDefault()&&!1}function o(){s.left=!1,s.right=!1,s.middle=!1,n&&(n.removeEventListener("contextmenu",r,!1),n.removeEventListener("mousedown",e,!1),window.removeEventListener("mouseup",c,!1))}}let rt="",_n;window.addEventListener?_n="addEventListener":(_n="attachEvent",rt="on");const xn="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll";function m1(n,t,s){Tn(n,xn,t,s),xn==="DOMMouseScroll"&&Tn(n,"MozMousePixelScroll",t,s)}function Tn(n,t,s,e){n[_n](rt+t,xn==="wheel"?s:function(c){!c&&(c=window.event);const r={deltaY:0,originalEvent:c,target:c.target||c.srcElement,type:"wheel",deltaMode:c.type==="MozMousePixelScroll"?0:1,deltaX:0,delatZ:0,preventDefault(){c.preventDefault?c.preventDefault():c.returnValue=!1}};return xn==="mousewheel"?(r.deltaY=-1/40*c.wheelDelta,c.wheelDeltaX&&(r.deltaX=-1/40*c.wheelDeltaX)):r.deltaY=c.detail,s(r)},e||!1)}function w1(n,t){const s=new j;if(s.flush=e,e(),typeof window>"u")return s;return n=n||window,m1(n,c,!1),s;function e(){s[0]=s[1]=s[2]=0}function c(r){const o=r.deltaMode===1?12:1;s[0]+=o*(r.deltaX||0),s[1]+=o*(r.deltaY||0),s[2]+=o*(r.deltaZ||0),s.emit("scroll",s),t&&r.preventDefault&&(r.preventDefault(),r.stopPropagation&&r.stopPropagation())}}const Dn=1;function y1(n,t){t=t||{},t.pan=t.pan!==!1,t.scale=t.scale!==!1,t.rotate=t.rotate!==!1;const s=w1(n,t.scale),e=p1(n,t.rotate),c=M1(n),r=o1([0,10,30],[0,0,0],[0,1,0]);return r.tick=o,r;function o(){const i=gn("<control>")||gn("<alt>"),l=gn("<shift>"),h=n.height,f=n.width;if(t.rotate&&e.left&&!i&&!l&&r.rotate([c[0]/f-.5,c[1]/h-.5],[c.prev[0]/f-.5,c.prev[1]/h-.5]),(t.pan&&e.right||e.left&&i&&!l)&&r.pan([Dn*(c[0]-c.prev[0])/f,Dn*(c[1]-c.prev[1])/h]),t.scale&&s[1]&&(r.distance*=Math.exp(s[1]/h)),t.scale&&(e.middle||e.left&&!i&&l)){const a=c.y-c.prevY;if(!a)return;r.distance*=Math.exp(a/h)}s.flush(),c.flush()}}function x1(){const n=new Float32Array(3);return n[0]=0,n[1]=0,n[2]=0,n}function an(n,t,s){return n[0]=t[0]+s[0],n[1]=t[1]+s[1],n[2]=t[2]+s[2],n}function dn(n,t,s){return n[0]=t[0]-s[0],n[1]=t[1]-s[1],n[2]=t[2]-s[2],n}function v1(n,t,s){return n[0]=t[0]*s,n[1]=t[1]*s,n[2]=t[2]*s,n}function Mn(n,t,s,e){return n[0]=t[0]+s[0]*e,n[1]=t[1]+s[1]*e,n[2]=t[2]+s[2]*e,n}function g1(n,t){const s=t[0]-n[0],e=t[1]-n[1],c=t[2]-n[2];return Math.sqrt(s*s+e*e+c*c)}function $1(n){const t=n[0],s=n[1],e=n[2];return Math.sqrt(t*t+s*s+e*e)}function $n(n,t){const s=t[0],e=t[1],c=t[2];let r=s*s+e*e+c*c;return r>0&&(r=1/Math.sqrt(r),n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r),n}function z1(n,t,s){const e=t[0],c=t[1],r=t[2],o=s[0],i=s[1],l=s[2];return n[0]=c*l-r*i,n[1]=r*o-e*l,n[2]=e*i-c*o,n}x1();(async()=>{const n=document.createElement("canvas");n.id="glcanvas",n.width=window.innerWidth,n.height=window.innerHeight,document.body.appendChild(n);const t=new at({canvasId:"glcanvas"}),s=y1(n);window.addEventListener("resize",mt(n),!1),s.view(dt([],[0,3,30],[0,0,-5.5],[0,1,0])),s.rotate([0,0],[3.14*.15,0]);const e=[],c=[],r=[],o=[],i=[],l=[];class h{constructor(R,T){hn(this,"i0");hn(this,"i1");hn(this,"restLength");this.i0=R,this.i1=T,this.restLength=g1(r[R],r[T])}}const f=5.5,a=-f,M=Number(f),d=-f,w=Number(f),m=20;let p,x;for(p=0;p<=m;++p){const O=p/m*(w-d)+d,R=p/m;for(x=0;x<=m;++x){const T=x/m*(M-a)+a,En=x/m;r.push([T,0,O]),o.push([T,0,O]),e.push([En,R])}}let y,v,g,$,z;for(y=0;y<r.length;++y)i.push([0,0,0]);for(p=0;p<=m-1;++p)for(x=0;x<=m-1;++x)y=p*(m+1)+x,v=y+0,g=y+1,$=y+(m+1)+0,z=y+(m+1)+1,c.push([z,g,v]),c.push([v,$,z]);for(p=0;p<=m;++p)for(x=0;x<=m;++x)y=p*(m+1)+x,v=y+0,g=y+1,$=y+(m+1)+0,z=y+(m+1)+1,x<m&&l.push(new h(v,g)),p<m&&l.push(new h(v,$)),x<m&&p<m&&l.push(new h(v,z));const F=r.reduce((O,R)=>(R.forEach(T=>{O.push(T)}),O),[]),E=e.reduce((O,R)=>(R.forEach(T=>{O.push(T)}),O),[]),S=i.reduce((O,R)=>(R.forEach(T=>{O.push(T)}),O),[]),b=c.reduce((O,R)=>(R.forEach(T=>{O.push(T)}),O),[]);let A=0,q=1,k=1;const _={vertices:{position:{data:new Float32Array(F),format:"float32x3"},normal:{data:new Float32Array(S),format:"float32x3"},uv:{data:new Float32Array(E),format:"float32x2"}},indices:new Uint16Array(b),draw:{__type__:"DrawIndexed",indexCount:b.length},bindingResources:{},pipeline:{vertex:{code:`precision mediump float;

        attribute vec3 position;
        attribute vec3 normal;
        attribute vec2 uv;
      
        varying vec2 vUv;
        varying vec3 vNormal;
      
        uniform mat4 projection, view;
      
        void main() {
          vUv = uv;
          vNormal = normal;
          gl_Position = projection * view * vec4(position, 1);
        }`},fragment:{code:`precision mediump float;

        varying vec2 vUv;
        varying vec3 vNormal;
      
        uniform sampler2D texture;
      
        void main () {
          vec3 tex = texture2D(texture, vUv*1.0).xyz;
          vec3 lightDir = normalize(vec3(0.4, 0.9, 0.3));
      
          vec3 n = vNormal;
      
          // for the back faces we need to use the opposite normals.
          if(gl_FrontFacing == false) {
            n = -n;
          }
      
          vec3 ambient = 0.3 * tex;
          vec3 diffuse = 0.7 * tex * clamp( dot(n, lightDir ), 0.0, 1.0 );
      
          gl_FragColor = vec4(ambient + diffuse, 1.0);
        }`,targets:[{blend:{}}]},depthStencil:{}}},V={commandEncoders:[{passEncoders:[{renderPassObjects:[_]}]}]};function Z(){let R=[],T=[];const it=[0,-4,0],u=[Math.sin(A/2),Math.cos(A/3),Math.sin(A/1)];for($n(u,u),v1(u,u,20.6),y=0;y<r.length;++y)dn(R,r[y],o[y]),R=[R[0],R[1],R[2]],T=[r[y][0],r[y][1],r[y][2]],an(T,T,R),Mn(T,T,it,.017*.017),Mn(T,T,u,.017*.017),o[y]=[r[y][0],r[y][1],r[y][2]],r[y]=[T[0],T[1],T[2]];const ln=[];let B,K;for(y=0;y<15;++y)for(let I=0;I<l.length;I++){const U=l[I];B=r[U.i0],K=r[U.i1],dn(ln,K,B);const Q=$1(ln),X=(Q-U.restLength)/Q;Mn(B,B,ln,.5*X),Mn(K,K,ln,-.5*X)}for(y=0;y<=m;++y)r[y]=[o[y][0],o[y][1],o[y][2]];for(y=0;y<i.length;y++)i[y]=[0,0,0];for(y=0;y<c.length;y++){v=c[y][0],g=c[y][1],$=c[y][2];const I=r[v],U=r[g],Q=r[$];B=[0,0,0],dn(B,I,U),K=[0,0,0],dn(K,I,Q);const X=[0,0,0];z1(X,B,K),$n(X,X),an(i[v],i[v],X),an(i[g],i[g],X),an(i[$],i[$],X)}for(y=0;y<i.length;y++)$n(i[y],i[y]);const ot=r.reduce((I,U)=>(U.forEach(Q=>{I.push(Q)}),I),[]),lt=i.reduce((I,U)=>(U.forEach(Q=>{I.push(Q)}),I),[]);nn(Sn(_.vertices.position.data)).data=new Float32Array(ot),nn(Sn(_.vertices.normal.data)).data=new Float32Array(lt),A++,q=n.width=n.clientWidth,k=n.height=n.clientHeight,s.tick(),nn(_.bindingResources).view=s.view(),nn(_.bindingResources).projection=Mt([],Math.PI/4,q/k,.01,1e3),t.submit(V),requestAnimationFrame(Z)}const N=new Image;N.src="../../assets/cloth.png",await N.decode();const on={texture:{size:[N.width,N.height],generateMipmap:!0,sources:[{image:N}]},sampler:{minFilter:"linear",mipmapFilter:"linear",addressModeU:"repeat",addressModeV:"repeat"}};nn(_.bindingResources).texture=on,Z()})();
//# sourceMappingURL=cloth.html-69231b47.js.map
