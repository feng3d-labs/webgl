{"version":3,"file":"sampler_object.html-2ee0a925.js","sources":["../../../../examples/src/WebGL2Samples/sampler_object.ts"],"sourcesContent":["import { CanvasContext, RenderPass, RenderPipeline, Sampler, Texture, VertexAttributes } from \"@feng3d/render-api\";\nimport { WebGL } from \"@feng3d/webgl\";\n\nimport { getShaderSource, loadImage } from \"./utility\";\n\nconst canvas = document.createElement(\"canvas\");\ncanvas.id = \"glcanvas\";\ncanvas.width = Math.min(window.innerWidth, window.innerHeight);\ncanvas.height = canvas.width;\ndocument.body.appendChild(canvas);\n\nconst rc: CanvasContext = { canvasId: \"glcanvas\", webGLcontextId: \"webgl2\" };\nconst webgl = new WebGL(rc);\n\n// -- Initialize program\n\nconst program: RenderPipeline = {\n    vertex: { code: getShaderSource(\"vs\") }, fragment: { code: getShaderSource(\"fs\") },\n};\n\n// -- Initialize buffer\n\nconst positions = new Float32Array([\n    -1.0, -1.0,\n    1.0, -1.0,\n    1.0, 1.0,\n    1.0, 1.0,\n    -1.0, 1.0,\n    -1.0, -1.0\n]);\n\nconst texcoords = new Float32Array([\n    0.0, 1.0,\n    1.0, 1.0,\n    1.0, 0.0,\n    1.0, 0.0,\n    0.0, 0.0,\n    0.0, 1.0\n]);\n\n// -- Initialize vertex array\n\nconst vertexArray: { vertices?: VertexAttributes } = {\n    vertices: {\n        position: { data: positions, format: \"float32x2\" },\n        textureCoordinates: { data: texcoords, format: \"float32x2\" },\n    },\n};\n\n// -- Initialize samplers\n\nconst samplerA: Sampler = {\n    minFilter: \"nearest\", magFilter: \"nearest\", mipmapFilter: \"nearest\",\n    addressModeU: \"clamp-to-edge\", addressModeV: \"clamp-to-edge\", addressModeW: \"clamp-to-edge\",\n    lodMinClamp: -1000.0, lodMaxClamp: 1000.0,\n};\nconst samplerB: Sampler = {\n    minFilter: \"linear\", magFilter: \"linear\", mipmapFilter: \"linear\",\n    addressModeU: \"clamp-to-edge\", addressModeV: \"clamp-to-edge\", addressModeW: \"clamp-to-edge\",\n    lodMinClamp: -1000.0, lodMaxClamp: 1000.0,\n};\n\n// -- Load texture then render\n\nconst imageUrl = \"../../assets/img/Di-3d.png\";\nlet texture: Texture;\nloadImage(imageUrl, function (image)\n{\n    texture = {\n        size: [image.width, image.height],\n        sources: [{ image, mipLevel: 0 }],\n        format: \"rgba8unorm\",\n        generateMipmap: true,\n    };\n\n    render();\n});\n\nfunction render()\n{\n    const matrix = new Float32Array([\n        0.8, 0.0, 0.0, 0.0,\n        0.0, 0.8, 0.0, 0.0,\n        0.0, 0.0, 0.8, 0.0,\n        0.0, 0.0, 0.0, 1.0\n    ]);\n\n    const rp: RenderPass = {\n        descriptor: { colorAttachments: [{ clearValue: [0.0, 0.0, 0.0, 1.0], loadOp: \"clear\" }] },\n        renderObjects: [{\n            pipeline: program,\n            bindingResources: {\n                mvp: matrix,\n                materialDiffuse0: { texture, sampler: samplerA },\n                materialDiffuse1: { texture, sampler: samplerB },\n            },\n            geometry: {\n                primitive: { topology: \"triangle-list\" },\n                vertices: vertexArray.vertices,\n                draw: { __type__: \"DrawVertex\", vertexCount: 6, instanceCount: 1 },\n            }\n        }],\n    };\n\n    webgl.submit({ commandEncoders: [{ passEncoders: [rp] }] });\n\n    // Cleanup\n    webgl.deleteSampler(samplerA);\n    webgl.deleteSampler(samplerB);\n    webgl.deleteTexture(texture);\n    webgl.deleteProgram(program);\n}"],"names":["canvas","rc","webgl","WebGL","program","getShaderSource","positions","texcoords","vertexArray","samplerA","samplerB","imageUrl","texture","loadImage","image","render","matrix","rp"],"mappings":"6IAKA,MAAMA,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,GAAK,WACZA,EAAO,MAAQ,KAAK,IAAI,OAAO,WAAY,OAAO,WAAW,EAC7DA,EAAO,OAASA,EAAO,MACvB,SAAS,KAAK,YAAYA,CAAM,EAEhC,MAAMC,EAAoB,CAAE,SAAU,WAAY,eAAgB,QAAS,EACrEC,EAAQ,IAAIC,EAAMF,CAAE,EAIpBG,EAA0B,CAC5B,OAAQ,CAAE,KAAMC,EAAgB,IAAI,CAAE,EAAG,SAAU,CAAE,KAAMA,EAAgB,IAAI,CAAE,CACrF,EAIMC,EAAY,IAAI,aAAa,CAC/B,GAAM,GACN,EAAK,GACL,EAAK,EACL,EAAK,EACL,GAAM,EACN,GAAM,EACV,CAAC,EAEKC,EAAY,IAAI,aAAa,CAC/B,EAAK,EACL,EAAK,EACL,EAAK,EACL,EAAK,EACL,EAAK,EACL,EAAK,CACT,CAAC,EAIKC,EAA+C,CACjD,SAAU,CACN,SAAU,CAAE,KAAMF,EAAW,OAAQ,WAAY,EACjD,mBAAoB,CAAE,KAAMC,EAAW,OAAQ,WAAY,CAC/D,CACJ,EAIME,EAAoB,CACtB,UAAW,UAAW,UAAW,UAAW,aAAc,UAC1D,aAAc,gBAAiB,aAAc,gBAAiB,aAAc,gBAC5E,YAAa,KAAS,YAAa,GACvC,EACMC,EAAoB,CACtB,UAAW,SAAU,UAAW,SAAU,aAAc,SACxD,aAAc,gBAAiB,aAAc,gBAAiB,aAAc,gBAC5E,YAAa,KAAS,YAAa,GACvC,EAIMC,EAAW,6BACjB,IAAIC,EACJC,EAAUF,EAAU,SAAUG,EAC9B,CACcF,EAAA,CACN,KAAM,CAACE,EAAM,MAAOA,EAAM,MAAM,EAChC,QAAS,CAAC,CAAE,MAAAA,EAAO,SAAU,EAAG,EAChC,OAAQ,aACR,eAAgB,EAAA,EAGbC,GACX,CAAC,EAED,SAASA,GACT,CACU,MAAAC,EAAS,IAAI,aAAa,CAC5B,GAAK,EAAK,EAAK,EACf,EAAK,GAAK,EAAK,EACf,EAAK,EAAK,GAAK,EACf,EAAK,EAAK,EAAK,CAAA,CAClB,EAEKC,EAAiB,CACnB,WAAY,CAAE,iBAAkB,CAAC,CAAE,WAAY,CAAC,EAAK,EAAK,EAAK,CAAG,EAAG,OAAQ,OAAS,CAAA,CAAE,EACxF,cAAe,CAAC,CACZ,SAAUb,EACV,iBAAkB,CACd,IAAKY,EACL,iBAAkB,CAAE,QAAAJ,EAAS,QAASH,CAAS,EAC/C,iBAAkB,CAAE,QAAAG,EAAS,QAASF,CAAS,CACnD,EACA,SAAU,CACN,UAAW,CAAE,SAAU,eAAgB,EACvC,SAAUF,EAAY,SACtB,KAAM,CAAE,SAAU,aAAc,YAAa,EAAG,cAAe,CAAE,CACrE,CAAA,CACH,CAAA,EAGCN,EAAA,OAAO,CAAE,gBAAiB,CAAC,CAAE,aAAc,CAACe,CAAE,EAAG,CAAA,CAAG,EAG1Df,EAAM,cAAcO,CAAQ,EAC5BP,EAAM,cAAcQ,CAAQ,EAC5BR,EAAM,cAAcU,CAAO,EAC3BV,EAAM,cAAcE,CAAO,CAC/B"}