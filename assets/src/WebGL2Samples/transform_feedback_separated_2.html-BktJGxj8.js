import"../../modulepreload-polyfill-B5Qt9EMX.js";import{g as u}from"../../utility-BL6jGTgT.js";import{W as P,r as w}from"../../WebGL-lLSa4FVc.js";(function(){const a=document.createElement("canvas");a.id="glcanvas",a.width=Math.min(window.innerWidth,window.innerHeight),a.height=a.width,document.body.appendChild(a);const O={canvasId:"glcanvas",webGLcontextId:"webgl2",webGLContextAttributes:{antialias:!1}},h=new P(O);a.addEventListener("webglcontextlost",function(e){e.preventDefault()},!1);const r=1e3,F=-1,y=Date.now();let o=0;const[T,L]=E(),c=new Float32Array(r*2),d=new Float32Array(r*2),_=new Float32Array(r),A=new Float32Array(r),b=new Float32Array(r);for(let e=0;e<r;++e)c[e*2]=0,c[e*2+1]=0,d[e*2]=0,d[e*2+1]=0,_[e]=0,A[e]=0,b[e]=e;const i=0,l=1,m=2,f=3,I=4,C=5,n=[],g=[],t=new Array(n.length);for(let e=0;e<2;++e)t[e]=new Array(C),t[e][i]=c.slice(),t[e][l]=d.slice(),t[e][m]=_.slice(),t[e][f]=A.slice(),t[e][I]=b,n[e]=[],n[e][0]={vertices:{a_position:{data:t[e][i],format:"float32x2"},a_velocity:{data:t[e][l],format:"float32x2"},a_spawntime:{data:t[e][m],format:"float32"},a_lifetime:{data:t[e][f],format:"float32"},a_ID:{data:t[e][I],format:"float32"}}},n[e][1]={vertices:{a_position:{data:t[e][i],format:"float32x2"}}},g[e]={bindBuffers:[{index:0,data:t[e][i]},{index:1,data:t[e][l]},{index:2,data:t[e][m]},{index:3,data:t[e][f]}]};function E(){const e={vertex:{code:u("vs-emit")},transformFeedbackVaryings:{varyings:["v_position","v_velocity","v_spawntime","v_lifetime"],bufferMode:"SEPARATE_ATTRIBS"}},v={vertex:{code:u("vs-draw")},fragment:{code:u("fs-draw"),targets:[{blend:{color:{srcFactor:"src-alpha",dstFactor:"one"},alpha:{srcFactor:"src-alpha",dstFactor:"one"}}}]},primitive:{topology:"point-list"}};return[e,v]}const s={pipeline:T,vertices:null,transformFeedback:null,uniforms:{u_acceleration:{value:[0,F]}},draw:{__type__:"DrawVertex",vertexCount:r}},p={viewport:{x:0,y:0,width:a.width,height:a.height-10},pipeline:L,bindingResources:{u_color:{value:[0,1,1,1]}},draw:{__type__:"DrawVertex",vertexCount:r}},N={commandEncoders:[{passEncoders:[{__type__:"TransformFeedbackPass",transformFeedbackObjects:[s]},{descriptor:{colorAttachments:[{clearValue:[0,0,0,1],loadOp:"clear"}]},renderPassObjects:[p]}]}]};function S(){const e=Date.now()-y,v=(o+1)%2;s.vertices=n[o][0].vertices,s.transformFeedback=g[v],w(s.uniforms).u_time={value:e},o=(o+1)%2}function x(){S(),w(p).vertices=n[o][1].vertices,w(p).indices=n[o][1].indices,h.submit(N),requestAnimationFrame(x)}requestAnimationFrame(x)})();
//# sourceMappingURL=transform_feedback_separated_2.html-BktJGxj8.js.map
