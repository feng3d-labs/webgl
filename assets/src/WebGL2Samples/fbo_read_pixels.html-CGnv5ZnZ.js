import"../../modulepreload-polyfill-B5Qt9EMX.js";import{g as p}from"../../utility-BL6jGTgT.js";import{W as f}from"../../WebGL-lLSa4FVc.js";const s=document.createElement("canvas");s.id="glcanvas";s.width=Math.min(window.innerWidth,window.innerHeight);s.height=s.width;document.body.appendChild(s);const h={canvasId:"glcanvas",webGLcontextId:"webgl2"},r=new f(h),e={x:s.width,y:s.height},t={RED:0,GREEN:1,BLUE:2,MAX:3},n=new Array(t.MAX);n[t.RED]={x:e.x/2,y:0,z:e.x/2,w:e.y/2};n[t.GREEN]={x:e.x/2,y:e.y/2,z:e.x/2,w:e.y/2};n[t.BLUE]={x:0,y:e.y/2,z:e.x/2,w:e.y/2};const u={vertex:{code:p("vs-multiple-output")},fragment:{code:p("fs-multiple-output")},primitive:{topology:"triangle-list"}},y={vertex:{code:p("vs-layer")},fragment:{code:p("fs-layer")}},x=new Float32Array([-1,-1,1,-1,1,1,1,1,-1,1,-1,-1]),b=new Float32Array([0,0,1,0,1,1,1,1,0,1,0,0]),A={vertices:{position:{data:x,format:"float32x2"}}},E={vertices:{position:{data:x,format:"float32x2"},textureCoordinates:{data:b,format:"float32x2"}}},o=16,a=16,c={descriptor:{dimension:"2d-array",size:[o,a,3],format:"rgba8unorm"}},L={lodMinClamp:0,lodMaxClamp:0,minFilter:"nearest",magFilter:"nearest"},l={colorAttachments:[{view:{texture:c,baseMipLevel:0,baseArrayLayer:t.RED}},{view:{texture:c,baseMipLevel:0,baseArrayLayer:t.GREEN}},{view:{texture:c,baseMipLevel:0,baseArrayLayer:t.BLUE}}]},v=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),R={descriptor:l,renderPassObjects:[{viewport:{x:0,y:0,width:o,height:a},pipeline:u,bindingResources:{mvp:{value:v}},vertices:A.vertices,draw:{__type__:"DrawVertex",vertexCount:6}}]},g=[],z={descriptor:{colorAttachments:[{clearValue:[0,0,0,1],loadOp:"clear"}]},renderPassObjects:g},w={pipeline:y,bindingResources:{mvp:{value:v},diffuse:{texture:c,sampler:L},layer:{value:0}},vertices:E.vertices,draw:{__type__:"DrawVertex",vertexCount:6}};for(let i=0;i<t.MAX;++i)g.push({...w,viewport:{x:n[i].x,y:n[i].y,width:n[i].z,height:n[i].w},bindingResources:{...w.bindingResources,layer:{value:i}}});r.submit({commandEncoders:[{passEncoders:[R,z]}]});const m=new Uint8Array(o*a*4*3);let d=r.readPixels({textureView:l.colorAttachments[0].view,origin:[0,0],copySize:[o,a]});m.set(new Uint8Array(d.buffer),0);d=r.readPixels({textureView:l.colorAttachments[1].view,origin:[0,0],copySize:[o,a]});m.set(new Uint8Array(d.buffer),o*a*4);d=r.readPixels({textureView:l.colorAttachments[2].view,origin:[0,0],copySize:[o,a]});m.set(new Uint8Array(d.buffer),o*a*4*2);console.log(m);r.deleteFramebuffer(l);r.deleteTexture(c);r.deleteProgram(u);r.deleteProgram(y);
//# sourceMappingURL=fbo_read_pixels.html-CGnv5ZnZ.js.map
