{"version":3,"file":"draw_instanced_ubo.html-9373bd09.js","sources":["../../../../examples/src/WebGL2Samples/draw_instanced_ubo.ts"],"sourcesContent":["import { CanvasContext, RenderPass, RenderPipeline } from \"@feng3d/render-api\";\nimport { WebGL } from \"@feng3d/webgl\";\nimport { getShaderSource } from \"./utility\";\n\nconst canvas = document.createElement(\"canvas\");\ncanvas.id = \"glcanvas\";\ncanvas.width = window.innerWidth;\ncanvas.height = window.innerHeight;\ndocument.body.appendChild(canvas);\n\nconst rc: CanvasContext = { canvasId: \"glcanvas\", webGLcontextId: \"webgl2\" };\nconst webgl = new WebGL(rc);\n\n// -- Init program\nconst program: RenderPipeline = { vertex: { code: getShaderSource(\"vs\") }, fragment: { code: getShaderSource(\"fs\") } };\n\n// -- Init Buffer\nconst vertices = new Float32Array([\n    -0.3, -0.5,\n    0.3, -0.5,\n    0.0, 0.5\n]);\n\nconst transforms = {\n    MVP: [\n        new Float32Array([\n            1.0, 0.0, 0.0, 0.0,\n            0.0, 1.0, 0.0, 0.0,\n            0.0, 0.0, 1.0, 0.0,\n            -0.5, 0.0, 0.0, 1.0,\n        ]),\n        new Float32Array([\n            1.0, 0.0, 0.0, 0.0,\n            0.0, 1.0, 0.0, 0.0,\n            0.0, 0.0, 1.0, 0.0,\n            0.5, 0.0, 0.0, 1.0\n        ]),\n    ]\n};\n\nconst materials = {\n    Diffuse: [\n        [1.0, 0.5, 0.0, 1.0],\n        [0.0, 0.5, 1.0, 1.0],\n    ]\n};\n\n// -- Render\nconst rp: RenderPass = {\n    descriptor: { colorAttachments: [{ clearValue: [0, 0, 0, 1], loadOp: \"clear\" }] },\n    renderPassObjects: [{\n        pipeline: program,\n        bindingResources: {\n            Transform: transforms,\n            Material: materials,\n        },\n        vertices: {\n            pos: { data: vertices, format: \"float32x2\" },\n        },\n        draw: { __type__: \"DrawVertex\", vertexCount: 3, instanceCount: 2 },\n    }]\n};\n\nwebgl.submit({ commandEncoders: [{ passEncoders: [rp] }] });\n\n// -- Delete WebGL resources\n// webgl.deleteBuffer(getIGLBuffer(transforms));\n// webgl.deleteBuffer(getIGLBuffer(materials));\nwebgl.deleteProgram(program);\n"],"names":["canvas","rc","webgl","WebGL","program","getShaderSource","vertices","transforms","materials","rp"],"mappings":"2IAIA,MAAMA,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,GAAK,WACZA,EAAO,MAAQ,OAAO,WACtBA,EAAO,OAAS,OAAO,YACvB,SAAS,KAAK,YAAYA,CAAM,EAEhC,MAAMC,EAAoB,CAAE,SAAU,WAAY,eAAgB,QAAS,EACrEC,EAAQ,IAAIC,EAAMF,CAAE,EAGpBG,EAA0B,CAAE,OAAQ,CAAE,KAAMC,EAAgB,IAAI,GAAK,SAAU,CAAE,KAAMA,EAAgB,IAAI,CAAI,CAAA,EAG/GC,EAAW,IAAI,aAAa,CAC9B,IAAM,IACN,GAAK,IACL,EAAK,EACT,CAAC,EAEKC,EAAa,CACf,IAAK,CACD,IAAI,aAAa,CACb,EAAK,EAAK,EAAK,EACf,EAAK,EAAK,EAAK,EACf,EAAK,EAAK,EAAK,EACf,IAAM,EAAK,EAAK,CAAA,CACnB,EACD,IAAI,aAAa,CACb,EAAK,EAAK,EAAK,EACf,EAAK,EAAK,EAAK,EACf,EAAK,EAAK,EAAK,EACf,GAAK,EAAK,EAAK,CAAA,CAClB,CACL,CACJ,EAEMC,EAAY,CACd,QAAS,CACL,CAAC,EAAK,GAAK,EAAK,CAAG,EACnB,CAAC,EAAK,GAAK,EAAK,CAAG,CACvB,CACJ,EAGMC,EAAiB,CACnB,WAAY,CAAE,iBAAkB,CAAC,CAAE,WAAY,CAAC,EAAG,EAAG,EAAG,CAAC,EAAG,OAAQ,OAAS,CAAA,CAAE,EAChF,kBAAmB,CAAC,CAChB,SAAUL,EACV,iBAAkB,CACd,UAAWG,EACX,SAAUC,CACd,EACA,SAAU,CACN,IAAK,CAAE,KAAMF,EAAU,OAAQ,WAAY,CAC/C,EACA,KAAM,CAAE,SAAU,aAAc,YAAa,EAAG,cAAe,CAAE,CAAA,CACpE,CACL,EAEAJ,EAAM,OAAO,CAAE,gBAAiB,CAAC,CAAE,aAAc,CAACO,CAAE,EAAG,CAAA,CAAG,EAK1DP,EAAM,cAAcE,CAAO"}