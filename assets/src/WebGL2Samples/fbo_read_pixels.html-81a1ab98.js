import"../../modulepreload-polyfill-3cfb730f.js";import{g as m}from"../../utility-e972c1ee.js";import{W as f}from"../../WebGL-b4686ab5.js";const s=document.createElement("canvas");s.id="glcanvas";s.width=Math.min(window.innerWidth,window.innerHeight);s.height=s.width;document.body.appendChild(s);const h={canvasId:"glcanvas",webGLcontextId:"webgl2"},r=new f(h),e={x:s.width,y:s.height},t={RED:0,GREEN:1,BLUE:2,MAX:3},n=new Array(t.MAX);n[t.RED]={x:e.x/2,y:0,z:e.x/2,w:e.y/2};n[t.GREEN]={x:e.x/2,y:e.y/2,z:e.x/2,w:e.y/2};n[t.BLUE]={x:0,y:e.y/2,z:e.x/2,w:e.y/2};const y={vertex:{code:m("vs-multiple-output")},fragment:{code:m("fs-multiple-output")}},u={vertex:{code:m("vs-layer")},fragment:{code:m("fs-layer")}},x=new Float32Array([-1,-1,1,-1,1,1,1,1,-1,1,-1,-1]),b=new Float32Array([0,0,1,0,1,1,1,1,0,1,0,0]),A={vertices:{position:{data:x,format:"float32x2"}}},E={vertices:{position:{data:x,format:"float32x2"},textureCoordinates:{data:b,format:"float32x2"}}},o=16,i=16,c={dimension:"2d-array",size:[o,i,3],format:"rgba8unorm"},L={lodMinClamp:0,lodMaxClamp:0,minFilter:"nearest",magFilter:"nearest"},l={colorAttachments:[{view:{texture:c,baseMipLevel:0,baseArrayLayer:t.RED}},{view:{texture:c,baseMipLevel:0,baseArrayLayer:t.GREEN}},{view:{texture:c,baseMipLevel:0,baseArrayLayer:t.BLUE}}]},g=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),R={descriptor:l,renderObjects:[{viewport:{x:0,y:0,width:o,height:i},pipeline:y,bindingResources:{mvp:g},geometry:{primitive:{topology:"triangle-list"},vertices:A.vertices,draw:{__type__:"DrawVertex",vertexCount:6}}}]},v=[],z={descriptor:{colorAttachments:[{clearValue:[0,0,0,1],loadOp:"clear"}]},renderObjects:v},w={pipeline:u,bindingResources:{mvp:g,diffuse:{texture:c,sampler:L},layer:0},geometry:{vertices:E.vertices,draw:{__type__:"DrawVertex",vertexCount:6}}};for(let a=0;a<t.MAX;++a)v.push({...w,viewport:{x:n[a].x,y:n[a].y,width:n[a].z,height:n[a].w},bindingResources:{...w.bindingResources,layer:a}});r.submit({commandEncoders:[{passEncoders:[R,z]}]});const p=new Uint8Array(o*i*4*3);let d=r.readPixels({textureView:l.colorAttachments[0].view,origin:[0,0],copySize:[o,i]});p.set(new Uint8Array(d.buffer),0);d=r.readPixels({textureView:l.colorAttachments[1].view,origin:[0,0],copySize:[o,i]});p.set(new Uint8Array(d.buffer),o*i*4);d=r.readPixels({textureView:l.colorAttachments[2].view,origin:[0,0],copySize:[o,i]});p.set(new Uint8Array(d.buffer),o*i*4*2);console.log(p);r.deleteFramebuffer(l);r.deleteTexture(c);r.deleteProgram(y);r.deleteProgram(u);
//# sourceMappingURL=fbo_read_pixels.html-81a1ab98.js.map
