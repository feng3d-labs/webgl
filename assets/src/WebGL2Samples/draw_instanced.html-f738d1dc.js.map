{"version":3,"file":"draw_instanced.html-f738d1dc.js","sources":["../../../../examples/src/WebGL2Samples/draw_instanced.ts"],"sourcesContent":["import { CanvasContext, RenderObject, RenderPipeline, VertexAttributes } from \"@feng3d/render-api\";\nimport { WebGL } from \"@feng3d/webgl\";\nimport { getShaderSource } from \"./utility\";\n\nconst canvas = document.createElement(\"canvas\");\ncanvas.id = \"glcanvas\";\ncanvas.width = window.innerWidth;\ncanvas.height = window.innerHeight;\ndocument.body.appendChild(canvas);\n\nconst renderingContext: CanvasContext = { canvasId: \"glcanvas\" };\nconst webgl = new WebGL(renderingContext);\n\nconst vertexPosBuffer = new Float32Array([-0.3, -0.5,\n    0.3, -0.5,\n    0.0, 0.5]);\nconst vertexColorBuffer = new Float32Array([\n    1.0, 0.5, 0.0,\n    0.0, 0.5, 1.0]);\n\nconst program: RenderPipeline = {\n    vertex: { code: getShaderSource(\"vs\") },\n    fragment: { code: getShaderSource(\"fs\"), targets: [{ blend: {} }] }\n};\n\nconst vertexArray: { vertices?: VertexAttributes } = {\n    vertices: {\n        pos: { data: vertexPosBuffer, format: \"float32x2\" },\n        color: { data: vertexColorBuffer, format: \"float32x3\", stepMode: \"instance\" },\n    },\n};\n\nconst renderObject: RenderObject = {\n    bindingResources: {},\n    geometry: {\n        primitive: { topology: \"triangle-list\" },\n        vertices: vertexArray.vertices,\n        draw: { __type__: \"DrawVertex\", vertexCount: 3, instanceCount: 2 },\n    },\n    pipeline: program\n};\n\ncanvas.width = window.innerWidth;\ncanvas.height = window.innerHeight;\n\nwebgl.submit({\n    commandEncoders: [{\n        passEncoders: [\n            {\n                descriptor: {\n                    colorAttachments: [{\n                        clearValue: [0.0, 0.0, 0.0, 1.0],\n                        loadOp: \"clear\",\n                    }],\n                },\n                renderObjects: [renderObject]\n            }\n        ]\n    }]\n});\n\n// -- Delete WebGL resources\nwebgl.deleteProgram(program);\n"],"names":["canvas","renderingContext","webgl","WebGL","vertexPosBuffer","vertexColorBuffer","program","getShaderSource","vertexArray","renderObject"],"mappings":"2IAIA,MAAMA,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,GAAK,WACZA,EAAO,MAAQ,OAAO,WACtBA,EAAO,OAAS,OAAO,YACvB,SAAS,KAAK,YAAYA,CAAM,EAEhC,MAAMC,EAAkC,CAAE,SAAU,YAC9CC,EAAQ,IAAIC,EAAMF,CAAgB,EAElCG,EAAkB,IAAI,aAAa,CAAC,IAAM,IAC5C,GAAK,IACL,EAAK,EAAG,CAAC,EACPC,EAAoB,IAAI,aAAa,CACvC,EAAK,GAAK,EACV,EAAK,GAAK,CAAG,CAAC,EAEZC,EAA0B,CAC5B,OAAQ,CAAE,KAAMC,EAAgB,IAAI,CAAE,EACtC,SAAU,CAAE,KAAMA,EAAgB,IAAI,EAAG,QAAS,CAAC,CAAE,MAAO,CAAC,CAAA,CAAG,CAAE,CACtE,EAEMC,EAA+C,CACjD,SAAU,CACN,IAAK,CAAE,KAAMJ,EAAiB,OAAQ,WAAY,EAClD,MAAO,CAAE,KAAMC,EAAmB,OAAQ,YAAa,SAAU,UAAW,CAChF,CACJ,EAEMI,EAA6B,CAC/B,iBAAkB,CAAC,EACnB,SAAU,CACN,UAAW,CAAE,SAAU,eAAgB,EACvC,SAAUD,EAAY,SACtB,KAAM,CAAE,SAAU,aAAc,YAAa,EAAG,cAAe,CAAE,CACrE,EACA,SAAUF,CACd,EAEAN,EAAO,MAAQ,OAAO,WACtBA,EAAO,OAAS,OAAO,YAEvBE,EAAM,OAAO,CACT,gBAAiB,CAAC,CACd,aAAc,CACV,CACI,WAAY,CACR,iBAAkB,CAAC,CACf,WAAY,CAAC,EAAK,EAAK,EAAK,CAAG,EAC/B,OAAQ,OAAA,CACX,CACL,EACA,cAAe,CAACO,CAAY,CAChC,CACJ,CAAA,CACH,CACL,CAAC,EAGDP,EAAM,cAAcI,CAAO"}