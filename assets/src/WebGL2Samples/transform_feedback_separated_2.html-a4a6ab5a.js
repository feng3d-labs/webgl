import"../../modulepreload-polyfill-3cfb730f.js";import{g as _}from"../../utility-e972c1ee.js";import{W as P}from"../../WebGL-b4686ab5.js";import{r as v}from"../../index-1ea29437.js";(function(){const a=document.createElement("canvas");a.id="glcanvas",a.width=Math.min(window.innerWidth,window.innerHeight),a.height=a.width,document.body.appendChild(a);const O={canvasId:"glcanvas",webGLcontextId:"webgl2",webGLContextAttributes:{antialias:!1}},h=new P(O);a.addEventListener("webglcontextlost",function(t){t.preventDefault()},!1);const r=1e3,F=-1,y=Date.now();let o=0;const[T,L]=E(),c=new Float32Array(r*2),d=new Float32Array(r*2),u=new Float32Array(r),A=new Float32Array(r),b=new Float32Array(r);for(let t=0;t<r;++t)c[t*2]=0,c[t*2+1]=0,d[t*2]=0,d[t*2+1]=0,u[t]=0,A[t]=0,b[t]=t;const i=0,l=1,m=2,f=3,I=4,C=5,n=[],g=[],e=new Array(n.length);for(let t=0;t<2;++t)e[t]=new Array(C),e[t][i]=c.slice(),e[t][l]=d.slice(),e[t][m]=u.slice(),e[t][f]=A.slice(),e[t][I]=b,n[t]=[],n[t][0]={vertices:{a_position:{data:e[t][i],format:"float32x2"},a_velocity:{data:e[t][l],format:"float32x2"},a_spawntime:{data:e[t][m],format:"float32"},a_lifetime:{data:e[t][f],format:"float32"},a_ID:{data:e[t][I],format:"float32"}}},n[t][1]={vertices:{a_position:{data:e[t][i],format:"float32x2"}}},g[t]={bindBuffers:[{index:0,data:e[t][i]},{index:1,data:e[t][l]},{index:2,data:e[t][m]},{index:3,data:e[t][f]}]};function E(){const t={vertex:{code:_("vs-emit")},transformFeedbackVaryings:{varyings:["v_position","v_velocity","v_spawntime","v_lifetime"],bufferMode:"SEPARATE_ATTRIBS"}},w={vertex:{code:_("vs-draw")},fragment:{code:_("fs-draw"),targets:[{blend:{color:{srcFactor:"src-alpha",dstFactor:"one"},alpha:{srcFactor:"src-alpha",dstFactor:"one"}}}]},primitive:{topology:"point-list"}};return[t,w]}const s={pipeline:T,vertices:null,transformFeedback:null,uniforms:{u_acceleration:[0,F]},draw:{__type__:"DrawVertex",vertexCount:r}},p={viewport:{x:0,y:0,width:a.width,height:a.height-10},pipeline:L,bindingResources:{u_color:[0,1,1,1]},draw:{__type__:"DrawVertex",vertexCount:r}},N={commandEncoders:[{passEncoders:[{__type__:"TransformFeedbackPass",transformFeedbackObjects:[s]},{descriptor:{colorAttachments:[{clearValue:[0,0,0,1],loadOp:"clear"}]},renderPassObjects:[p]}]}]};function S(){const t=Date.now()-y,w=(o+1)%2;s.vertices=n[o][0].vertices,s.transformFeedback=g[w],v(s.uniforms).u_time=t,o=(o+1)%2}function x(){S(),v(p).vertices=n[o][1].vertices,v(p).indices=n[o][1].indices,h.submit(N),requestAnimationFrame(x)}requestAnimationFrame(x)})();
//# sourceMappingURL=transform_feedback_separated_2.html-a4a6ab5a.js.map
