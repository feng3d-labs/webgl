{"version":3,"file":"buffer_copy.html-Cz1BFdfr.js","sources":["../../../../examples/src/WebGL2Samples/buffer_copy.ts"],"sourcesContent":["import { Buffer, CanvasContext, CopyBufferToBuffer, RenderPass, RenderPipeline, VertexAttributes } from '@feng3d/render-api';\nimport { WebGL } from '@feng3d/webgl';\nimport { getShaderSource } from './utility';\n\n(function ()\n{\n    // -- Init Canvas\n    const canvas = document.createElement('canvas');\n\n    canvas.id = 'glcanvas';\n    canvas.width = Math.min(window.innerWidth, window.innerHeight);\n    canvas.height = canvas.width;\n    document.body.appendChild(canvas);\n\n    // -- Init WebGL Context\n    const rc: CanvasContext = { canvasId: 'glcanvas', webGLcontextId: 'webgl2' };\n    const webgl = new WebGL(rc);\n\n    // -- Init Program\n    const program: RenderPipeline = {\n        vertex: { code: getShaderSource('vs') }, fragment: { code: getShaderSource('fs') },\n        primitive: { topology: 'triangle-list' },\n    };\n\n    // -- Init Buffer\n    const vertices = new Float32Array([\n        -1.0, -1.0,\n        1.0, -1.0,\n        1.0, 1.0,\n        1.0, 1.0,\n        -1.0, 1.0,\n        -1.0, -1.0,\n    ]);\n\n    const vertexPosBufferDst = new Float32Array(vertices.length);\n\n    const cb: CopyBufferToBuffer = {\n        __type__: 'CopyBufferToBuffer',\n        source: vertices,\n        destination: vertexPosBufferDst,\n    };\n\n    // -- Init Vertex Array\n    const vertexArray: { vertices?: VertexAttributes } = {\n        vertices: {\n            pos: { data: vertexPosBufferDst, format: 'float32x2' },\n        },\n    };\n\n    // -- Render\n    const rp: RenderPass = {\n        descriptor: { colorAttachments: [{ clearValue: [0.0, 0.0, 0.0, 1.0], loadOp: 'clear' }] },\n        renderPassObjects: [{\n            pipeline: program,\n            vertices: vertexArray.vertices,\n            draw: { __type__: 'DrawVertex', vertexCount: 6 },\n        }],\n    };\n\n    webgl.submit({ commandEncoders: [{ passEncoders: [cb, rp] }] });\n\n    // -- Delete WebGL resources\n    webgl.deleteBuffer(Buffer.getBuffer(vertices.buffer));\n    webgl.deleteProgram(program);\n})();\n"],"names":["canvas","rc","webgl","WebGL","program","getShaderSource","vertices","vertexPosBufferDst","cb","rp","Buffer"],"mappings":"mJAIC,UACD,CAEI,MAAMA,EAAS,SAAS,cAAc,QAAQ,EAE9CA,EAAO,GAAK,WACZA,EAAO,MAAQ,KAAK,IAAI,OAAO,WAAY,OAAO,WAAW,EAC7DA,EAAO,OAASA,EAAO,MACvB,SAAS,KAAK,YAAYA,CAAM,EAGhC,MAAMC,EAAoB,CAAE,SAAU,WAAY,eAAgB,QAAA,EAC5DC,EAAQ,IAAIC,EAAMF,CAAE,EAGpBG,EAA0B,CAC5B,OAAQ,CAAE,KAAMC,EAAgB,IAAI,CAAA,EAAK,SAAU,CAAE,KAAMA,EAAgB,IAAI,CAAA,EAC/E,UAAW,CAAE,SAAU,eAAA,CAAgB,EAIrCC,EAAW,IAAI,aAAa,CAC9B,GAAM,GACN,EAAK,GACL,EAAK,EACL,EAAK,EACL,GAAM,EACN,GAAM,EAAA,CACT,EAEKC,EAAqB,IAAI,aAAaD,EAAS,MAAM,EAErDE,EAAyB,CAC3B,SAAU,qBACV,OAAQF,EACR,YAAaC,CAAA,EAWXE,EAAiB,CACnB,WAAY,CAAE,iBAAkB,CAAC,CAAE,WAAY,CAAC,EAAK,EAAK,EAAK,CAAG,EAAG,OAAQ,OAAA,CAAS,CAAA,EACtF,kBAAmB,CAAC,CAChB,SAAUL,EACV,SAX6C,CACjD,SAAU,CACN,IAAK,CAAE,KAAMG,EAAoB,OAAQ,WAAA,CAAY,CACzD,EAQ0B,SACtB,KAAM,CAAE,SAAU,aAAc,YAAa,CAAA,CAAE,CAClD,CAAA,EAGLL,EAAM,OAAO,CAAE,gBAAiB,CAAC,CAAE,aAAc,CAACM,EAAIC,CAAE,CAAA,CAAG,EAAG,EAG9DP,EAAM,aAAaQ,EAAO,UAAUJ,EAAS,MAAM,CAAC,EACpDJ,EAAM,cAAcE,CAAO,CAC/B,GAAA"}