import"../../modulepreload-polyfill-3cfb730f.js";import{g as n}from"../../utility-e972c1ee.js";import{W as A}from"../../WebGL-b4686ab5.js";import{c as v,s as _}from"../../mat4-90bd9af0.js";import{c as b,s as C}from"../../vec3-5d562fd8.js";import"../../common-d8a29b8a.js";const a=document.createElement("canvas");a.id="glcanvas";a.width=window.innerWidth;a.height=window.innerHeight;document.body.appendChild(a);const U={canvasId:"glcanvas",webGLcontextId:"webgl2"},t=new A(U),r={x:a.width,y:a.height},i={LEFT:0,RIGHT:1,MAX:2},p=new Array(i.MAX);p[i.LEFT]={x:0,y:r.y-r.x/2-50,width:r.x/2,height:r.x/2};p[i.RIGHT]={x:r.x/2,y:r.y-r.x/2-50,width:r.x/2,height:r.x/2};const o={TEXTURE:0,TEXTURE_CENTROID:1,SPLASH:2,MAX:3},l=[{vertex:{code:n("vs-render")},fragment:{code:n("fs-render")}},{vertex:{code:n("vs-render-centroid")},fragment:{code:n("fs-render-centroid")}},{vertex:{code:n("vs-splash")},fragment:{code:n("fs-splash")}}],D=3,s=.1,x=new Float32Array([s*0,s*.8,s*-.8,s*-.4,Number(s),s*-.8]),F=new Float32Array([0,0,1]),I=new Float32Array([-1,-1,1,-1,1,1,1,1,-1,1,-1,-1]),S=new Float32Array([0,1,1,1,1,0,1,0,0,0,0,1]),T={x:a.width,y:a.height},c=[],m=[];for(let e=0;e<i.MAX;++e)c[e]={format:"rgba8unorm",size:[T.x,T.y]},m[e]={minFilter:"nearest",magFilter:"nearest"};const E={RENDERBUFFER:0,RENDERBUFFER_CENTROID:1,COLORBUFFER:2,COLORBUFFER_CENTROID:3},d=[{colorAttachments:[{view:{texture:c[0],baseMipLevel:0},clearValue:[0,0,0,1],loadOp:"clear"}],sampleCount:4},{colorAttachments:[{view:{texture:c[1],baseMipLevel:0},clearValue:[0,0,0,1],loadOp:"clear"}],sampleCount:4}],u=[{vertices:{position:{data:x,format:"float32x2"},data:{data:F,format:"float32"}}},{vertices:{position:{data:x,format:"float32x2"},data:{data:F,format:"float32"}}},{vertices:{position:{data:I,format:"float32x2"},texcoord:{data:S,format:"float32x2"}}}],f=[],g=v();for(let e=0;e<i.MAX;++e){const O={descriptor:d[e],renderObjects:[{pipeline:l[e],bindingResources:{MVP:g},geometry:{primitive:{topology:"triangle-list"},vertices:u[e].vertices,draw:{__type__:"DrawVertex",vertexCount:D}}}]};f.push(O)}const w=[],L={renderObjects:w},N={pipeline:l[o.SPLASH],geometry:{primitive:{topology:"triangle-list"},vertices:u[o.SPLASH].vertices,draw:{__type__:"DrawVertex",vertexCount:6}}},h=b(),R=.8/s;C(h,R,R,R);const y=v();_(y,g,h);for(let e=0;e<i.MAX;++e)w.push({...N,viewport:p[e],bindingResources:{MVP:y,diffuse:{texture:c[e],sampler:m[e]}},geometry:{draw:{__type__:"DrawVertex",vertexCount:6}}});f.push(L);t.submit({commandEncoders:[{passEncoders:f}]});t.deleteTexture(c[o.TEXTURE]);t.deleteTexture(c[o.TEXTURE_CENTROID]);t.deleteSampler(m[o.TEXTURE]);t.deleteSampler(m[o.TEXTURE_CENTROID]);t.deleteFramebuffer(d[E.RENDERBUFFER]);t.deleteFramebuffer(d[E.COLORBUFFER]);t.deleteFramebuffer(d[E.RENDERBUFFER_CENTROID]);t.deleteFramebuffer(d[E.COLORBUFFER_CENTROID]);t.deleteProgram(l[o.TEXTURE]);t.deleteProgram(l[o.TEXTURE_CENTROID]);t.deleteProgram(l[o.SPLASH]);
//# sourceMappingURL=glsl_centroid.html-65570766.js.map
