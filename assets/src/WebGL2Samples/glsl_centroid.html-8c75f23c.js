import"../../modulepreload-polyfill-3cfb730f.js";import{g as n}from"../../utility-e972c1ee.js";import{W as _}from"../../WebGL-b4686ab5.js";import{c as T,s as b}from"../../mat4-c54c6fc0.js";import{c as y,s as C}from"../../vec3-5d562fd8.js";import"../../common-d8a29b8a.js";const a=document.createElement("canvas");a.id="glcanvas";a.width=window.innerWidth;a.height=window.innerHeight;document.body.appendChild(a);const U={canvasId:"glcanvas",webGLcontextId:"webgl2"},t=new _(U),r={x:a.width,y:a.height},i={LEFT:0,RIGHT:1,MAX:2},R=new Array(i.MAX);R[i.LEFT]={x:0,y:r.y-r.x/2-50,width:r.x/2,height:r.x/2};R[i.RIGHT]={x:r.x/2,y:r.y-r.x/2-50,width:r.x/2,height:r.x/2};const o={TEXTURE:0,TEXTURE_CENTROID:1,SPLASH:2,MAX:3},l=[{vertex:{code:n("vs-render")},fragment:{code:n("fs-render")},primitive:{topology:"triangle-list"}},{vertex:{code:n("vs-render-centroid")},fragment:{code:n("fs-render-centroid")},primitive:{topology:"triangle-list"}},{vertex:{code:n("vs-splash")},fragment:{code:n("fs-splash")},primitive:{topology:"triangle-list"}}],D=3,s=.1,x=new Float32Array([s*0,s*.8,s*-.8,s*-.4,Number(s),s*-.8]),F=new Float32Array([0,0,1]),I=new Float32Array([-1,-1,1,-1,1,1,1,1,-1,1,-1,-1]),S=new Float32Array([0,1,1,1,1,0,1,0,0,0,0,1]),v={x:a.width,y:a.height},c=[],E=[];for(let e=0;e<i.MAX;++e)c[e]={format:"rgba8unorm",size:[v.x,v.y]},E[e]={minFilter:"nearest",magFilter:"nearest"};const m={RENDERBUFFER:0,RENDERBUFFER_CENTROID:1,COLORBUFFER:2,COLORBUFFER_CENTROID:3},d=[{colorAttachments:[{view:{texture:c[0],baseMipLevel:0},clearValue:[0,0,0,1],loadOp:"clear"}],sampleCount:4},{colorAttachments:[{view:{texture:c[1],baseMipLevel:0},clearValue:[0,0,0,1],loadOp:"clear"}],sampleCount:4}],u=[{vertices:{position:{data:x,format:"float32x2"},data:{data:F,format:"float32"}}},{vertices:{position:{data:x,format:"float32x2"},data:{data:F,format:"float32"}}},{vertices:{position:{data:I,format:"float32x2"},texcoord:{data:S,format:"float32x2"}}}],f=[],g=T();for(let e=0;e<i.MAX;++e){const A={descriptor:d[e],renderPassObjects:[{pipeline:l[e],bindingResources:{MVP:g},vertices:u[e].vertices,draw:{__type__:"DrawVertex",vertexCount:D}}]};f.push(A)}const w=[],L={renderPassObjects:w},N={pipeline:l[o.SPLASH],vertices:u[o.SPLASH].vertices,draw:{__type__:"DrawVertex",vertexCount:6}},h=y(),p=.8/s;C(h,p,p,p);const O=T();b(O,g,h);for(let e=0;e<i.MAX;++e)w.push({...N,viewport:R[e],bindingResources:{MVP:O,diffuse:{texture:c[e],sampler:E[e]}},draw:{__type__:"DrawVertex",vertexCount:6}});f.push(L);t.submit({commandEncoders:[{passEncoders:f}]});t.deleteTexture(c[o.TEXTURE]);t.deleteTexture(c[o.TEXTURE_CENTROID]);t.deleteSampler(E[o.TEXTURE]);t.deleteSampler(E[o.TEXTURE_CENTROID]);t.deleteFramebuffer(d[m.RENDERBUFFER]);t.deleteFramebuffer(d[m.COLORBUFFER]);t.deleteFramebuffer(d[m.RENDERBUFFER_CENTROID]);t.deleteFramebuffer(d[m.COLORBUFFER_CENTROID]);t.deleteProgram(l[o.TEXTURE]);t.deleteProgram(l[o.TEXTURE_CENTROID]);t.deleteProgram(l[o.SPLASH]);
//# sourceMappingURL=glsl_centroid.html-8c75f23c.js.map
