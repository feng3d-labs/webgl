class h{constructor(){this._parents=new Map}get value(){return this.track(),this._value}track(){if(!h.activeReactivity||!A)return;const e=h.activeReactivity;e&&this._parents.set(e,e._version)}trigger(){this._parents.forEach((e,r)=>{r._version===e&&(r.trigger(),r._children.set(this,this._value))}),this._parents.clear()}}function X(t){const e=A;A=!0;const r=t();return A=e,r}function Z(t){const e=A;A=!1;const r=t();return A=e,r}let A=!0;function $(t,e){e?y.push(t):x.push(t)}function G(t){F++;const e=t();if(!(--F>0))return y.length>0&&(y.forEach(r=>{r._children.forEach((n,s)=>{s._parents.set(r,r._version)}),r._children.clear()}),y.length=0),x.length>0&&(x.forEach(r=>{const n=h.activeReactivity;h.activeReactivity=null,r.runIfDirty(),h.activeReactivity=n}),x.length=0),e}let F=0;const x=[],y=[];class k extends h{constructor(e){super(),this.__v_isRef=!0,this._children=new Map,this._isDirty=!0,this._version=-1,this._func=e}get value(){return this.runIfDirty(),this.track(),this._value}trigger(){h.activeReactivity===this&&$(this,h.activeReactivity===this),super.trigger()}run(){X(()=>{const e=h.activeReactivity;h.activeReactivity=this,this._version++,this._value=this._func(this._value),h.activeReactivity=e})}runIfDirty(){this._isDirty=this._isDirty||this.isChildrenChanged(),this._isDirty&&(this._isDirty=!1,this.run())}isChildrenChanged(){if(this._children.size===0)return!1;let e=!1;const r=h.activeReactivity;return h.activeReactivity=null,this._children.forEach((n,s)=>{if(!e&&s.value!==n){e=!0;return}}),h.activeReactivity=r,e||this._children.forEach((n,s)=>{s._parents.set(this,this._version)}),this._children.clear(),e}}const tt=class L extends k{constructor(e){super(e),this._isEnable=!0,this.runIfDirty()}pause(){this._isEnable=!1}resume(){this._isEnable||(this._isEnable=!0,L.pausedQueueEffects.has(this)&&(L.pausedQueueEffects.delete(this),this.trigger()))}trigger(){G(()=>{super.trigger(),this._isEnable?$(this,h.activeReactivity===this):L.pausedQueueEffects.add(this)})}run(){this._isEnable?super.run():this._func(this._value)}};tt.pausedQueueEffects=new WeakSet;var d=(t=>(t.IS_REACTIVE="__v_isReactive",t.RAW="__v_raw",t.IS_REF="__v_isRef",t))(d||{}),b=(t=>(t[t.INVALID=0]="INVALID",t[t.COMMON=1]="COMMON",t[t.COLLECTION=2]="COLLECTION",t))(b||{}),f=(t=>(t.GET="get",t.HAS="has",t.ITERATE="iterate",t))(f||{}),E=(t=>(t.SET="set",t.ADD="add",t.DELETE="delete",t.CLEAR="clear",t))(E||{});const S=Symbol(""),j=Symbol(""),D=Symbol("");globalThis.__DEV__??(globalThis.__DEV__=!0);const Y=t=>t!==null&&typeof t=="object",T=Array.isArray,w=t=>typeof t=="symbol",et=t=>typeof t=="string",z=t=>et(t)&&t!=="NaN"&&t[0]!=="-"&&`${parseInt(t,10)}`===t,N=t=>q(t)==="[object Map]",V=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),W=(t,e)=>!Object.is(t,e);function rt(t){switch(t){case"Object":case"Array":return b.COMMON;case"Map":case"Set":case"WeakMap":case"WeakSet":return b.COLLECTION;default:return b.COMMON}}function nt(t){return Object.isExtensible(t)?rt(st(t)):b.INVALID}const q=t=>Object.prototype.toString.call(t),st=t=>q(t).slice(8,-1);function u(t){const e=t&&t[d.RAW];return e?u(e):t}function it(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}function ct(t,e){let r=o._targetMap.get(t);r||(r=new Map,o._targetMap.set(t,r));let n=r.get(e);return n||(n=new o(t,e),r.set(e,n)),n}class o extends h{constructor(e,r){super(),this._target=e,this._key=r,e instanceof Map||e instanceof WeakMap?this._value=e.get(r):e instanceof Set||e instanceof WeakSet?this._value=e.has(r):this._value=e[r]}get value(){return this.track(),this._value}set value(e){this._key==="length"?e=this._target.length:w(this._key)&&(e=~~this._value+1),e!==this._value&&(this.trigger(),this._value=e)}triggerIfChanged(){}static track(e,r,n){if(!h.activeReactivity)return;ct(e,n).track()}static trigger(e,r,n,s,i){const c=this._targetMap.get(e);if(!c)return;const a=l=>{l&&(l.value=s)};G(()=>{if(r===E.CLEAR)c.forEach(a);else{const l=T(e),_=l&&z(n);if(l&&n==="length"){const g=Number(s);c.forEach((v,I)=>{(I==="length"||I===D||!w(I)&&I>=g)&&a(v)})}else switch((n!==void 0||c.has(void 0))&&a(c.get(n)),_&&a(c.get(D)),r){case E.ADD:l?_&&a(c.get("length")):(a(c.get(S)),N(e)&&a(c.get(j)));break;case E.DELETE:l||(a(c.get(S)),N(e)&&a(c.get(j)));break;case E.SET:N(e)&&a(c.get(S));break}}})}}o._targetMap=new WeakMap;const at={__proto__:null,[Symbol.iterator](){return P(this,Symbol.iterator,p)},concat(...t){return m(this).concat(...t.map(e=>T(e)?m(e):e))},entries(){return P(this,"entries",t=>(t[1]=p(t[1]),t))},every(t,e){return R(this,"every",t,e,void 0,arguments)},filter(t,e){return R(this,"filter",t,e,r=>r.map(p),arguments)},find(t,e){return R(this,"find",t,e,p,arguments)},findIndex(t,e){return R(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return R(this,"findLast",t,e,p,arguments)},findLastIndex(t,e){return R(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return R(this,"forEach",t,e,void 0,arguments)},includes(...t){return K(this,"includes",t)},indexOf(...t){return K(this,"indexOf",t)},join(t){return m(this).join(t)},lastIndexOf(...t){return K(this,"lastIndexOf",t)},map(t,e){return R(this,"map",t,e,void 0,arguments)},pop(){return O(this,"pop")},push(...t){return O(this,"push",t)},reduce(t,...e){return B(this,"reduce",t,e)},reduceRight(t,...e){return B(this,"reduceRight",t,e)},shift(){return O(this,"shift")},some(t,e){return R(this,"some",t,e,void 0,arguments)},splice(...t){return O(this,"splice",t)},toReversed(){return m(this).toReversed()},toSorted(t){return m(this).toSorted(t)},toSpliced(...t){return m(this).toSpliced(...t)},unshift(...t){return O(this,"unshift",t)},values(){return P(this,"values",p)}};function P(t,e,r){const n=Q(t),s=n[e]();return n!==t&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=r(i.value)),i}),s}function Q(t){return o.track(t=u(t),f.ITERATE,D),t}function m(t){const e=u(t);return e===t?e:(o.track(e,f.ITERATE,D),e.map(p))}function R(t,e,r,n,s,i){const c=Q(t),a=c!==t,l=c[e];if(l!==Array.prototype[e]){const v=l.apply(t,i);return a?p(v):v}let _=r;c!==t&&(a?_=function(v,I){return r.call(this,p(v),I,t)}:r.length>2&&(_=function(v,I){return r.call(this,v,I,t)}));const g=l.call(c,_,n);return a&&s?s(g):g}function B(t,e,r,n){const s=Q(t);let i=r;return s!==t&&(i=function(c,a,l){return r.call(this,c,p(a),l,t)}),s[e](i,...n)}function K(t,e,r){const n=u(t);o.track(n,f.ITERATE,D);const s=n[e](...r);return(s===-1||s===!1)&&Rt(r[0])?(r[0]=u(r[0]),n[e](...r)):s}function O(t,e,r=[]){return G(()=>Z(()=>u(t)[e].apply(t,r)))}function M(t){return t?t[d.IS_REF]===!0:!1}d.IS_REF;class ot{get(e,r,n){if(r===d.IS_REACTIVE)return!0;if(r===d.RAW)return n===H.get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const s=T(e);let i;if(s&&(i=at[r]))return i;if(r==="hasOwnProperty")return ht;const c=Reflect.get(e,r,M(e)?e:n);return(w(r)?J.has(r):ft(r))?c:(o.track(e,f.GET,r),M(c)?s&&z(r)?c:c.value:Y(c)?U(c):c)}}class ut extends ot{set(e,r,n,s){let i=e[r];if(i=u(i),n=u(n),!T(e)&&M(i)&&!M(n))return i.value=n,!0;const c=T(e)&&z(r)?Number(r)<e.length:V(e,r),a=Reflect.set(e,r,n,M(e)?e:s);return e===u(s)&&(c?W(n,i)&&o.trigger(e,E.SET,r,n,i):o.trigger(e,E.ADD,r,n)),a}deleteProperty(e,r){const n=V(e,r),s=e[r],i=Reflect.deleteProperty(e,r);return i&&n&&o.trigger(e,E.DELETE,r,void 0,s),i}has(e,r){const n=Reflect.has(e,r);return(!w(r)||!J.has(r))&&o.track(e,f.HAS,r),n}ownKeys(e){return o.track(e,f.ITERATE,T(e)?"length":S),Reflect.ownKeys(e)}}const lt=new ut;function ht(t){w(t)||(t=String(t));const e=u(this);return o.track(e,f.HAS,t),e.hasOwnProperty(t)}const J=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(w)),ft=it("__proto__,__v_isRef,__isVue"),dt={get:_t()};function _t(){const t=pt();return(e,r,n)=>r===d.IS_REACTIVE?!0:r===d.RAW?e:Reflect.get(V(t,r)&&r in e?t:e,r,n)}function pt(){const t={get(r){const n=this[d.RAW],s=u(n),i=u(r);W(r,i)&&o.track(s,f.GET,r),o.track(s,f.GET,i);const{has:c}=C(s),a=p;if(c.call(s,r))return a(n.get(r));if(c.call(s,i))return a(n.get(i));n!==s&&n.get(r)},get size(){const r=this[d.RAW];return o.track(u(r),f.ITERATE,S),Reflect.get(r,"size",r)},has(r){const n=this[d.RAW],s=u(n),i=u(r);return W(r,i)&&o.track(s,f.HAS,r),o.track(s,f.HAS,i),r===i?n.has(r):n.has(r)||n.has(i)},forEach(r,n){const s=this,i=s[d.RAW],c=u(i),a=p;return o.track(c,f.ITERATE,S),i.forEach((l,_)=>r.call(n,a(l),a(_),s))},add(r){r=u(r);const n=u(this);return C(n).has.call(n,r)||(n.add(r),o.trigger(n,E.ADD,r,r)),this},set(r,n){n=u(n);const s=u(this),{has:i,get:c}=C(s);let a=i.call(s,r);a||(r=u(r),a=i.call(s,r));const l=c.call(s,r);return s.set(r,n),a?W(n,l)&&o.trigger(s,E.SET,r,n,l):o.trigger(s,E.ADD,r,n),this},delete(r){const n=u(this),{has:s,get:i}=C(n);let c=s.call(n,r);c||(r=u(r),c=s.call(n,r));const a=i?i.call(n,r):void 0,l=n.delete(r);return c&&o.trigger(n,E.DELETE,r,void 0,a),l},clear(){const r=u(this),n=r.size!==0,s=void 0,i=r.clear();return n&&o.trigger(r,E.CLEAR,void 0,void 0,s),i}};return["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=Et(r)}),t}function Et(t){return function(...e){const r=this[d.RAW],n=u(r),s=N(n),i=t==="entries"||t===Symbol.iterator&&s,c=t==="keys"&&s,a=r[t](...e),l=p;return o.track(n,f.ITERATE,c?j:S),{next(){const{value:_,done:g}=a.next();return g?{value:_,done:g}:{value:i?[l(_[0]),l(_[1])]:l(_),done:g}},[Symbol.iterator](){return this}}}}const C=t=>Reflect.getPrototypeOf(t);function U(t){if(!Y(t)||t[d.RAW])return t;const e=nt(t);if(e===b.INVALID)return t;const r=H.get(t);if(r)return r;const n=new Proxy(t,e===b.COLLECTION?dt:lt);return H.set(t,n),n}const H=new WeakMap,p=t=>Y(t)?U(t):t;function Rt(t){return t?!!t[d.RAW]:!1}export{U as r};
//# sourceMappingURL=index-1ea29437.js.map
