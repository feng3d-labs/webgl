import"../../modulepreload-polyfill-B5Qt9EMX.js";import{g as h}from"../../utility-BL6jGTgT.js";import{W as A}from"../../WebGL-lLSa4FVc.js";(function(){const i=document.createElement("canvas");i.id="glcanvas",i.width=window.innerWidth,i.height=window.innerHeight,document.body.appendChild(i);const w={canvasId:"glcanvas",webGLcontextId:"webgl2"},g=new A(w),y={vertex:{code:h("vs")},fragment:{code:h("fs")}};let a=new Uint16Array([0,1,2,2,3,0]);{const e=new ArrayBuffer(a.byteLength*2),s=Math.ceil(Math.random()*(e.byteLength-a.byteLength)/Uint16Array.BYTES_PER_ELEMENT)*Uint16Array.BYTES_PER_ELEMENT,r=new Uint16Array(e,s,a.length);r.set(a),a=r}let t=new Float32Array([-1,-1,-.5,0,0,1,1,0,0,1,1,-1,-.5,0,0,1,0,1,0,1,1,1,-.5,0,0,1,0,0,1,1,-1,1,-.5,0,0,1,1,1,1,1]);{const e=new ArrayBuffer(t.byteLength*2),s=Math.ceil(Math.random()*(e.byteLength-t.byteLength)/Float32Array.BYTES_PER_ELEMENT)*Float32Array.BYTES_PER_ELEMENT,r=new Float32Array(e,s,t.length);r.set(t),t=r}const c={transform:{P:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],MV:[.5,0,0,0,0,.5,0,0,0,0,.5,0,0,0,0,1],Mnormal:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},o={light:{position:[0,0,0]}},b={material:{ambient:[.1,0,0],diffuse:[.5,0,0],specular:[1,1,1],shininess:4}},p={vertices:{position:{data:t,format:"float32x3",arrayStride:40,offset:0},normal:{data:t,format:"float32x3",arrayStride:40,offset:12},color:{data:t,format:"float32x4",arrayStride:40,offset:24}}},f={PerDraw:{value:c,bufferView:void 0},PerPass:{value:o,bufferView:void 0},PerScene:{value:b,bufferView:void 0}};{const e=(s=>{const r=s.reduce((n,m)=>{const u=Math.ceil(n.total/256)*256;return n.ranges.push({offset:u,size:m}),n.total=u+m,n},{total:0,ranges:[]}),M=new ArrayBuffer(r.total);return r.ranges.map(n=>new Uint8Array(M,n.offset,n.size))})([192,16,48]);f.PerDraw.bufferView=e[0],f.PerPass.bufferView=e[1],f.PerScene.bufferView=e[2]}const E={pipeline:y,bindingResources:f,vertices:p.vertices,indices:a,draw:{__type__:"DrawIndexed",indexCount:6,firstIndex:0}},v={commandEncoders:[{passEncoders:[{descriptor:{colorAttachments:[{clearValue:[0,0,0,1],loadOp:"clear"}]},renderPassObjects:[E]}]}]};let l=0;function d(){l+=.01,c.transform.MV[0]=.1*Math.cos(l)+.4,c.transform.MV=c.transform.MV.concat(),o.light.position[0]=Math.cos(3*l),o.light.position[1]=Math.sin(6*l),o.light.position=o.light.position.concat(),g.submit(v),requestAnimationFrame(d)}d()})();
//# sourceMappingURL=buffer_uniform.html-n7CnLeCA.js.map
