import"../../modulepreload-polyfill-B5Qt9EMX.js";import{g as n}from"../../utility-BL6jGTgT.js";import{W as _}from"../../WebGL-lLSa4FVc.js";import{c as u,s as b}from"../../mat4-BHCnbM9z.js";import{c as y,s as C}from"../../vec3-BLfYq55O.js";import"../../common-C8IKy_GC.js";const a=document.createElement("canvas");a.id="glcanvas";a.width=window.innerWidth;a.height=window.innerHeight;document.body.appendChild(a);const U={canvasId:"glcanvas",webGLcontextId:"webgl2"},t=new _(U),r={x:a.width,y:a.height},i={LEFT:0,RIGHT:1,MAX:2},R=new Array(i.MAX);R[i.LEFT]={x:0,y:r.y-r.x/2-50,width:r.x/2,height:r.x/2};R[i.RIGHT]={x:r.x/2,y:r.y-r.x/2-50,width:r.x/2,height:r.x/2};const o={TEXTURE:0,TEXTURE_CENTROID:1,SPLASH:2},l=[{vertex:{code:n("vs-render")},fragment:{code:n("fs-render")},primitive:{topology:"triangle-list"}},{vertex:{code:n("vs-render-centroid")},fragment:{code:n("fs-render-centroid")},primitive:{topology:"triangle-list"}},{vertex:{code:n("vs-splash")},fragment:{code:n("fs-splash")},primitive:{topology:"triangle-list"}}],D=3,s=.1,x=new Float32Array([s*0,s*.8,s*-.8,s*-.4,Number(s),s*-.8]),v=new Float32Array([0,0,1]),I=new Float32Array([-1,-1,1,-1,1,1,1,1,-1,1,-1,-1]),S=new Float32Array([0,1,1,1,1,0,1,0,0,0,0,1]),F={x:a.width,y:a.height},c=[],m=[];for(let e=0;e<i.MAX;++e)c[e]={descriptor:{format:"rgba8unorm",size:[F.x,F.y]}},m[e]={minFilter:"nearest",magFilter:"nearest"};const E={RENDERBUFFER:0,RENDERBUFFER_CENTROID:1,COLORBUFFER:2,COLORBUFFER_CENTROID:3},d=[{colorAttachments:[{view:{texture:c[0],baseMipLevel:0},clearValue:[0,0,0,1],loadOp:"clear"}],sampleCount:4},{colorAttachments:[{view:{texture:c[1],baseMipLevel:0},clearValue:[0,0,0,1],loadOp:"clear"}],sampleCount:4}],T=[{vertices:{position:{data:x,format:"float32x2"},data:{data:v,format:"float32"}}},{vertices:{position:{data:x,format:"float32x2"},data:{data:v,format:"float32"}}},{vertices:{position:{data:I,format:"float32x2"},texcoord:{data:S,format:"float32x2"}}}],f=[],g=u();for(let e=0;e<i.MAX;++e){const A={descriptor:d[e],renderPassObjects:[{pipeline:l[e],bindingResources:{MVP:{value:g}},vertices:T[e].vertices,draw:{__type__:"DrawVertex",vertexCount:D}}]};f.push(A)}const w=[],L={descriptor:{colorAttachments:[{clearValue:[0,0,0,1]}]},renderPassObjects:w},N={pipeline:l[o.SPLASH],vertices:T[o.SPLASH].vertices,draw:{__type__:"DrawVertex",vertexCount:6}},h=y(),p=.8/s;C(h,p,p,p);const O=u();b(O,g,h);for(let e=0;e<i.MAX;++e)w.push({...N,viewport:R[e],bindingResources:{MVP:{value:O},diffuse:{texture:c[e],sampler:m[e]}},draw:{__type__:"DrawVertex",vertexCount:6}});f.push(L);t.submit({commandEncoders:[{passEncoders:f}]});t.deleteTexture(c[o.TEXTURE]);t.deleteTexture(c[o.TEXTURE_CENTROID]);t.deleteSampler(m[o.TEXTURE]);t.deleteSampler(m[o.TEXTURE_CENTROID]);t.deleteFramebuffer(d[E.RENDERBUFFER]);t.deleteFramebuffer(d[E.COLORBUFFER]);t.deleteFramebuffer(d[E.RENDERBUFFER_CENTROID]);t.deleteFramebuffer(d[E.COLORBUFFER_CENTROID]);t.deleteProgram(l[o.TEXTURE]);t.deleteProgram(l[o.TEXTURE_CENTROID]);t.deleteProgram(l[o.SPLASH]);
//# sourceMappingURL=glsl_centroid.html-C-_UbFAU.js.map
