import"../../modulepreload-polyfill-B5Qt9EMX.js";import{r as R,W as O}from"../../WebGL-lLSa4FVc.js";import{c as W,p as Y}from"../../bunny-BYASNJvz.js";import{i as _,l as S,p as $}from"../../gl-mat4-DzNqOpLa.js";function F(t,e,r){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(r,2))}function P(t,e,r){return Math.atan2(e,t-r)}function X(t,e,r,w,d){t[0]+=e*r,t[1]+=e*w,t[2]+=e*d}function B(t,e){const r=e.length,w=t.length,d=new Array(r);for(let o=0;o<r;++o)d[o]=[0,0,0];for(let o=0;o<w;++o){const i=t[o],c=e[i[0]],f=e[i[1]],l=e[i[2]],m=c[0]-f[0],h=c[1]-f[1],E=c[2]-f[2],L=F(m,h,E),x=f[0]-l[0],v=f[1]-l[1],u=f[2]-l[2],a=F(x,v,u),n=l[0]-c[0],s=l[1]-c[1],b=l[2]-c[2],p=F(n,s,b);if(Math.min(L,a,p)<1e-6)continue;const M=.5*(L+a+p),j=Math.sqrt((M-L)*(M-a)*(M-p)/M);let A=h*u-E*v,y=E*x-m*u,C=m*v-h*x;const D=F(A,y,C);A/=D,y/=D,C/=D,X(d[i[0]],P(M,j,a),A,y,C),X(d[i[1]],P(M,j,p),A,y,C),X(d[i[2]],P(M,j,L),A,y,C)}for(let o=0;o<r;++o){const i=d[o],c=Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2)+Math.pow(i[2],2));if(c<1e-8){i[0]=1,i[1]=0,i[2]=0;continue}i[0]/=c,i[1]/=c,i[2]/=c}return d}function G(t){if(typeof t=="object"){if("buttons"in t)return t.buttons;if("which"in t){const e=t.which;if(e===2)return 4;if(e===3)return 2;if(e>0)return 1<<e-1}else if("button"in t){const e=t.button;if(e===1)return 4;if(e===2)return 2;if(e>=0)return 1<<e}}return 0}const k=G;function z(t){return t.target||t.srcElement||window}function N(t){if(typeof t=="object"){if("offsetX"in t)return t.offsetX;const r=z(t).getBoundingClientRect();return t.clientX-r.left}return 0}const U=N;function V(t){if(typeof t=="object"){if("offsetY"in t)return t.offsetY;const r=z(t).getBoundingClientRect();return t.clientY-r.top}return 0}const Z=V;function J(t,e){e||(e=t,t=window);let r=0,w=0,d=0;const o={shift:!1,alt:!1,control:!1,meta:!1};let i=!1;function c(n){let s=!1;return"altKey"in n&&(s=s||n.altKey!==o.alt,o.alt=!!n.altKey),"shiftKey"in n&&(s=s||n.shiftKey!==o.shift,o.shift=!!n.shiftKey),"ctrlKey"in n&&(s=s||n.ctrlKey!==o.control,o.control=!!n.ctrlKey),"metaKey"in n&&(s=s||n.metaKey!==o.meta,o.meta=!!n.metaKey),s}function f(n,s){const b=U(s),p=Z(s);"buttons"in s&&(n=s.buttons|0),(n!==r||b!==w||p!==d||c(s))&&(r=n|0,w=b||0,d=p||0,e&&e(r,w,d,o))}function l(n){f(0,n)}function m(){(r||w||d||o.shift||o.alt||o.meta||o.control)&&(w=d=0,r=0,o.shift=o.alt=o.control=o.meta=!1,e&&e(0,0,0,o))}function h(n){c(n)&&e&&e(r,w,d,o)}function E(n){k(n)===0?f(0,n):f(r,n)}function L(n){f(r|k(n),n)}function x(n){f(r&~k(n),n)}function v(){i||(i=!0,t.addEventListener("mousemove",E),t.addEventListener("mousedown",L),t.addEventListener("mouseup",x),t.addEventListener("mouseleave",l),t.addEventListener("mouseenter",l),t.addEventListener("mouseout",l),t.addEventListener("mouseover",l),t.addEventListener("blur",m),t.addEventListener("keyup",h),t.addEventListener("keydown",h),t.addEventListener("keypress",h),t!==window&&(window.addEventListener("blur",m),window.addEventListener("keyup",h),window.addEventListener("keydown",h),window.addEventListener("keypress",h)))}function u(){i&&(i=!1,t.removeEventListener("mousemove",E),t.removeEventListener("mousedown",L),t.removeEventListener("mouseup",x),t.removeEventListener("mouseleave",l),t.removeEventListener("mouseenter",l),t.removeEventListener("mouseout",l),t.removeEventListener("mouseover",l),t.removeEventListener("blur",m),t.removeEventListener("keyup",h),t.removeEventListener("keydown",h),t.removeEventListener("keypress",h),t!==window&&(window.removeEventListener("blur",m),window.removeEventListener("keyup",h),window.removeEventListener("keydown",h),window.removeEventListener("keypress",h)))}v();const a={element:t};return Object.defineProperties(a,{enabled:{get(){return i},set(n){n?v():u()},enumerable:!0},buttons:{get(){return r},enumerable:!0},x:{get(){return w},enumerable:!0},y:{get(){return d},enumerable:!0},mods:{get(){return o},enumerable:!0}}),a}const K=96,Q={ch:8,ex:7.15625,em:16,rem:16,in:K,cm:K/2.54,mm:K/25.4,pt:K/72,pc:K/6,px:1};function T(t){return Q[t]}function tt(t,e,r){typeof t=="function"&&(r=!!e,e=t,t=window);const w=T("ex"),d=o=>{r&&o.preventDefault();let i=o.deltaX||0,c=o.deltaY||0,f=o.deltaZ||0;const l=o.deltaMode;let m=1;switch(l){case 1:m=w;break;case 2:m=window.innerHeight;break}if(i*=m,c*=m,f*=m,i||c||f)return e(i,c,f,o)};return t.addEventListener("wheel",d),d}function et(t){const e={view:_(new Float32Array(16)),projection:_(new Float32Array(16)),center:new Float32Array(t.center||3),theta:t.theta||0,phi:t.phi||0,distance:Math.log(t.distance||10),eye:new Float32Array(3),up:new Float32Array(t.up||[0,1,0])},r=new Float32Array([1,0,0]),w=new Float32Array([0,0,1]),d=Math.log("minDistance"in t?t.minDistance:.1),o=Math.log("maxDistance"in t?t.maxDistance:1e3);let i=0,c=0,f=0,l=0,m=0;J(function(u,a,n){if(u&1){const s=(a-l)/window.innerWidth,b=(n-m)/window.innerHeight,p=Math.max(e.distance,.5);i+=p*s,c+=p*b}l=a,m=n}),tt(function(u,a){f+=a/window.innerHeight});function h(u){const a=u*.9;return Math.abs(a)<.1?0:a}function E(u,a,n){return Math.min(Math.max(u,a),n)}function L(){const u=e.center,a=e.eye,n=e.up;e.theta+=i,e.phi=E(e.phi+c,-Math.PI/2,Math.PI/2),e.distance=E(e.distance+f,d,o),i=h(i),c=h(c),f=h(f);const s=e.theta,b=e.phi,p=Math.exp(e.distance),M=p*Math.sin(s)*Math.cos(b),j=p*Math.cos(s)*Math.cos(b),A=p*Math.sin(b);for(let y=0;y<3;++y)a[y]=u[y]+M*w[y]+j*r[y]+A*n[y];S(e.view,a,u,n)}const x=(u,a,n)=>{Object.keys(e).forEach(function(s){R(u.bindingResources)[s]={value:v[s]}}),R(u.bindingResources).projection={value:$(e.projection,Math.PI/4,a/n,.01,1e3)}};function v(u,a,n){L(),x(u,a,n)}return Object.keys(e).forEach(function(u){v[u]=e[u]}),v}const g=document.createElement("canvas");g.id="glcanvas";g.width=window.innerWidth;g.height=window.innerHeight;document.body.appendChild(g);const nt=new O({canvasId:"glcanvas",webGLContextAttributes:{antialias:!0}}),ot=et({center:[0,2.5,0]}),it=Y.flat(),H=W.flat(),rt=B(W,Y).flat(),I={vertices:{position:{data:new Float32Array(it),format:"float32x3"},normal:{data:new Float32Array(rt),format:"float32x3"}},indices:new Uint16Array(H),draw:{__type__:"DrawIndexed",indexCount:H.length},bindingResources:{},pipeline:{vertex:{code:`precision mediump float;
        uniform mat4 projection, view;
        attribute vec3 position, normal;
        varying vec3 vnormal;
        void main () {
          vnormal = normal;
          gl_Position = projection * view * vec4(position, 1.0);
        }`},fragment:{code:`precision mediump float;
        varying vec3 vnormal;
        void main () {
          gl_FragColor = vec4(abs(vnormal), 1.0);
        }`,targets:[{blend:{}}]},depthStencil:{depthWriteEnabled:!0}}};function q(){g.width=g.clientWidth,g.height=g.clientHeight,ot(I,g.width,g.height),nt.submit({commandEncoders:[{passEncoders:[{descriptor:{colorAttachments:[{clearValue:[0,0,0,1]}]},renderPassObjects:[I]}]}]}),requestAnimationFrame(q)}q();
//# sourceMappingURL=camera.html-uPUxutuH.js.map
